{"version":3,"sources":["components/CombatArena.module.css","components/MemberStats.module.css","components/SplashScreen.module.css","components/Level.module.css","components/CombatView.module.css","components/Dialog.module.css","components/Character.module.css","components/Tile.module.css","components/Level.tsx","components/SplashScreen.tsx","className.ts","combatHelpers.ts","combat.ts","data/geppetto/combat_characters.png","data/creatures.ts","state/combatSlice.ts","state/encounterSlice.ts","state/hooks.ts","components/CombatLogSentence.tsx","components/CombatView.tsx","components/Icon.tsx","data/geppetto/zak.png","data/geppetto/schoen.png","data/geppetto/roe.png","components/MemberStats.tsx","data/geppetto/systeem.png","components/logo.png","components/CombatArena.tsx","components/Dialog.tsx","state/characterSlice.ts","components/Character.tsx","components/tileHelpers.ts","components/Tile.tsx","types.ts","data/characters/amerigo.ts","data/characters/carl.ts","data/characters/catoo.ts","data/characters/gina.ts","data/characters/piet.ts","data/characters/sint.ts","data/characters/tinka.ts","data/index.ts","data/stage1.ts","data/bedroom.ts","data/livingroom.ts","data/street.ts","data/mountain.ts","data/finish.ts","data/characters/matthijs.ts","Game.tsx","App.tsx","state/store.ts","serviceWorker.ts","index.tsx"],"names":["module","exports","MoveDirection","SplashScreen","onKeyPress","screen","useEffect","listener","e","code","window","addEventListener","removeEventListener","className","styles","startScreen","endScreen","classNames","Object","entries","reduce","result","key","concat","join","isStrongFor","from","to","isWeakFor","DUMMY_ACTION","action","target","genericCombatTexture","url","a","Promise","resolve","image","Image","crossOrigin","src","onload","loadTexture","amerigoTexture","creatures","id","name","level","xpResult","type","initiative","health","energy","texture","animation","prepareAnimation","amerigoAnimation","actions","animationTrack","track","damage","cost","cooldown","targets","ameerigogoAnimation","ozosnelAnimation","ozoveelsnellerAnimation","damageType","robotAnimation","bearAnimation","slimeAnimation","creature","evolutions","amerigo","newCard","dialog","characterName","characterColor","text","ozosnel","createCombatCreature","party","cardId","index","creatureCard","Error","card","cooldowns","inTurn","combatSlice","createSlice","initialState","inCombat","combatResult","currentTurn","lastActionLog","reducers","startFight","state","filter","c","payload","map","sort","b","cA","cB","startEncounter","endEncounter","actionTurn","currentcreature","find","team","ownCard","keys","actionDetails","isEnemy","includes","forEach","healing","Math","min","push","source","with","points","unit","undefined","round","stunned","leftAlive","some","rightAlive","selectInCombat","combat","selectFightWon","selectCombatLog","selectLevelingUp","character","cards","xp","selectCombatStatus","currentCreature","currentCard","disabled","inCooldown","outcome","partyA","partyB","turn","isStunned","encounterSlice","encounterCharacter","fightsFinished","encountersCompleted","encounter","closeEncounter","loseEncounter","completeFight","winEncounter","selectActiveEncounter","useAppDispatch","useDispatch","useAppSelector","useSelector","creatureName","actionMap","hurts","heals","stuns","unitMap","turns","CombatLogSentence","sentence","style","textTransform","background","backgroundAnimation","trackMapping","CombatView","canvasRef","useRef","playerRef","animationsRef","resizeHandler","current","getBoundingClientRect","width","height","devicePixelRatio","player","setupWebGL","img","controls","addAnimation","panX","zoom","stateTrack","setupBackground","requestAnimationFrame","render","animations","destroy","values","combatStatus","combatLog","checkSetup","panY","zIndex","startTrack","onTrackStopped","synchronizeAnimations","animationStates","log","states","entry","sourceAction","getAnimationStates","animationId","arena","ref","imageMapping","bag","shoe","rod","Icon","symbol","alt","verticalAlign","MemberStats","member","opacity","padding","color","memberProps","max","value","energyBar","actionRequiresTarget","actionSelection","actionRequiresEnemyTarget","actionRequiresFriendlyTarget","CombatArena","dispatch","useState","setActionSelection","targetSelection","setTargetSelection","actionFocus","setActionFocus","characterOrder","timeoutId","setTimeout","clearTimeout","fights","actionData","needsHealing","healingAbilities","length","defensiveAction","specialAbilities","offensiveAction","targetType","r","enemy","enemyActionSelection","f","targetName","actionIndices","keyHandling","ev","indexOf","fightScreen","systeemImage","position","top","left","logo","right","partyStats","partyBox","actionsMenu","focusAction","disabledAction","Dialog","onClick","children","keyListener","event","dialogBox","characterSlice","x","y","z","positionHistory","followers","move","unshift","slice","getCard","removeCard","addFollower","giveXP","enterLevel","selectPosition","selectZone","selectCardIds","selectFollowers","pos","calculateXy","calculatePosition","size","transform","Character","backgroundPosition","tileMapping","terrain","furniture","fantasy","holiday","directionMapping","north","east","south","west","remapDirection","stairs","getTileSrc","tile","direction","set","sizeMapping","wide","normal","large","small","furnitureLookup","floorFull","offsetX","offsetY","wall","bedSingle","desk","wallDoorway","offsetZ","loungeDesignSofa","doorwayOpen","getStyle","tileData","Tile","dimensions","defaultSettings","tileConfig","getDimensions","coord","preventEvents","CharacterSprites","getTopTerrain","data","topZ","tiles","samePosition","isRamp","inDirection","xDelta","yDelta","inOppositeDirection","X_MARGIN","Y_MARGIN","calculateNewPos","levelData","currentTerrain","newTerrain","isFloor","directionMap","Up","Down","Left","Right","None","Level","cardIds","activeEncounter","posRef","terrainRef","canMoveRef","levelSwitchRef","levelSwitchState","setLevelSwitchState","timeId","levelCharacters","useMemo","characters","follower","characterSprite","movePlayer","useCallback","deltas","newPos","screenPos","needsScroll","scrollSettings","scrollLeft","scrollTop","behavior","scroll","onExit","exits","startCoord","meetCharacter","keyHandler","preventDefault","fadeout","decorations","Amerigo","conditionDialog","initialDialog","rewards","winDialog","loseDialog","carl","Carl","conditions","minimalCards","enemies","catoo","Catoo","gina","Gina","piet","Piet","sint","Sint","tinka","Tinka","zones","Array","fill","_","i","Matthijs","gameCompleted","AFTER_FIGHT_COOLDOWN","hasDialogEnded","dialogType","dialogState","evolving","selectDialogData","dialogList","sentencesConsumed","dialogIndex","activeDialog","Game","onComplete","zoneId","zone","fightWon","setDialogState","ch","selectEncounterCharacter","metConditions","every","activeFight","evolveData","dialogData","replaceAll","split","element","Fragment","App","gameState","setGameState","onStart","store","configureStore","reducer","characterReducer","combatReducer","encounterReducer","Boolean","location","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.5c9f16b3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"fightScreen\":\"CombatArena_fightScreen__2Ikf1\",\"log\":\"CombatArena_log__zgc9c\",\"partyStats\":\"CombatArena_partyStats__CKZRw\",\"partyBox\":\"CombatArena_partyBox__NUtcY\",\"actionsMenu\":\"CombatArena_actionsMenu__2zW-s\",\"focusAction\":\"CombatArena_focusAction__3v0XJ\",\"disabledAction\":\"CombatArena_disabledAction__2vNUZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"memberProps\":\"MemberStats_memberProps__3Yh-H\",\"energyBar\":\"MemberStats_energyBar__3Yb_H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"startScreen\":\"SplashScreen_startScreen__1ASwr\",\"endScreen\":\"SplashScreen_endScreen__3Wo6U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"terrain\":\"Level_terrain__1iJrW\",\"fadeout\":\"Level_fadeout__9v7sj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"arena\":\"CombatView_arena__2l160\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogBox\":\"Dialog_dialogBox__3N1Nf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"character\":\"Character_character__eccEu\",\"walking\":\"Character_walking__2-ORm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tile\":\"Tile_tile__2ux10\"};","import React, {\n  useEffect,\n  useCallback,\n  useRef,\n  useMemo,\n  useState,\n} from \"react\";\nimport className from \"../className\";\nimport {\n  enterLevel,\n  move,\n  selectCardIds,\n  selectFollowers,\n  selectPosition,\n} from \"../state/characterSlice\";\nimport { startEncounter } from \"../state/combatSlice\";\nimport { encounter, selectActiveEncounter } from \"../state/encounterSlice\";\nimport { useAppDispatch, useAppSelector } from \"../state/hooks\";\nimport { Direction, LevelData, Position, TerrainTile } from \"../types\";\nimport Character, { calculateXy } from \"./Character\";\nimport styles from \"./Level.module.css\";\nimport Tile from \"./Tile\";\nimport logo from \"./logo.png\";\n\ntype Props = {\n  data: LevelData;\n};\n\nconst preventEvents = [\n  \"Enter\",\n  \"ArrowLeft\",\n  \"ArrowUp\",\n  \"ArrowDown\",\n  \"ArrowRight\",\n  \"Space\",\n];\n\nenum MoveDirection {\n  Up,\n  Down,\n  Left,\n  Right,\n  None,\n}\n\nconst getTopTerrain = (\n  data: LevelData,\n  x: number,\n  y: number\n): TerrainTile | null => {\n  let topZ = -1;\n  let result: TerrainTile | null = null;\n  data.tiles.forEach((tile) => {\n    if (tile.coord[0] === x && tile.coord[1] === y && tile.coord[2] > topZ) {\n      topZ = tile.coord[2];\n      result = tile;\n    }\n    if (\n      tile.size === \"large\" &&\n      (tile.coord[0] === x || tile.coord[0] + 1 === x) &&\n      (tile.coord[1] === y || tile.coord[1] + 1 === y) &&\n      tile.coord[2] > topZ\n    ) {\n      topZ = tile.coord[2];\n      result = tile;\n    }\n    if (\n      tile.size === \"wide\" &&\n      (tile.coord[0] === x ||\n        (tile.coord[0] + 1 === x && tile.direction === \"east\")) &&\n      (tile.coord[1] === y ||\n        (tile.coord[1] + 1 === y && (tile.direction ?? \"north\") === \"north\")) &&\n      tile.coord[2] > topZ\n    ) {\n      topZ = tile.coord[2];\n      result = tile;\n    }\n  });\n  return result;\n};\n\nconst samePosition = (a: Position, b: Position) =>\n  a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n\nconst isRamp = (img: string): boolean =>\n  [\"blockDirtRamp\", \"blockSlope\", \"blockSnowSlope\", \"stairs\"].includes(img);\n\nconst isFloor = (newTerrain: TerrainTile): boolean =>\n  ![\"treePineSnow\"].includes(newTerrain.img);\n\nconst inDirection = (\n  direction: Direction,\n  xDelta: number,\n  yDelta: number\n): boolean =>\n  (direction === \"east\" && xDelta === -1) ||\n  (direction === \"south\" && yDelta === 1);\n\nconst inOppositeDirection = (\n  direction: Direction,\n  xDelta: number,\n  yDelta: number\n): boolean =>\n  (direction === \"east\" && xDelta === 1) ||\n  (direction === \"south\" && yDelta === -1);\n\nconst X_MARGIN = 300;\nconst Y_MARGIN = 200;\n\nconst calculateNewPos = (\n  levelData: LevelData,\n  position: Position,\n  xDelta: number,\n  yDelta: number\n): Position => {\n  let [x, y, z] = position;\n  const currentTerrain = getTopTerrain(levelData, position[0], position[1]);\n  if (currentTerrain && isRamp(currentTerrain.img)) {\n    if (inDirection(currentTerrain.direction || \"north\", xDelta, yDelta)) {\n      z += 0.5;\n    }\n    if (\n      inOppositeDirection(currentTerrain.direction || \"north\", xDelta, yDelta)\n    ) {\n      z -= 0.5;\n    }\n  }\n\n  const newTerrain = getTopTerrain(\n    levelData,\n    position[0] + xDelta,\n    position[1] + yDelta\n  );\n  if (newTerrain === null) {\n    // Cliff!\n    return position;\n  }\n\n  if (isRamp(newTerrain.img)) {\n    // Walking 'on' the ramp\n    if (\n      inDirection(newTerrain.direction || \"north\", xDelta, yDelta) &&\n      newTerrain.coord[2] === z\n    ) {\n      return [x + xDelta, y + yDelta, z + 0.5];\n    } else if (\n      inOppositeDirection(newTerrain.direction || \"north\", xDelta, yDelta) &&\n      newTerrain.coord[2] === z - 1\n    ) {\n      return [x + xDelta, y + yDelta, z - 0.5];\n    } else {\n      return position;\n    }\n  }\n\n  // Higher or lower level\n  if (newTerrain.coord[2] !== z - 1 || !isFloor(newTerrain)) {\n    return position;\n  }\n\n  return [x + xDelta, y + yDelta, z];\n};\n\ntype DirectionMap = {\n  [Key in MoveDirection]: [number, number];\n};\n\nconst directionMap: DirectionMap = {\n  [MoveDirection.Up]: [-1, 0],\n  [MoveDirection.Down]: [1, 0],\n  [MoveDirection.Left]: [0, -1],\n  [MoveDirection.Right]: [0, 1],\n  [MoveDirection.None]: [0, 0],\n};\n\ntype LevelSwitchState = \"fadeout\" | \"levelSwitch\" | \"fadein\";\n\nconst Level: React.FunctionComponent<Props> = ({ data: levelData }) => {\n  const position = useAppSelector(selectPosition);\n  const cardIds = useAppSelector(selectCardIds);\n  const followers = useAppSelector(selectFollowers);\n  const dispatch = useAppDispatch();\n  const activeEncounter = useAppSelector(selectActiveEncounter);\n  const posRef = useRef(position);\n  const terrainRef = useRef<HTMLDivElement>(null);\n  const canMoveRef = useRef(true);\n\n  const levelSwitchRef = useRef(levelData);\n  const [levelSwitchState, setLevelSwitchState] =\n    useState<LevelSwitchState>(\"fadeout\");\n  const data = levelSwitchRef.current;\n\n  useEffect(() => {\n    if (levelSwitchState === \"fadein\" && levelData !== levelSwitchRef.current) {\n      setLevelSwitchState(\"fadeout\");\n    }\n    if (levelSwitchState === \"fadeout\") {\n      const timeId = setTimeout(() => {\n        levelSwitchRef.current = levelData;\n        setLevelSwitchState(\"levelSwitch\");\n      }, 500);\n      return () => clearTimeout(timeId);\n    }\n    if (levelSwitchState === \"levelSwitch\") {\n      setLevelSwitchState(\"fadein\");\n      return;\n    }\n  }, [levelSwitchState, levelData]);\n\n  const levelCharacters = useMemo(\n    () =>\n      data.characters.filter(\n        (f) =>\n          !activeEncounter.encountersCompleted.some(\n            (follower) => f.characterSprite === follower\n          )\n      ),\n    [data, activeEncounter.encountersCompleted]\n  );\n  useEffect(() => {\n    posRef.current = position;\n  }, [data, position]);\n\n  useEffect(() => {\n    if (activeEncounter.encounterCharacter === -1) {\n      canMoveRef.current = true;\n    }\n  }, [activeEncounter.encounterCharacter]);\n\n  const movePlayer = useCallback(\n    (direction: MoveDirection) => {\n      const deltas = directionMap[direction];\n      const newPos = calculateNewPos(data, posRef.current, ...deltas);\n\n      // update scroll position\n      const screenPos = calculateXy(newPos);\n      if (terrainRef.current) {\n        const { width, height } = terrainRef.current.getBoundingClientRect();\n\n        let needsScroll = false;\n        const scrollSettings: ScrollToOptions = {\n          left: terrainRef.current.scrollLeft,\n          top: terrainRef.current.scrollTop,\n          behavior: \"smooth\",\n        };\n\n        if (screenPos.x - terrainRef.current.scrollLeft > width - X_MARGIN) {\n          scrollSettings.left = screenPos.x + X_MARGIN - width;\n          needsScroll = true;\n        }\n        if (screenPos.x - terrainRef.current.scrollLeft < X_MARGIN) {\n          scrollSettings.left = screenPos.x - X_MARGIN;\n          needsScroll = true;\n        }\n\n        if (screenPos.y - terrainRef.current.scrollTop > height - Y_MARGIN) {\n          scrollSettings.top = screenPos.y + Y_MARGIN - height;\n          needsScroll = true;\n        }\n\n        if (screenPos.y - terrainRef.current.scrollTop < Y_MARGIN) {\n          scrollSettings.top = screenPos.y - Y_MARGIN;\n          needsScroll = true;\n        }\n\n        if (needsScroll) {\n          terrainRef.current.scroll(scrollSettings);\n        }\n      }\n\n      // Check if we are meeting a character;\n      const onExit = data.exits.find((c) => samePosition(c.coord, newPos));\n      if (onExit) {\n        dispatch(\n          enterLevel({ level: onExit.level, position: onExit.startCoord })\n        );\n        return;\n      }\n\n      const meetCharacter = levelCharacters.find((c) =>\n        samePosition(c.position, newPos)\n      );\n      if (meetCharacter) {\n        canMoveRef.current = false;\n        dispatch(encounter(meetCharacter.characterSprite));\n        dispatch(startEncounter(cardIds));\n      } else {\n        posRef.current = newPos;\n        dispatch(move(posRef.current));\n      }\n    },\n    [dispatch, data, levelCharacters, cardIds]\n  );\n\n  useEffect(() => {\n    const keyHandler = (event: KeyboardEvent) => {\n      if (preventEvents.includes(event.code)) {\n        event.preventDefault();\n      }\n      if (canMoveRef.current) {\n        if (event.code === \"ArrowUp\") {\n          movePlayer(MoveDirection.Up);\n        }\n        if (event.code === \"ArrowDown\") {\n          movePlayer(MoveDirection.Down);\n        }\n        if (event.code === \"ArrowLeft\") {\n          movePlayer(MoveDirection.Left);\n        }\n        if (event.code === \"ArrowRight\") {\n          movePlayer(MoveDirection.Right);\n        }\n      }\n    };\n    movePlayer(MoveDirection.None);\n\n    window.addEventListener(\"keydown\", keyHandler);\n\n    return () => {\n      window.removeEventListener(\"keydown\", keyHandler);\n    };\n  }, [movePlayer]);\n\n  return (\n    <div\n      className={className({\n        [styles.terrain]: true,\n        [styles.fadeout]: levelSwitchState !== \"fadein\",\n      })}\n      ref={terrainRef}\n    >\n      <img\n        src={logo}\n        alt=\"Tristmon\"\n        height=\"100\"\n        style={{ position: \"fixed\", top: \"10px\", right: \"10px\" }}\n      />\n      {data.tiles.map((tile, index) => (\n        <Tile tile={tile} key={index} />\n      ))}\n      {data.decorations.map((tile, index) => (\n        <Tile tile={tile} key={index} />\n      ))}\n      {levelCharacters.map((character, index) => (\n        <Character\n          position={character.position}\n          index={character.characterSprite}\n          key={character.characterSprite}\n        />\n      ))}\n      {followers.map(({ index, pos }) => (\n        <Character position={pos} index={index} key={index} size=\"small\" />\n      ))}\n      <Character position={position} />\n    </div>\n  );\n};\n\nexport default Level;\n","import React, { useEffect } from \"react\";\nimport styles from \"./SplashScreen.module.css\";\n\ntype Props = {\n  onKeyPress?: () => void;\n  screen: \"start\" | \"end\";\n};\n\nconst SplashScreen: React.FunctionComponent<Props> = ({\n  onKeyPress,\n  screen,\n}) => {\n  useEffect(() => {\n    if (!onKeyPress) return;\n    const listener = (e: KeyboardEvent) => {\n      if (e.code === \"Enter\" || e.code === \"Space\") {\n        onKeyPress();\n      }\n    };\n\n    window.addEventListener(\"keydown\", listener);\n    return () => {\n      window.removeEventListener(\"keydown\", listener);\n    };\n  }, [onKeyPress]);\n  return (\n    <div\n      className={screen === \"start\" ? styles.startScreen : styles.endScreen}\n    />\n  );\n};\n\nexport default SplashScreen;\n","const className = (classNames: Record<string, boolean>): string =>\n  Object.entries(classNames)\n    .reduce(\n      (result, [key, value]) => (value ? result.concat(key) : result),\n      [] as string[]\n    )\n    .join(\" \");\n\nexport default className;\n","import { CreatureType } from \"./types\";\n\nexport const modifier = (from: CreatureType, to: CreatureType): number =>\n  isStrongFor(from, to) ? 1.2 : isWeakFor(from, to) ? 0.8 : 1.0;\n\nexport const isStrongFor = (from: CreatureType, to: CreatureType): boolean =>\n  (from === \"shoe\" && to === \"bag\") ||\n  (from === \"bag\" && to === \"rod\") ||\n  (from === \"rod\" && to === \"shoe\");\n\nexport const isWeakFor = (from: CreatureType, to: CreatureType): boolean =>\n  (from === \"shoe\" && to === \"rod\") ||\n  (from === \"rod\" && to === \"bag\") ||\n  (from === \"bag\" && to === \"shoe\");\n","import { isWeakFor } from \"./combatHelpers\";\nimport { CombatStatus } from \"./state/combatSlice\";\n\nconst DUMMY_ACTION = { action: \"wait\", target: \"all\" };\n\nexport const enemyActionSelection = (\n  combatStatus: CombatStatus\n): { action: string; target: string } => {\n  if (combatStatus.turn === undefined || combatStatus.turn.isStunned) {\n    return DUMMY_ACTION;\n  }\n  // weak team mates? heal!\n  const needsHealing = combatStatus.partyB\n    .filter((c) => c.health < 15)\n    .sort((a, b) => a.health - b.health);\n  const healingAbilities = combatStatus.turn.actions\n    .filter((a) => !a.disabled && a.damage < 0)\n    .sort((a, b) => a.cost - b.cost);\n\n  if (needsHealing.length > 0 && healingAbilities.length > 0) {\n    const defensiveAction = healingAbilities[0];\n\n    const target =\n      defensiveAction.targets[0] === \"allFriendlies\"\n        ? \"all\"\n        : needsHealing[0].id;\n\n    return { action: defensiveAction.name, target };\n  }\n\n  const specialAbilities = combatStatus.turn.actions\n    .filter((a) => a.damageType && !a.disabled)\n    .sort((a, b) => a.cost - b.cost)[0];\n\n  // max offence!\n  const offensiveAction = combatStatus.turn.actions\n    .filter((a) => !a.disabled)\n    .sort((a, b) => b.damage + b.cost - (a.damage + a.cost))[0];\n\n  const action = specialAbilities || offensiveAction;\n\n  if (action) {\n    const target = action.targets.reduce<null | string>(\n      (result, targetType) => {\n        if (targetType === \"allEnemies\") {\n          return \"all\";\n        }\n        if (targetType === \"maxHealth\") {\n          const target = combatStatus.partyA.reduce((r, current) =>\n            current.health > r.health ? current : r\n          );\n          return target.id;\n        }\n        if (targetType === \"minHealth\") {\n          const target = combatStatus.partyA.reduce((r, current) =>\n            current.health < r.health ? current : r\n          );\n          return target.id;\n        }\n        if (targetType === \"weakness\") {\n          const target = combatStatus.partyA.find((enemy) =>\n            combatStatus.turn\n              ? isWeakFor(enemy.card.type, combatStatus.turn.creature.card.type)\n              : false\n          );\n\n          if (target) return target.id;\n        }\n        return result;\n      },\n      null\n    );\n    if (target) {\n      return {\n        action: action.name,\n        target,\n      };\n    }\n  }\n  return DUMMY_ACTION;\n};\n","export default __webpack_public_path__ + \"static/media/combat_characters.2f0018a7.png\";","import { ImageDefinition, prepareAnimation } from \"geppetto-player\";\nimport { CreatureCard, CreatureCardId, Dialog } from \"../types\";\nimport amerigoTexture from \"./geppetto/combat_characters.png\";\nimport amerigoAnimation from \"./geppetto/amerigo.json\";\nimport ozosnelAnimation from \"./geppetto/ozosnel.json\";\nimport ozoveelsnellerAnimation from \"./geppetto/ozoveelsneller.json\";\nimport ameerigogoAnimation from \"./geppetto/ameerigogo.json\";\nimport robotAnimation from \"./geppetto/robot.json\";\nimport bearAnimation from \"./geppetto/beer.json\";\nimport slimeAnimation from \"./geppetto/slime.json\";\n\nconst loadTexture = async (url: string): Promise<HTMLImageElement> =>\n  new Promise((resolve) => {\n    const image = new Image();\n    image.crossOrigin = \"anonymous\";\n    image.src = url;\n    image.onload = () => resolve(image);\n  });\n\nexport const genericCombatTexture = loadTexture(amerigoTexture);\n\nconst amerigo: CreatureCard = {\n  id: \"amerigo\",\n  name: \"Amerigo\",\n  level: 1,\n  xpResult: 75,\n  type: \"shoe\",\n  initiative: 4,\n\n  health: 60,\n  energy: 4,\n\n  texture: genericCombatTexture,\n  animation: prepareAnimation(amerigoAnimation as unknown as ImageDefinition),\n\n  actions: [\n    {\n      name: \"Kopstoot\",\n      animationTrack: { track: \"headbutt\", target: \"self\" },\n      damage: 5,\n      cost: 0,\n      cooldown: 0,\n      targets: [\"enemy\"],\n    },\n    {\n      name: \"Hoeftrap\",\n      animationTrack: { track: \"kick\", target: \"self\" },\n      damage: 15,\n      cost: 2,\n      cooldown: 1,\n      targets: [\"enemy\"],\n    },\n    {\n      name: \"Eet wortel\",\n      damage: -40,\n      cost: 2,\n      cooldown: 2,\n      targets: [\"self\"],\n    },\n  ],\n};\n\nconst ameerigogo: CreatureCard = {\n  id: \"ameerigogo\",\n  name: \"Ameerigogo\",\n  level: 2,\n  xpResult: 0,\n  type: \"shoe\",\n  initiative: 4,\n\n  health: 80,\n  energy: 8,\n\n  texture: genericCombatTexture,\n  animation: prepareAnimation(\n    ameerigogoAnimation as unknown as ImageDefinition\n  ),\n\n  actions: [\n    {\n      name: \"Kopstoot\",\n      animationTrack: { track: \"headbutt\", target: \"self\" },\n      damage: 10,\n      cost: 0,\n      cooldown: 0,\n      targets: [\"enemy\"],\n    },\n    {\n      name: \"Hoeftrap\",\n      animationTrack: { track: \"kick\", target: \"self\" },\n      damage: 24,\n      cost: 2,\n      cooldown: 1,\n      targets: [\"enemy\"],\n    },\n    {\n      name: \"Eet wortel\",\n      damage: -60,\n      cost: 2,\n      cooldown: 2,\n      targets: [\"friendly\"],\n    },\n    {\n      name: \"Wortelfeest\",\n      animationTrack: { track: \"massHeal\", target: \"environment\" },\n\n      damage: -40,\n      cost: 4,\n      cooldown: 4,\n      targets: [\"allFriendlies\"],\n    },\n  ],\n};\n\nconst ozosnel: CreatureCard = {\n  id: \"ozosnel\",\n  name: \"Ozosnel\",\n  level: 1,\n  xpResult: 100,\n  type: \"rod\",\n  initiative: 2,\n\n  health: 50,\n  energy: 4,\n\n  texture: genericCombatTexture,\n  animation: prepareAnimation(ozosnelAnimation as unknown as ImageDefinition),\n\n  actions: [\n    {\n      name: \"Hoefzoef\",\n      animationTrack: { track: \"kick\", target: \"self\" },\n      damage: 6,\n      cost: 0,\n      cooldown: 0,\n      targets: [\"enemy\"],\n    },\n    {\n      name: \"Stormloop\",\n      animationTrack: { target: \"self\", track: \"zoef\" },\n      damage: 10,\n      cost: 2,\n      cooldown: 4,\n      targets: [\"allEnemies\"],\n    },\n  ],\n};\n\nconst ozoveelsneller: CreatureCard = {\n  id: \"ozoveelsneller\",\n  name: \"Ozoveelsneller\",\n  level: 2,\n  xpResult: 0,\n  type: \"rod\",\n  initiative: 2,\n\n  health: 70,\n  energy: 12,\n\n  texture: genericCombatTexture,\n  animation: prepareAnimation(\n    ozoveelsnellerAnimation as unknown as ImageDefinition\n  ),\n\n  actions: [\n    {\n      name: \"Hoefzoef\",\n      animationTrack: { track: \"kick\", target: \"self\" },\n      damage: 6,\n      cost: 0,\n      cooldown: 0,\n      targets: [\"enemy\"],\n    },\n    {\n      name: \"Zoefstomp\",\n      animationTrack: { track: \"stomp\", target: \"self\" },\n      damage: 2,\n      damageType: \"stun\",\n      cost: 3,\n      cooldown: 1,\n      targets: [\"enemy\"],\n    },\n    {\n      name: \"Pepernoten storm\",\n      animationTrack: { track: \"massAttack\", target: \"environment\" },\n      damage: 20,\n      cost: 3,\n      cooldown: 4,\n      targets: [\"allEnemies\"],\n    },\n  ],\n};\n\nconst robot: CreatureCard = {\n  id: \"robot\",\n  name: \"Robot\",\n  level: 1,\n  xpResult: 0,\n  type: \"rod\",\n  initiative: 6,\n\n  health: 30,\n  energy: 0,\n\n  texture: genericCombatTexture,\n  animation: prepareAnimation(robotAnimation as unknown as ImageDefinition),\n\n  actions: [\n    {\n      name: \"Arm klap\",\n      animationTrack: { target: \"self\", track: \"armklap\" },\n      damage: 8,\n      cost: 0,\n      cooldown: 0,\n      targets: [\"maxHealth\"],\n    },\n    {\n      name: \"Arm stomper\",\n      animationTrack: { target: \"self\", track: \"stomper\" },\n      damage: 12,\n      cost: 0,\n      cooldown: 3,\n      targets: [\"maxHealth\"],\n    },\n  ],\n};\n\nconst bear: CreatureCard = {\n  id: \"bear\",\n  name: \"Teddybeer\",\n  level: 1,\n  xpResult: 0,\n  type: \"shoe\",\n  initiative: 3,\n\n  health: 30,\n  energy: 4,\n\n  texture: genericCombatTexture,\n  animation: prepareAnimation(bearAnimation as unknown as ImageDefinition),\n\n  actions: [\n    {\n      name: \"Knuffel\",\n      animationTrack: { target: \"self\", track: \"hugAttack\" },\n      damage: 6,\n      cost: 0,\n      cooldown: 0,\n      targets: [\"weakness\", \"minHealth\"],\n    },\n    {\n      name: \"Knuffel sprong\",\n      animationTrack: { target: \"self\", track: \"hugJump\" },\n      damage: 12,\n      cost: 0,\n      cooldown: 3,\n      targets: [\"maxHealth\"],\n    },\n    {\n      name: \"Groepsknuffel\",\n      animationTrack: { target: \"self\", track: \"groupHug\" },\n      damage: -30,\n      cost: 2,\n      cooldown: 4,\n      targets: [\"allFriendlies\"],\n    },\n  ],\n};\n\nconst slime: CreatureCard = {\n  id: \"slime\",\n  name: \"Slijm\",\n  level: 1,\n  xpResult: 0,\n  type: \"bag\",\n  initiative: 8,\n\n  health: 40,\n  energy: 4,\n\n  texture: genericCombatTexture,\n  animation: prepareAnimation(slimeAnimation as unknown as ImageDefinition),\n\n  actions: [\n    {\n      name: \"Klodder\",\n      animationTrack: { target: \"self\", track: \"klodder\" },\n      damage: 10,\n      cost: 0,\n      cooldown: 0,\n      targets: [\"weakness\", \"maxHealth\"],\n    },\n    {\n      name: \"Plakkerigheid\",\n      animationTrack: { target: \"self\", track: \"stun\" },\n      damage: 2,\n      damageType: \"stun\",\n      cost: 2,\n      cooldown: 4,\n      targets: [\"maxHealth\"],\n    },\n  ],\n};\n\nconst creatures = [\n  amerigo,\n  ameerigogo,\n  ozosnel,\n  ozoveelsneller,\n  robot,\n  bear,\n  slime,\n].reduce(\n  (result, creature) => ({ ...result, [creature.id]: creature }),\n  {} as Record<string, CreatureCard>\n);\n\nexport const evolutions: Record<\n  string,\n  { dialog: Dialog[]; newCard: CreatureCardId }\n> = {\n  amerigo: {\n    newCard: \"ameerigogo\",\n    dialog: [\n      {\n        characterName: \"Amerigo\",\n        characterColor: \"lightblue\",\n        text: [\"Tristan! Ik... Ik ben aan het veranderen....\"],\n      },\n      {\n        characterName: \"Tristan\",\n        characterColor: \"orange\",\n        text: [\"Ojee... gaat alles goed???\"],\n      },\n      {\n        characterName: \"Amerigo\",\n        characterColor: \"lightblue\",\n        text: [\"Ik... Ik... \"],\n      },\n      {\n        characterName: \"Ameerigogo\",\n        characterColor: \"lightblue\",\n        text: [\n          \"Evolueer!! Ik ben nu Ameerigogo!\",\n          \"Go! Go! Meer Go!\",\n          \"Ameerigogo!\",\n        ],\n      },\n    ],\n  },\n  ozosnel: {\n    newCard: \"ozoveelsneller\",\n    dialog: [\n      {\n        characterName: \"Ozosnel\",\n        characterColor: \"sandybrown\",\n        text: [\"Tristan! Ik... Ik ben aan het veranderen....\"],\n      },\n      {\n        characterName: \"Tristan\",\n        characterColor: \"orange\",\n        text: [\"Evolueer je nu al??\"],\n      },\n      {\n        characterName: \"Ozosnel\",\n        characterColor: \"sandybrown\",\n        text: [\"Ik... Ik... denk het... \"],\n      },\n      {\n        characterName: \"Ozoveelsneller\",\n        characterColor: \"sandybrown\",\n        text: [\n          \"Evolueer!! Ik ben nu Ozoveelsneller!\",\n          \"Snel snel!!\",\n          \"Ozoveelsneller!\",\n        ],\n      },\n    ],\n  },\n};\n\nexport default creatures;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { modifier } from \"../combatHelpers\";\nimport creatures from \"../data/creatures\";\nimport {\n  Action,\n  ActionSentence,\n  CombatResult,\n  Creature,\n  CreatureCard,\n  CreatureCardId,\n} from \"../types\";\nimport { RootState } from \"./store\";\n\nexport interface CombatState {\n  inCombat: boolean;\n  combatResult: CombatResult;\n  creatures: Creature[];\n  currentTurn: string | null;\n  lastActionLog: ActionSentence[];\n}\n\nconst initialState: CombatState = {\n  inCombat: false,\n  combatResult: \"won\",\n  creatures: [],\n  currentTurn: null,\n  lastActionLog: [],\n};\n\nconst createCombatCreature =\n  (party: Creature[\"party\"]) =>\n  (cardId: string, index: number): Creature => {\n    const creatureCard = creatures[cardId];\n    if (!creatureCard) {\n      throw new Error(`Creature card with id \"${cardId}\" not found`);\n    }\n\n    return {\n      card: cardId,\n      id: `${cardId}${index}`,\n      health: creatureCard.health,\n      energy: creatureCard.energy,\n      cooldowns: {},\n      party,\n      inTurn: 0,\n    };\n  };\n\nexport const combatSlice = createSlice({\n  name: \"character\",\n  initialState,\n  reducers: {\n    startFight: (state, action: PayloadAction<CreatureCardId[]>) => {\n      state.inCombat = true;\n      state.combatResult = \"inProgress\";\n      state.creatures = state.creatures\n        .filter((c) => c.party === \"left\")\n        .concat(action.payload.map(createCombatCreature(\"right\")))\n        .map((c) => ({ ...c, inTurn: 0 }));\n\n      state.currentTurn = state.creatures.sort((a, b) => {\n        const cA = creatures[a.card];\n        const cB = creatures[b.card];\n        return (\n          a.inTurn * 100 + cA.initiative - (b.inTurn * 100 + cB.initiative)\n        );\n      })[0].id;\n      state.lastActionLog = [];\n    },\n    startEncounter: (state, action: PayloadAction<CreatureCardId[]>) => {\n      state.combatResult = \"inProgress\";\n      state.creatures = ([] as Creature[]).concat(\n        action.payload.map(createCombatCreature(\"left\"))\n      );\n    },\n    endEncounter: (state) => {\n      state.inCombat = false;\n    },\n    actionTurn: (\n      state,\n      action: PayloadAction<{ action: string; target: string }>\n    ) => {\n      const currentcreature = state.creatures.find(\n        (c) => c.id === state.currentTurn\n      );\n      if (!currentcreature) return;\n\n      const team = currentcreature.party;\n      const ownCard = creatures[currentcreature.card];\n      state.lastActionLog = [];\n\n      currentcreature.inTurn += 1;\n      currentcreature.cooldowns = Object.keys(currentcreature.cooldowns).reduce(\n        (result, name) =>\n          currentcreature.cooldowns[name] > 1\n            ? {\n                ...result,\n                [name]: currentcreature.cooldowns[name] - 1,\n              }\n            : result,\n        {}\n      );\n\n      const actionDetails = ownCard.actions.find(\n        (a) => a.name === action.payload.action\n      );\n      if (actionDetails) {\n        if (actionDetails.cost > 0) {\n          currentcreature.energy -= actionDetails.cost;\n        }\n        if (actionDetails.cooldown > 0) {\n          currentcreature.cooldowns[actionDetails.name] =\n            actionDetails.cooldown;\n        }\n\n        state.creatures\n          .filter((creature) => {\n            const isEnemy = creature.party !== team;\n\n            return (\n              action.payload.target === creature.id ||\n              (actionDetails.targets.includes(\"allEnemies\") &&\n                isEnemy &&\n                creature.health > 0 &&\n                action.payload.target === \"all\") ||\n              (actionDetails.targets.includes(\"allFriendlies\") &&\n                !isEnemy &&\n                creature.health > 0 &&\n                action.payload.target === \"all\")\n            );\n          })\n          .forEach((creature) => {\n            if (!state.currentTurn) return;\n            const card = creatures[creature.card];\n\n            if (actionDetails.damage < 0) {\n              const healing = Math.min(\n                card.health - creature.health,\n                actionDetails.damage * -1\n              );\n\n              if (healing > 0) {\n                state.lastActionLog.push({\n                  source: currentcreature,\n                  action: \"heals\",\n                  target: creature,\n                  with: actionDetails.name,\n                  points: healing,\n                  unit: \"points\",\n                });\n                // healing\n                creature.health += healing;\n              }\n            }\n\n            if (\n              actionDetails.damage > 0 &&\n              actionDetails.damageType === undefined\n            ) {\n              const damage = Math.round(\n                modifier(ownCard.type, card.type) * actionDetails.damage\n              );\n\n              if (state.currentTurn && damage > 0) {\n                state.lastActionLog.push({\n                  source: currentcreature,\n                  action: \"hurts\",\n                  with: actionDetails.name,\n                  target: creature,\n                  points: damage,\n                  unit: \"points\",\n                });\n                // dealing damage\n                creature.health -= damage;\n              }\n            }\n\n            if (\n              actionDetails.damage > 0 &&\n              actionDetails.damageType === \"stun\"\n            ) {\n              if (state.currentTurn) {\n                state.lastActionLog.push({\n                  source: currentcreature,\n                  action: \"stuns\",\n                  with: actionDetails.name,\n                  target: creature,\n                  points: actionDetails.damage,\n                  unit: \"turns\",\n                });\n                // dealing damage\n                creature.cooldowns = {\n                  ...creature.cooldowns,\n                  stunned: actionDetails.damage,\n                };\n              }\n            }\n          });\n      }\n\n      // Need a next turn?\n\n      const leftAlive = !state.creatures.some(\n        (c) => c.party === \"left\" && c.health <= 0\n      );\n      const rightAlive = state.creatures.some(\n        (c) => c.party === \"right\" && c.health > 0\n      );\n\n      if (leftAlive && rightAlive) {\n        state.currentTurn = state.creatures\n          .filter((a) => a.health > 0)\n          .sort((a, b) => {\n            const cA = creatures[a.card];\n            const cB = creatures[b.card];\n            return (\n              a.inTurn * 100 + cA.initiative - (b.inTurn * 100 + cB.initiative)\n            );\n          })[0].id;\n      } else {\n        state.currentTurn = null;\n        state.combatResult = leftAlive && !rightAlive ? \"won\" : \"lost\";\n      }\n    },\n  },\n});\n\nexport const { startFight, startEncounter, actionTurn, endEncounter } =\n  combatSlice.actions;\n\nexport const selectInCombat = (state: RootState) => state.combat.inCombat;\nexport const selectFightWon = (state: RootState) =>\n  state.combat.combatResult === \"won\";\n\nexport type CombatCreature = Omit<Creature, \"card\"> & {\n  card: CreatureCard;\n};\n\nexport type CombatStatus = {\n  outcome: CombatResult;\n  partyA: CombatCreature[];\n  partyB: CombatCreature[];\n  turn?: {\n    creature: CombatCreature;\n    isStunned: boolean;\n    actions: (Action & { disabled: boolean; inCooldown: number })[];\n  };\n};\n\nexport const selectCombatLog = (state: RootState) => state.combat.lastActionLog;\n\nexport const selectLevelingUp = (state: RootState) =>\n  state.character.cards.find(\n    (card) =>\n      state.character.xp[card] >= creatures[card].xpResult &&\n      creatures[card].xpResult > 0\n  );\n\nexport const selectCombatStatus = (state: RootState): CombatStatus => {\n  const currentCreature = state.combat.creatures.find(\n    (c) => c.id === state.combat.currentTurn\n  );\n\n  const currentCard = currentCreature ? creatures[currentCreature.card] : null;\n  const actions = currentCard\n    ? currentCard.actions.map((a) => ({\n        ...a,\n        disabled:\n          (currentCreature?.energy || 0) < a.cost ||\n          !!currentCreature?.cooldowns[a.name],\n        inCooldown: currentCreature?.cooldowns[a.name] ?? 0,\n      }))\n    : [];\n  return {\n    outcome: state.combat.combatResult,\n    partyA: state.combat.creatures\n      .filter((c) => c.party === \"left\")\n      .map<CombatCreature>((c) => ({\n        ...c,\n        card: creatures[c.card],\n      })),\n    partyB: state.combat.creatures\n      .filter((c) => c.party === \"right\")\n      .map<CombatCreature>((c) => ({\n        ...c,\n        card: creatures[c.card],\n      })),\n    turn:\n      currentCard && currentCreature\n        ? {\n            creature: { ...currentCreature, card: currentCard },\n            isStunned: !!(\n              currentCreature.cooldowns[\"stunned\"] &&\n              currentCreature.cooldowns[\"stunned\"] > 0\n            ),\n            actions,\n          }\n        : undefined,\n  };\n};\n\nexport default combatSlice.reducer;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"./store\";\n\nexport interface EncounterState {\n  encounterCharacter: number;\n  fightsFinished: number;\n  result: \"inProgress\" | \"won\" | \"lost\";\n  encountersCompleted: number[];\n}\n\nconst initialState: EncounterState = {\n  encounterCharacter: -1,\n  fightsFinished: 0,\n  result: \"inProgress\",\n  encountersCompleted: [],\n};\n\nexport const encounterSlice = createSlice({\n  name: \"encounter\",\n  initialState,\n  reducers: {\n    encounter: (state, action: PayloadAction<number>) => {\n      state.encounterCharacter = action.payload;\n      state.fightsFinished = 0;\n      state.result = \"inProgress\";\n    },\n    closeEncounter: (state, action: PayloadAction<boolean>) => {\n      state.fightsFinished = 0;\n      state.result = \"inProgress\";\n      if (action.payload) {\n        state.encountersCompleted.push(state.encounterCharacter);\n      }\n      state.encounterCharacter = -1;\n    },\n    loseEncounter: (state) => {\n      state.result = \"lost\";\n    },\n    completeFight: (state) => {\n      state.fightsFinished += 1;\n    },\n    winEncounter: (state) => {\n      state.result = \"won\";\n    },\n  },\n});\n\nexport const {\n  encounter,\n  closeEncounter,\n  winEncounter,\n  loseEncounter,\n  completeFight,\n} = encounterSlice.actions;\n\nexport const selectActiveEncounter = (state: RootState) => state.encounter;\n\nexport default encounterSlice.reducer;\n","import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport type { RootState, AppDispatch } from \"./store\";\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import creatures from \"../data/creatures\";\nimport { ActionSentence, ActionType } from \"../types\";\n\nconst creatureName = (cardId: string) => creatures[cardId].name;\n\ntype Props = {\n  sentence: ActionSentence;\n};\n\ntype ActionMap = {\n  [Key in ActionType]: string;\n};\n\nconst actionMap: ActionMap = {\n  hurts: \"raakt\",\n  heals: \"geneest\",\n  stuns: \"verdoofd\",\n};\n\nconst unitMap: Record<\"turns\" | \"points\", string> = {\n  turns: \"beurten\",\n  points: \"punten\",\n};\n\nconst CombatLogSentence: React.FunctionComponent<Props> = ({ sentence }) => (\n  <p>\n    <strong>{creatureName(sentence.source.card)}</strong>{\" \"}\n    {actionMap[sentence.action]}{\" \"}\n    <strong>\n      {sentence.source === sentence.target\n        ? \"zichzelf\"\n        : creatureName(sentence.target.card)}\n    </strong>{\" \"}\n    met <span style={{ textTransform: \"lowercase\" }}>{sentence.with}</span> voor{\" \"}\n    {sentence.points} {unitMap[sentence.unit]}\n  </p>\n);\n\nexport default CombatLogSentence;\n","import React, { useRef, useEffect } from \"react\";\nimport styles from \"./CombatView.module.css\";\nimport {\n  AnimationControls,\n  GeppettoPlayer,\n  ImageDefinition,\n  prepareAnimation,\n  setupWebGL,\n} from \"geppetto-player\";\nimport { useAppSelector } from \"../state/hooks\";\nimport {\n  CombatCreature,\n  CombatStatus,\n  selectCombatLog,\n  selectCombatStatus,\n} from \"../state/combatSlice\";\nimport { MutableRefObject } from \"hoist-non-react-statics/node_modules/@types/react\";\nimport { ActionSentence, ActionType } from \"../types\";\nimport creatures, { genericCombatTexture } from \"../data/creatures\";\nimport backgroundAnimation from \"../data/geppetto/background.json\";\n\ntype AnimationAdministration = Record<\n  string,\n  {\n    controls: AnimationControls;\n    stateTrack: string;\n    current: string;\n  }\n>;\nconst background = prepareAnimation(\n  backgroundAnimation as unknown as ImageDefinition\n);\n\nconst synchronizeAnimations = (\n  combatStatus: CombatStatus,\n  animationsRef: MutableRefObject<AnimationAdministration>,\n  player: GeppettoPlayer\n) => {\n  const checkSetup = async (creature: CombatCreature, index: number) => {\n    if (creature.health <= 0) return;\n    if (!animationsRef.current[creature.id]) {\n      const img = await creature.card.texture;\n\n      const animation = player.addAnimation(creature.card.animation, img, 0, {\n        panX:\n          creature.party === \"left\" ? -0.4 + index * -0.1 : 0.3 + index * 0.15,\n        panY: 0.2 + index * -0.2,\n        zoom: 1.5,\n        zIndex: 2 + index,\n      });\n      animation.startTrack(\"idle\");\n      animationsRef.current[creature.id] = {\n        controls: animation,\n        stateTrack: \"idle\",\n        current: \"idle\",\n      };\n      animation.onTrackStopped((track) => {\n        if (\n          track !== \"idle\" &&\n          track !== \"stunned\" &&\n          track !== \"dead\" &&\n          animationsRef.current[creature.id]\n        ) {\n          const stateTrack = animationsRef.current[creature.id].stateTrack;\n          animationsRef.current[creature.id].current = stateTrack;\n          animation.startTrack(stateTrack);\n        }\n        if (track === \"dead\") {\n          animation.destroy();\n          delete animationsRef.current[creature.id];\n        }\n      });\n    } else {\n      if (creature.cooldowns[\"stunned\"]) {\n        animationsRef.current[creature.id].stateTrack = \"stunned\";\n      } else {\n        animationsRef.current[creature.id].stateTrack = \"idle\";\n      }\n    }\n  };\n  combatStatus.partyA.forEach(checkSetup);\n  combatStatus.partyB.forEach(checkSetup);\n};\n\nconst trackMapping: Record<ActionType, string> = {\n  heals: \"healing\",\n  hurts: \"hurt\",\n  stuns: \"stunned\",\n};\n\nconst getAnimationStates = (log: ActionSentence[]): Record<string, string> => {\n  const states: Record<string, string> = {};\n  log.forEach((entry) => {\n    const sourceCard = creatures[entry.source.card];\n    const sourceAction = sourceCard.actions.find((a) => a.name === entry.with);\n    if (sourceAction && sourceAction.animationTrack) {\n      if (sourceAction.animationTrack.target === \"self\") {\n        states[entry.source.id] = sourceAction.animationTrack.track;\n      }\n      if (sourceAction.animationTrack.target === \"environment\") {\n        states[\"background\"] = sourceAction.animationTrack.track;\n      }\n    }\n\n    states[entry.target.id] =\n      states[entry.target.id] || trackMapping[entry.action];\n\n    if (entry.target.health <= 0) {\n      states[entry.target.id] = \"dead\";\n    }\n  });\n\n  return states;\n};\n\nconst CombatView: React.FunctionComponent = () => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const playerRef = useRef<GeppettoPlayer | null>(null);\n  const animationsRef = useRef<AnimationAdministration>({});\n\n  useEffect(() => {\n    const resizeHandler = () => {\n      if (!canvasRef.current) return;\n\n      const { width, height } = canvasRef.current?.getBoundingClientRect();\n      canvasRef.current.width = width * devicePixelRatio;\n      canvasRef.current.height = height * devicePixelRatio;\n    };\n\n    resizeHandler();\n\n    if (canvasRef.current) {\n      const player = setupWebGL(canvasRef.current);\n      playerRef.current = player;\n\n      const setupBackground = async () => {\n        const img = await genericCombatTexture;\n\n        const controls = player.addAnimation(background, img, 0, {\n          panX: 0,\n          zoom: 4.5,\n        });\n        animationsRef.current[\"background\"] = {\n          controls,\n          stateTrack: \"\",\n          current: \"\",\n        };\n      };\n      setupBackground();\n\n      const render = () => {\n        if (playerRef.current === null) return;\n\n        playerRef.current.render();\n\n        animationsRef.current[\"background\"] &&\n          animationsRef.current[\"background\"].controls.render();\n\n        Object.entries(animationsRef.current).forEach(([key, creature]) => {\n          if (key !== \"background\") creature.controls.render();\n        });\n\n        window.requestAnimationFrame(render);\n      };\n\n      window.requestAnimationFrame(render);\n    }\n\n    window.addEventListener(\"resize\", resizeHandler);\n    return () => {\n      window.removeEventListener(\"resize\", resizeHandler);\n\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      const animations = animationsRef.current;\n      const player = playerRef.current;\n      playerRef.current = null;\n\n      player?.destroy();\n      Object.values(animations).forEach((creature) => {\n        creature.controls.destroy();\n      });\n    };\n  }, []);\n\n  const combatStatus = useAppSelector(selectCombatStatus);\n  const combatLog = useAppSelector(selectCombatLog);\n\n  useEffect(() => {\n    if (!playerRef.current) return;\n    synchronizeAnimations(combatStatus, animationsRef, playerRef.current);\n    const animationStates = getAnimationStates(combatLog);\n\n    Object.entries(animationStates).forEach(([animationId, track]) => {\n      if (\n        animationsRef.current[animationId] &&\n        animationsRef.current[animationId].current !== track\n      ) {\n        animationsRef.current[animationId].current = track;\n        animationsRef.current[animationId].controls.startTrack(track);\n      }\n    });\n  }, [combatStatus, combatLog]);\n\n  return <canvas className={styles.arena} ref={canvasRef} />;\n};\n\nexport default CombatView;\n","import React from \"react\";\nimport { CreatureType } from \"../types\";\nimport rodImage from \"../data/geppetto/roe.png\";\nimport shoeImage from \"../data/geppetto/schoen.png\";\nimport bagImage from \"../data/geppetto/zak.png\";\n\ntype Props = {\n  symbol: CreatureType;\n};\n\nconst imageMapping: Record<CreatureType, string> = {\n  bag: bagImage,\n  shoe: shoeImage,\n  rod: rodImage,\n};\n\nconst Icon: React.FunctionComponent<Props> = ({ symbol }) => (\n  <img\n    width={24}\n    height={24}\n    src={imageMapping[symbol]}\n    alt={symbol}\n    style={{ verticalAlign: \"sub\" }}\n  />\n);\n\nexport default Icon;\n","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import React from \"react\";\nimport { CombatCreature } from \"../state/combatSlice\";\nimport Icon from \"./Icon\";\nimport styles from \"./MemberStats.module.css\";\n\ntype MemberProps = {\n  member: CombatCreature;\n  inTurn: boolean;\n};\n\nconst MemberStats: React.FunctionComponent<MemberProps> = ({\n  member,\n  inTurn,\n}) => {\n  const stunned =\n    member.cooldowns[\"stunned\"] && member.cooldowns[\"stunned\"] > 0;\n  return (\n    <div\n      style={{\n        opacity: member.health > 0 ? 1 : 0.5,\n        background: inTurn ? \"#222\" : \"#000\",\n        padding: \"0.5em\",\n      }}\n    >\n      <p style={{ color: member.party === \"left\" ? \"lightgreen\" : \"white\" }}>\n        <strong>\n          <Icon symbol={member.card.type} /> {member.card.name}\n          {stunned && \"\"}\n          {inTurn ? \" \" : \"\"}\n        </strong>\n      </p>\n      <p className={styles.memberProps}>\n        <span>\n          HP: {Math.max(member.health, 0)} / {member.card.health}\n        </span>\n        <progress value={member.health / member.card.health} />\n      </p>\n      {member.card.energy > 0 && (\n        <p className={styles.memberProps}>\n          <span>\n            E: {member.energy} / {member.card.energy}\n          </span>\n          <progress\n            className={styles.energyBar}\n            value={member.energy / member.card.energy}\n          />\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default MemberStats;\n","export default __webpack_public_path__ + \"static/media/systeem.1f6c1aca.png\";","export default __webpack_public_path__ + \"static/media/logo.692cd592.png\";","import React, { useState, useEffect } from \"react\";\nimport className from \"../className\";\nimport { enemyActionSelection } from \"../combat\";\nimport {\n  actionTurn,\n  endEncounter,\n  selectCombatLog,\n  selectCombatStatus,\n} from \"../state/combatSlice\";\nimport {\n  completeFight,\n  loseEncounter,\n  selectActiveEncounter,\n  winEncounter,\n} from \"../state/encounterSlice\";\nimport { useAppDispatch, useAppSelector } from \"../state/hooks\";\nimport { ActionTarget, CreatureCard, LevelCharacter } from \"../types\";\nimport styles from \"./CombatArena.module.css\";\nimport CombatLogSentence from \"./CombatLogSentence\";\nimport CombatView from \"./CombatView\";\nimport MemberStats from \"./MemberStats\";\nimport systeemImage from \"../data/geppetto/systeem.png\";\nimport logo from \"./logo.png\";\nimport Icon from \"./Icon\";\n\nconst DELAY_FOR_CPU_OPPONENT = 3000;\n\nconst actionRequiresTarget =\n  (type: ActionTarget) =>\n  (card: CreatureCard, actionSelection: string): boolean =>\n    card.actions.some(\n      (a) => a.name === actionSelection && a.targets.includes(type)\n    );\n\nconst actionRequiresEnemyTarget = actionRequiresTarget(\"enemy\");\nconst actionRequiresFriendlyTarget = actionRequiresTarget(\"friendly\");\n\ntype Props = {\n  character: LevelCharacter;\n};\n\nconst CombatArena: React.FunctionComponent<Props> = ({ character }) => {\n  const combatStatus = useAppSelector(selectCombatStatus);\n  const combatLog = useAppSelector(selectCombatLog);\n  const encounter = useAppSelector(selectActiveEncounter);\n  const dispatch = useAppDispatch();\n\n  const [actionSelection, setActionSelection] = useState<string | null>(null);\n  const [targetSelection, setTargetSelection] = useState<string | null>(null);\n  const [actionFocus, setActionFocus] = useState(0);\n\n  const characterOrder = combatStatus.partyA\n    .concat(combatStatus.partyB)\n    .sort((a, b) => a.card.initiative - b.card.initiative);\n\n  useEffect(() => {\n    if (combatStatus.outcome === \"lost\") {\n      const timeoutId = setTimeout(() => {\n        dispatch(loseEncounter());\n      }, 3000);\n      return () => clearTimeout(timeoutId);\n    }\n    if (combatStatus.outcome === \"won\") {\n      dispatch(completeFight());\n    }\n  }, [combatStatus.outcome, dispatch]);\n\n  useEffect(() => {\n    if (combatStatus.outcome !== \"inProgress\") {\n      const nextFightDetails = character.fights[encounter.fightsFinished];\n\n      if (!nextFightDetails && combatStatus.outcome === \"won\") {\n        const timeoutId = setTimeout(() => {\n          dispatch(endEncounter());\n          dispatch(winEncounter());\n        }, 3000);\n        return () => clearTimeout(timeoutId);\n      }\n    }\n  }, [\n    combatStatus.outcome,\n    encounter.fightsFinished,\n    character.fights,\n    dispatch,\n  ]);\n\n  useEffect(() => {\n    setActionSelection(null);\n    setTargetSelection(null);\n  }, [combatStatus.turn]);\n\n  useEffect(() => {\n    if (combatStatus.turn && combatStatus.turn.creature.party === \"right\") {\n      const actionData = enemyActionSelection(combatStatus);\n\n      const timeoutId = setTimeout(() => {\n        dispatch(actionTurn(actionData));\n        setActionSelection(null);\n        setTargetSelection(null);\n      }, DELAY_FOR_CPU_OPPONENT);\n      return () => clearTimeout(timeoutId);\n    }\n  }, [combatStatus, dispatch]);\n\n  useEffect(() => {\n    if (combatStatus.turn?.isStunned) {\n      const timeoutId = setTimeout(() => {\n        dispatch(actionTurn({ action: \"wait\", target: \"\" }));\n        setActionSelection(null);\n        setTargetSelection(null);\n      }, 2000);\n      return () => clearTimeout(timeoutId);\n    }\n    if (actionSelection && targetSelection) {\n      dispatch(\n        actionTurn({ action: actionSelection, target: targetSelection })\n      );\n      setActionSelection(null);\n      setTargetSelection(null);\n      return;\n    }\n    if (\n      actionSelection &&\n      !targetSelection &&\n      combatStatus.turn &&\n      !actionRequiresEnemyTarget(\n        combatStatus.turn.creature.card,\n        actionSelection\n      ) &&\n      !actionRequiresFriendlyTarget(\n        combatStatus.turn.creature.card,\n        actionSelection\n      )\n    ) {\n      const action = combatStatus.turn.actions.find(\n        (f) => f.name === actionSelection\n      );\n      if (!action) return;\n      const targetName = action.targets.reduce<string | null>(\n        (r, target) => {\n          if (r) return r;\n          if (target === \"self\") {\n            return combatStatus.turn?.creature.id ?? null;\n          }\n          return \"all\";\n        },\n\n        null\n      );\n      if (targetName) {\n        dispatch(actionTurn({ action: actionSelection, target: targetName }));\n        return;\n      }\n    }\n  }, [actionSelection, targetSelection, dispatch, combatStatus.turn]);\n\n  useEffect(() => {\n    if (\n      combatStatus.turn &&\n      combatStatus.turn.creature.party === \"left\" &&\n      actionSelection === null\n    ) {\n      const actionIndices = combatStatus.turn.actions.reduce(\n        (result, action, index) =>\n          action.disabled ? result : result.concat(index),\n        [] as number[]\n      );\n\n      const keyHandling = (ev: KeyboardEvent) => {\n        if (ev.code === \"ArrowDown\") {\n          setActionFocus(\n            (state) =>\n              actionIndices[\n                (actionIndices.indexOf(state) + 1) % actionIndices.length\n              ]\n          );\n        }\n        if (ev.code === \"ArrowUp\") {\n          setActionFocus(\n            (state) =>\n              actionIndices[\n                (actionIndices.length + actionIndices.indexOf(state) - 1) %\n                  actionIndices.length\n              ]\n          );\n        }\n        if ((ev.code === \"Space\" || ev.code === \"Enter\") && combatStatus.turn) {\n          setActionSelection(combatStatus.turn.actions[actionFocus].name);\n          setActionFocus(0);\n        }\n      };\n      window.addEventListener(\"keydown\", keyHandling);\n      return () => {\n        window.removeEventListener(\"keydown\", keyHandling);\n      };\n    }\n\n    if (\n      combatStatus.turn &&\n      combatStatus.turn.creature.party === \"left\" &&\n      actionSelection &&\n      targetSelection === null\n    ) {\n      const party = (\n        actionRequiresEnemyTarget(\n          combatStatus.turn.creature.card,\n          actionSelection\n        )\n          ? combatStatus.partyB\n          : actionRequiresFriendlyTarget(\n              combatStatus.turn.creature.card,\n              actionSelection\n            )\n          ? combatStatus.partyA\n          : []\n      ).filter((a) => a.health > 0);\n\n      const keyHandling = (ev: KeyboardEvent) => {\n        if (ev.code === \"ArrowDown\") {\n          setActionFocus((state) => (state + 1) % party.length);\n        }\n        if (ev.code === \"ArrowUp\") {\n          setActionFocus((state) => (party.length + state - 1) % party.length);\n        }\n        if ((ev.code === \"Space\" || ev.code === \"Enter\") && combatStatus.turn) {\n          setTargetSelection(party[actionFocus].id);\n          setActionFocus(0);\n        }\n      };\n      window.addEventListener(\"keydown\", keyHandling);\n      return () => {\n        window.removeEventListener(\"keydown\", keyHandling);\n      };\n    }\n  }, [\n    actionSelection,\n    combatStatus.turn,\n    combatStatus.partyB,\n    combatStatus.partyA,\n    setActionFocus,\n    actionFocus,\n    setTargetSelection,\n    targetSelection,\n  ]);\n\n  return (\n    <div className={styles.fightScreen}>\n      <img\n        src={systeemImage}\n        width={100}\n        height={100}\n        alt={\"Schoen -> Zak -> Roe\"}\n        style={{ position: \"absolute\", top: \"10px\", left: \"10px\" }}\n      />\n      <img\n        src={logo}\n        height={100}\n        alt={\"Tristmon\"}\n        style={{ position: \"absolute\", top: \"10px\", right: \"10px\" }}\n      />\n      <div className={styles.log}>\n        {combatLog.map((sentence, index) => (\n          <CombatLogSentence sentence={sentence} key={index} />\n        ))}\n        {combatStatus.turn && (\n          <p>\n            <strong>{combatStatus.turn.creature.card.name}</strong> is aan de\n            beurt!\n          </p>\n        )}\n      </div>\n      <CombatView />\n\n      <div className={styles.partyStats}>\n        <div className={styles.partyBox}>\n          {characterOrder.map((member) => (\n            <MemberStats\n              member={member}\n              key={member.id}\n              inTurn={\n                !!(\n                  combatStatus.turn &&\n                  combatStatus.turn.creature.id === member.id\n                )\n              }\n            />\n          ))}\n        </div>\n      </div>\n\n      {combatStatus.turn &&\n        combatStatus.turn.creature.party === \"left\" &&\n        !combatStatus.turn.isStunned &&\n        actionSelection === null && (\n          <div className={styles.actionsMenu}>\n            <h2>\n              Kies je actie, {combatStatus.turn.creature.card.name}{\" \"}\n              <Icon symbol={combatStatus.turn.creature.card.type} />:\n            </h2>\n            <ul>\n              {combatStatus.turn.actions.map((action, index) => (\n                <li\n                  key={action.name}\n                  className={className({\n                    [styles.focusAction]: index === actionFocus,\n                    [styles.disabledAction]: action.disabled,\n                  })}\n                >\n                  <p>\n                    <strong>{action.name}</strong>\n                  </p>\n                  {action.inCooldown > 0 && (\n                    <span>(Afkoelen: {action.inCooldown} beurten)</span>\n                  )}\n                  <p>\n                    {action.damage > 0 && action.damageType === undefined\n                      ? action.targets.includes(\"allEnemies\")\n                        ? `Schade iedereen: ${action.damage}. `\n                        : `Schade: ${action.damage}. `\n                      : \"\"}\n                    {action.damage > 0 && action.damageType === \"stun\"\n                      ? action.targets.includes(\"allEnemies\")\n                        ? `Verdoof iedereen: ${action.damage} beurten. `\n                        : `Verdoof: ${action.damage} beurten. `\n                      : \"\"}\n                    {action.damage < 0\n                      ? action.targets.includes(\"allFriendlies\")\n                        ? `Genees iedereen: ${action.damage * -1} HP. `\n                        : `Genezing: ${action.damage * -1} HP. `\n                      : \"\"}\n                    {action.cooldown > 0\n                      ? `Afkoeling: ${action.cooldown} beurten. `\n                      : \"\"}\n                    {action.cost > 0 ? `Kosten: ${action.cost} energie.` : \"\"}\n                  </p>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n      {combatStatus.turn &&\n        combatStatus.turn.creature.party === \"left\" &&\n        actionSelection &&\n        actionRequiresEnemyTarget(\n          combatStatus.turn.creature.card,\n          actionSelection\n        ) &&\n        targetSelection === null && (\n          <div className={styles.actionsMenu}>\n            <h2>\n              Kies je \"{actionSelection}\" doelwit,\n              {combatStatus.turn.creature.card.name}{\" \"}\n              <Icon symbol={combatStatus.turn.creature.card.type} />:\n            </h2>\n            <ul>\n              {combatStatus.partyB\n                .filter((a) => a.health > 0)\n                .map((target, index) => (\n                  <li\n                    key={target.id}\n                    className={className({\n                      [styles.focusAction]: index === actionFocus,\n                    })}\n                  >\n                    <p>\n                      <strong>\n                        <Icon symbol={target.card.type} /> {target.card.name}\n                      </strong>\n                    </p>\n                    <p>\n                      HP: {target.health} / {target.card.health}\n                    </p>\n                  </li>\n                ))}\n            </ul>\n          </div>\n        )}\n      {combatStatus.turn &&\n        combatStatus.turn.creature.party === \"left\" &&\n        actionSelection &&\n        actionRequiresFriendlyTarget(\n          combatStatus.turn.creature.card,\n          actionSelection\n        ) &&\n        targetSelection === null && (\n          <div className={styles.actionsMenu}>\n            <h2>\n              Kies je \"{actionSelection}\" doelwit,\n              {combatStatus.turn.creature.card.name}{\" \"}\n              <Icon symbol={combatStatus.turn.creature.card.type} />:\n            </h2>\n            <ul>\n              {combatStatus.partyA\n                .filter((a) => a.health > 0)\n                .map((target, index) => (\n                  <li\n                    key={target.id}\n                    className={className({\n                      [styles.focusAction]: index === actionFocus,\n                    })}\n                  >\n                    <p>\n                      <strong>{target.card.name}</strong>\n                    </p>\n                    <p>\n                      HP: {target.health} / {target.card.health}\n                    </p>\n                  </li>\n                ))}\n            </ul>\n          </div>\n        )}\n    </div>\n  );\n};\n\nexport default CombatArena;\n","import React, { useEffect } from \"react\";\nimport styles from \"./Dialog.module.css\";\n\ntype Props = {\n  color: string;\n  name: string;\n  onClick: () => void;\n};\n\nconst Dialog: React.FunctionComponent<Props> = ({\n  color,\n  name,\n  onClick,\n  children,\n}) => {\n  useEffect(() => {\n    const keyListener = (event: KeyboardEvent) => {\n      if (event.code === \"Enter\" || event.code === \"Space\") {\n        onClick();\n      }\n    };\n    window.addEventListener(\"keydown\", keyListener);\n\n    return () => {\n      window.removeEventListener(\"keydown\", keyListener);\n    };\n  }, [onClick]);\n  return (\n    <div className={styles.dialogBox} onClick={onClick}>\n      <h3 style={{ color }}>{name}</h3>\n      <p>{children}</p>\n    </div>\n  );\n};\n\nexport default Dialog;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"./store\";\nimport { CharacterSprites, CreatureCardId, Position } from \"../types\";\n\nexport interface CharacterState {\n  x: number;\n  y: number;\n  z: number;\n  level: string;\n  positionHistory: Position[];\n  followers: CharacterSprites[];\n  cards: CreatureCardId[];\n  xp: Record<CreatureCardId, number>;\n}\n\nconst initialState: CharacterState = {\n  // level: \"Feest\",\n  // x: 10,\n  // y: -6,\n  // z: 1,\n  level: \"Slaapkamer\",\n  x: 3,\n  y: 1,\n  z: 2,\n  positionHistory: [],\n  followers: [],\n  cards: [],\n  xp: {},\n};\n\nexport const characterSlice = createSlice({\n  name: \"character\",\n  initialState,\n  reducers: {\n    move: (state, action: PayloadAction<Position>) => {\n      if (\n        action.payload[0] === state.x &&\n        action.payload[1] === state.y &&\n        action.payload[2] === state.z\n      )\n        return;\n      state.positionHistory.unshift([state.x, state.y, state.z]);\n      state.positionHistory = state.positionHistory.slice(0, 6);\n\n      state.x = action.payload[0];\n      state.y = action.payload[1];\n      state.z = action.payload[2];\n    },\n    getCard: (state, action: PayloadAction<string>) => {\n      state.cards.push(action.payload);\n    },\n    removeCard: (state, action: PayloadAction<string>) => {\n      state.cards = state.cards.filter((c) => c !== action.payload);\n    },\n    addFollower: (state, action: PayloadAction<CharacterSprites>) => {\n      state.followers.unshift(action.payload);\n    },\n    giveXP: (state, action: PayloadAction<number>) => {\n      state.cards.forEach((card) => {\n        state.xp[card] = state.xp[card] || 0;\n        state.xp[card] += action.payload;\n      });\n    },\n    enterLevel: (\n      state,\n      action: PayloadAction<{ level: string; position: Position }>\n    ) => {\n      state.level = action.payload.level;\n      const [x, y, z] = action.payload.position;\n      state.x = x;\n      state.y = y;\n      state.z = z;\n      state.positionHistory = [];\n    },\n  },\n});\n\nexport const { move, getCard, removeCard, enterLevel, addFollower, giveXP } =\n  characterSlice.actions;\n\nexport const selectPosition = (state: RootState): Position => [\n  state.character.x,\n  state.character.y,\n  state.character.z,\n];\n\nexport const selectZone = (state: RootState): string => state.character.level;\n\nexport const selectCardIds = (state: RootState): CreatureCardId[] =>\n  state.character.cards;\n\nexport const selectFollowers = (\n  state: RootState\n): { pos: Position; index: CharacterSprites }[] =>\n  state.character.followers.map((id, index) => ({\n    index: id,\n    pos: state.character.positionHistory[index] || [\n      state.character.x,\n      state.character.y,\n      state.character.z,\n    ],\n  }));\n\nexport default characterSlice.reducer;\n","import React from \"react\";\nimport { Position } from \"../types\";\nimport styles from \"./Character.module.css\";\n\ntype Props = {\n  position: Position;\n  index?: number;\n  size?: \"normal\" | \"small\";\n};\n\nexport const calculateXy = (position: Position): { x: number; y: number } => ({\n  x: 64 * position[0] + 64 * position[1] + 200,\n  y: 32 * position[0] - 32 * position[1] - 78 * position[2] + 200,\n});\n\nconst calculatePosition = (\n  position: Position,\n  size: \"normal\" | \"small\"\n): React.CSSProperties => {\n  const { x, y } = calculateXy(position);\n  return {\n    transform: `translate(${x}px, ${y}px) ${\n      size === \"small\" ? \"scale(0.75)\" : \"\"\n    }`,\n    zIndex: `${100 + position[0] - position[1] + 10 * position[2]}`,\n  };\n};\n\nconst Character: React.FunctionComponent<Props> = ({\n  position,\n  index = 0,\n  size = \"normal\",\n}) => (\n  <div\n    className={styles.character}\n    style={{\n      ...calculatePosition(position, size),\n      backgroundPosition: `-${index * 128}px 0px`,\n    }}\n  />\n);\n\nexport default Character;\n","import { Direction, TerrainTile } from \"../types\";\n\nconst tileMapping: Record<TerrainTile[\"set\"], string> = {\n  terrain: \"kenney_platformerkit\",\n  furniture: \"kenney_furniturekit\",\n  fantasy: \"kenney_fantasytownkit\",\n  holiday: \"kenney_holidaykit\",\n};\n\nconst directionMapping: Record<\n  TerrainTile[\"set\"],\n  Record<Direction, string>\n> = {\n  terrain: {\n    north: \"NE\",\n    east: \"SE\",\n    south: \"SW\",\n    west: \"NW\",\n  },\n  holiday: {\n    north: \"NE\",\n    east: \"SE\",\n    south: \"SW\",\n    west: \"NW\",\n  },\n  furniture: {\n    north: \"NE\",\n    east: \"SE\",\n    south: \"SW\",\n    west: \"NW\",\n  },\n  fantasy: {\n    north: \"N\",\n    east: \"E\",\n    south: \"S\",\n    west: \"W\",\n  },\n};\nconst remapDirection: Record<string, Record<Direction, Direction>> = {\n  stairs: {\n    east: \"west\",\n    north: \"west\",\n    west: \"south\",\n    south: \"east\",\n  },\n};\n\nexport const getTileSrc = (tile: TerrainTile): string => {\n  const direction = remapDirection[tile.img]\n    ? remapDirection[tile.img][tile.direction ?? \"north\"]\n    : tile.direction ?? \"north\";\n  return `/images/${tileMapping[tile.set]}/Isometric/${tile.img}_${\n    directionMapping[tile.set][direction]\n  }.png`;\n};\n","import React from \"react\";\nimport { Position, TerrainTile, TileSize } from \"../types\";\nimport styles from \"./Tile.module.css\";\nimport { getTileSrc } from \"./tileHelpers\";\n\nconst sizeMapping: Record<TileSize, { x: number; y: number }> = {\n  wide: { x: 0, y: 0 },\n  normal: { x: 0, y: 0 },\n  large: { x: 64, y: 0 },\n  small: { x: -16, y: 0 },\n};\n\ntype TileData = {\n  width: number;\n  height: number;\n  offsetX: number;\n  offsetY: number;\n  offsetZ?: number;\n};\n\ntype TileDirectionData = Record<string, TileData>;\n\nconst furnitureLookup: Record<string, TileDirectionData> = {\n  floorFull: {\n    north: {\n      width: 128,\n      height: 67,\n      offsetX: 193,\n      offsetY: 204,\n    },\n  },\n  wall: {\n    north: {\n      width: 68,\n      height: 94,\n      offsetX: 254,\n      offsetY: 254,\n    },\n    west: {\n      width: 68,\n      height: 94,\n      offsetX: 194,\n      offsetY: 254,\n    },\n  },\n  bedSingle: {\n    east: {\n      width: 135,\n      height: 82,\n      offsetX: 206,\n      offsetY: 270,\n    },\n  },\n  desk: {\n    east: {\n      width: 112,\n      height: 85,\n      offsetX: 196,\n      offsetY: 250,\n    },\n  },\n  wallDoorway: {\n    west: {\n      width: 128,\n      height: 158,\n      offsetX: 154,\n      offsetY: 124,\n      offsetZ: 11,\n    },\n  },\n  stairs: {\n    east: {\n      width: 190,\n      height: 178,\n      offsetX: 195,\n      offsetY: 204,\n      offsetZ: 1,\n    },\n  },\n  loungeDesignSofa: {\n    north: {\n      width: 150,\n      height: 110,\n      offsetX: 195,\n      offsetY: 224,\n    },\n  },\n  doorwayOpen: {\n    west: {\n      width: 68,\n      height: 130,\n      offsetX: 194,\n      offsetY: 220,\n      offsetZ: 1,\n    },\n  },\n};\n\nconst getDimensions = (tile: TerrainTile): TileData => {\n  if (tile.set === \"terrain\" || tile.set === \"holiday\") {\n    const size = sizeMapping[tile.size ?? \"normal\"];\n\n    return {\n      width: 512,\n      height: 512,\n      offsetX: size.x,\n      offsetY: size.y,\n    };\n  } else if (tile.set === \"fantasy\") {\n    const size = sizeMapping[tile.size ?? \"normal\"];\n    const defaultSettings = {\n      width: 512,\n      height: 512,\n      offsetX: tile.direction === \"south\" ? size.x : size.x,\n      offsetY: tile.direction === \"south\" ? 0 : 0,\n      offsetZ: tile.direction === \"south\" ? 0 : 0,\n    };\n\n    const elevatedSettings = {\n      width: 512,\n      height: 512,\n      offsetX: 0,\n      offsetY: -70,\n      offsetZ: 1,\n    };\n\n    if ([\"roadCurb\", \"roadEdge\", \"road\", \"planks\"].includes(tile.img))\n      return elevatedSettings;\n\n    return defaultSettings;\n  } else {\n    // furniture\n    const defaultSettings = {\n      width: 68,\n      height: 94,\n      offsetX: 194,\n      offsetY: 254,\n    };\n    const tileConfig = furnitureLookup[tile.img];\n    return tileConfig\n      ? tileConfig[tile.direction ?? \"north\"] ?? defaultSettings\n      : defaultSettings;\n  }\n};\n\nconst getStyle = (\n  position: Position,\n  tileData: TileData\n): React.CSSProperties => {\n  return {\n    transform: `translate(${\n      64 * position[0] + 64 * position[1] + tileData.offsetX\n    }px, ${\n      32 * position[0] - 32 * position[1] - 78 * position[2] + tileData.offsetY\n    }px)`,\n    zIndex: `${\n      100 +\n      position[0] -\n      position[1] +\n      10 * position[2] +\n      (tileData.offsetZ ?? 0)\n    }`,\n  };\n};\n\ntype Props = {\n  tile: TerrainTile;\n};\n\nconst Tile: React.FunctionComponent<Props> = ({ tile }) => {\n  const dimensions = getDimensions(tile);\n  return (\n    <img\n      src={\".\" + getTileSrc(tile)}\n      width={dimensions.width}\n      height={dimensions.height}\n      alt={tile.img}\n      className={styles.tile}\n      style={getStyle(tile.coord, dimensions)}\n    />\n  );\n};\n\nexport default Tile;\n","import { PreparedImageDefinition } from \"geppetto-player\";\n\nexport enum CharacterSprites {\n  Tristan = 0,\n  Catoo = 1,\n  Tinka = 2,\n  Carl = 3,\n  Gina = 4,\n  Piet = 5,\n  Sint = 6,\n  Amerigo = 7,\n  Matthijs = 8,\n}\n\nexport type Creature = {\n  card: CreatureCardId;\n  id: string;\n  health: number;\n  energy: number;\n  cooldowns: Record<string, number>;\n  party: \"left\" | \"right\";\n  inTurn: number;\n};\n\nexport type ActionType = \"heals\" | \"hurts\" | \"stuns\";\n\nexport type ActionSentence = {\n  source: Creature;\n  action: ActionType;\n  target: Creature;\n  with: string;\n  points: number;\n  unit: \"points\" | \"turns\";\n};\n\nexport type CombatResult = \"inProgress\" | \"retreat\" | \"won\" | \"lost\";\n\nexport type Direction = \"north\" | \"east\" | \"south\" | \"west\";\nexport type Position = [number, number, number];\nexport type TileSize = \"normal\" | \"small\" | \"large\" | \"wide\";\nexport type TerrainTile = {\n  coord: Position;\n  img: string;\n  direction?: Direction;\n  size?: TileSize;\n  set: \"terrain\" | \"furniture\" | \"fantasy\" | \"holiday\";\n};\n\nexport type Dialog = {\n  characterName: string;\n  characterColor: string;\n  text: string[];\n};\n\nexport type Fight = {\n  dialog?: Dialog[];\n  enemies: CreatureCardId[];\n};\n\nexport type LevelCharacter = {\n  initialDialog: Dialog[];\n  winDialog: Dialog[];\n  loseDialog: Dialog[];\n  conditions?: {\n    minimalCards?: number;\n    encountersCompleted?: CharacterSprites[];\n  };\n  conditionDialog: Dialog[];\n  characterSprite: CharacterSprites;\n  position: Position;\n  fights: Fight[];\n  rewards: {\n    follower?: CharacterSprites;\n    card?: string;\n    removeCard?: string;\n    xp?: number;\n    gameCompleted?: boolean;\n  };\n};\n\nexport type LevelExit = {\n  coord: Position;\n  level: string;\n  startCoord: Position;\n};\n\nexport type LevelData = {\n  name: string;\n  tiles: TerrainTile[];\n  decorations: TerrainTile[];\n  characters: LevelCharacter[];\n  exits: LevelExit[];\n};\n\nexport type ActionTarget =\n  | \"weakness\"\n  | \"minHealth\"\n  | \"maxHealth\"\n  | \"enemy\"\n  | \"friendly\"\n  | \"allEnemies\"\n  | \"allFriendlies\"\n  | \"self\";\n\nexport type Action = {\n  name: string;\n  damage: number;\n  damageType?: \"stun\";\n  animationTrack?: { track: string; target: \"self\" | \"environment\" };\n  cost: number;\n  cooldown: number;\n  targets: ActionTarget[];\n};\n\nexport type CreatureCardId = string;\n\nexport type CreatureType = \"shoe\" | \"bag\" | \"rod\";\n\nexport type CreatureCard = {\n  id: string;\n  name: string;\n  level: number;\n  initiative: number;\n\n  xpResult: number;\n\n  type: CreatureType;\n  health: number;\n  energy: number;\n\n  texture: Promise<HTMLImageElement>;\n  animation: PreparedImageDefinition;\n\n  actions: Action[];\n};\n","import { CharacterSprites, LevelCharacter } from \"../../types\";\n\nexport const amerigo: LevelCharacter = {\n  characterSprite: CharacterSprites.Amerigo,\n  position: [4, 2, 2],\n  conditionDialog: [],\n  initialDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Whaa er staat een paard in mijn kamer!\"],\n    },\n    {\n      characterColor: \"lightblue\",\n      characterName: \"Amerigo\",\n      text: [\n        \"Tristan help!\",\n        \"Al het speelgoed van Sinterklaas is tot leven gekomen!\",\n        \"En nu houden ze de Sint, Hoofdpiet en jouw familie gevangen!\",\n        \"We moeten ze redden. Ik zal je helpen.\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Dat gaan we doen! Ik ben tenslotte een goede Pokmon trainer!\"],\n    },\n    {\n      characterColor: \"lightblue\",\n      characterName: \"Amerigo\",\n      text: [\"Amerigo, go!\"],\n    },\n    {\n      characterColor: \"lightblue\",\n      characterName: \"Amerigo\",\n      text: [\"**Poef**\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\n        \"Wow! Amerigo is nu in mijn Pokbal gegaan!\",\n        \"Nu op zoek naar mijn familie!\",\n      ],\n    },\n  ],\n  fights: [],\n  rewards: {\n    card: \"amerigo\",\n  },\n  winDialog: [],\n  loseDialog: [],\n};\n","import { CharacterSprites, LevelCharacter } from \"../../types\";\n\nexport const carl: LevelCharacter = {\n  characterSprite: CharacterSprites.Carl,\n  position: [11, -7, 1],\n  conditions: {\n    minimalCards: 1,\n  },\n  conditionDialog: [\n    {\n      characterColor: \"green\",\n      characterName: \"Carl\",\n      text: [\"Tris! Dit speelgoed houdt mij gevangen!\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ik heb niets om mee te vechten!\", \"Ik kom later terug.\"],\n    },\n  ],\n  initialDialog: [\n    {\n      characterColor: \"green\",\n      characterName: \"Carl\",\n      text: [\n        \"Tris! Dit speelgoed houdt mij gevangen!\",\n        \"Ik heb dit nog nooit meegemaakt!\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ik help je wel Pa!\"],\n    },\n  ],\n  fights: [{ enemies: [\"slime\"] }],\n  rewards: {\n    follower: CharacterSprites.Carl,\n    xp: 25,\n  },\n  winDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Zo Pap, daar heb ik korte metten mee gemaakt!\"],\n    },\n    {\n      characterColor: \"green\",\n      characterName: \"Carl\",\n      text: [\"Jij weet van aanpakken! Ik ga ook met je mee!\"],\n    },\n  ],\n  loseDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Oei dat ging niet helemaal lekker!\"],\n    },\n    {\n      characterColor: \"green\",\n      characterName: \"Carl\",\n      text: [\"Gewoon nog een keertje proberen!\"],\n    },\n  ],\n};\n","import { CharacterSprites, LevelCharacter } from \"../../types\";\n\nexport const catoo: LevelCharacter = {\n  characterSprite: CharacterSprites.Catoo,\n  position: [10, 2, 1],\n  conditions: {\n    minimalCards: 1,\n  },\n  conditionDialog: [\n    {\n      characterColor: \"pink\",\n      characterName: \"Catootje\",\n      text: [\n        \"Help grote broer! Ik wordt door speelgoed gevangen gehouden!\",\n        \"Kan jij deze robot verslaan?\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ik heb niets om mee te vechten!\", \" Ik kom later terug.\"],\n    },\n  ],\n  initialDialog: [\n    {\n      characterColor: \"pink\",\n      characterName: \"Catootje\",\n      text: [\n        \"Help grote broer! Ik wordt door speelgoed gevangen gehouden!\",\n        \"Kan jij deze robot verslaan?\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Natuurlijk kan ik dat!\"],\n    },\n  ],\n  fights: [{ enemies: [\"robot\"] }],\n  rewards: {\n    follower: CharacterSprites.Catoo,\n    xp: 25,\n  },\n  winDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ha! Daar hebben we mooi van gewonnen Amerigo!\"],\n    },\n    {\n      characterColor: \"lightblue\",\n      characterName: \"Amerigo\",\n      text: [\n        \"Ja zeker. Maar mijn schade kwam niet volledig aan.\",\n        \"Dit komt omdat ik een :scissors: (schoen) type ben, en deze robot is van het type :rock: (roe)\",\n        \":rock: (roe) is sterker tegen :scissors: (schoen), :scissors: (schoen) is sterker tegen :paper: (zak), en :paper: (zak) is weer sterker tegen :rock: (roe).\",\n        \"Gebruik die informatie voor tactische keuzes!\",\n      ],\n    },\n    {\n      characterColor: \"pink\",\n      characterName: \"Catootje\",\n      text: [\n        \"Goed gedaan broer!\",\n        \"Ik ga met je mee! Dan gaan we de anderen redden!\",\n      ],\n    },\n  ],\n  loseDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Oei dat moet ik nog maar eens proberen\"],\n    },\n    {\n      characterColor: \"pink\",\n      characterName: \"Catootje\",\n      text: [\"Je kan het!\"],\n    },\n  ],\n};\n","import { CharacterSprites, LevelCharacter } from \"../../types\";\n\nexport const gina: LevelCharacter = {\n  characterSprite: CharacterSprites.Gina,\n  position: [14, 3, 2],\n  conditions: {\n    minimalCards: 1,\n  },\n  conditionDialog: [\n    {\n      characterColor: \"red\",\n      characterName: \"Gina\",\n      text: [\"Help Tristan! Al dit speelgoed is ineens op hol geslagen!\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\n        \"Dat klopt Amma! ik ben dat aan het fixen!\",\n        \"Ik moet alleen iets hebben om mee te vechten!\",\n      ],\n    },\n  ],\n  initialDialog: [\n    {\n      characterColor: \"red\",\n      characterName: \"Gina\",\n      text: [\"Help Tristan! Al dit speelgoed is ineens op hol geslagen!\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Dat klopt Amma! ik ben dat aan het fixen!\"],\n    },\n    {\n      characterColor: \"red\",\n      characterName: \"Gina\",\n      text: [\"Help!!\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Blijf rustig Amma! Ik knok ze wel weg!\"],\n    },\n  ],\n  fights: [\n    { enemies: [\"robot\", \"robot\", \"robot\"] },\n    { enemies: [\"slime\", \"bear\"] },\n  ],\n  rewards: {\n    follower: CharacterSprites.Gina,\n    xp: 100,\n  },\n  winDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Poe dat was wel even een gevecht...\"],\n    },\n    {\n      characterColor: \"red\",\n      characterName: \"Gina\",\n      text: [\"Goed gedaan jongen! Ik ga met je mee!\"],\n    },\n  ],\n  loseDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Dat was best wel lastig...\"],\n    },\n    {\n      characterColor: \"red\",\n      characterName: \"Gina\",\n      text: [\"Als iemand dit moet kunnen dan ben jij dit!\"],\n    },\n  ],\n};\n","import { CharacterSprites, LevelCharacter } from \"../../types\";\n\nexport const piet: LevelCharacter = {\n  characterSprite: CharacterSprites.Piet,\n  position: [14, 6, 1],\n  conditions: {\n    minimalCards: 1,\n  },\n  conditionDialog: [\n    {\n      characterColor: \"navyblue\",\n      characterName: \"Piet\",\n      text: [\"Hey Tristan! Ons speelgoed is tot leven gekomen!\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ik heb niets om mee te vechten!\", \" Ik kom later terug.\"],\n    },\n  ],\n  initialDialog: [\n    {\n      characterColor: \"navyblue\",\n      characterName: \"Piet\",\n      text: [\n        \"Hey Tristan! Ons speelgoed is tot leven gekomen!\",\n        \"Zou jij mij kunnen helpen? Ik heb dan een tof cadeau voor jou!\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ik ben benieuwd! Maar eerst jou helpen!\"],\n    },\n  ],\n  fights: [{ enemies: [\"robot\", \"bear\"] }],\n  rewards: {\n    follower: CharacterSprites.Piet,\n    card: \"ozosnel\",\n  },\n  winDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Kijk Piet, zo doe je dat!\"],\n    },\n    {\n      characterColor: \"navyblue\",\n      characterName: \"Piet\",\n      text: [\n        \"Wow, jij bent wel echt een goede Pokmon vechter!\",\n        \"Ik heb echt een perfect cadeau voor jou!\",\n        \"Kijk, hier een mooie Pokbal met Ozosnel!\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Wauw super vet!\"],\n    },\n  ],\n  loseDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Oei dat moet ik nog maar eens proberen\"],\n    },\n    {\n      characterColor: \"navyblue\",\n      characterName: \"Piet\",\n      text: [\"Je kan het, dat weet ik zeker!\"],\n    },\n  ],\n};\n","import { CharacterSprites, LevelCharacter } from \"../../types\";\n\nexport const sint: LevelCharacter = {\n  characterSprite: CharacterSprites.Sint,\n  position: [10, 9, 3],\n  conditions: {\n    minimalCards: 2,\n  },\n  conditionDialog: [\n    {\n      characterColor: \"yellow\",\n      characterName: \"Sinterklaas\",\n      text: [\n        \"Hoi Tristan, begrijp ik goed dat jij me van dit...\",\n        \"...probleempje kan verlossen?\",\n        \"Normaal ben ik juist blij met speelgoed, maar dit loopt een beetje uit de hand...\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ik kom terug zodra ik beter kan vechten!\"],\n    },\n  ],\n  initialDialog: [\n    {\n      characterColor: \"yellow\",\n      characterName: \"Sinterklaas\",\n      text: [\n        \"Hoi Tristan, begrijp ik goed dat jij me van dit...\",\n        \"...probleempje kan verlossen?\",\n        \"Normaal ben ik juist blij met speelgoed, maar dit loopt een beetje uit de hand...\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\n        \"Ik ben de beste Pokmon trainer van het land Sinterklaas!\",\n        \"Hier ben ik weer hoor!\",\n        \"Bereid je maar voor!\",\n        \"OP EEN EPISCH GEVECHT!!\",\n      ],\n    },\n  ],\n  fights: [\n    { enemies: [\"robot\", \"slime\"] },\n    { enemies: [\"bear\", \"bear\", \"slime\"] },\n    { enemies: [\"robot\", \"robot\", \"bear\"] },\n  ],\n  rewards: {\n    follower: CharacterSprites.Sint,\n  },\n  winDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ha! Daar heb ik mooi van gewonnen!\"],\n    },\n    {\n      characterColor: \"yellow\",\n      characterName: \"Sinterklaas\",\n      text: [\n        \"Fantastisch gedaan jongen! Dat was...\",\n        \"GEWELDIG!\",\n        \"(en geweldadig)\",\n        \"Trouwens, wat heb je precies met mijn paarden gedaan?\",\n        \"Ze zien er zo... Blits uit...\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ik heb ze even ge-evolueerd Sinterklaas.\"],\n    },\n    {\n      characterColor: \"yellow\",\n      characterName: \"Sinterklaas\",\n      text: [\n        \"Nou, euhm, goed dan... laten we nu fijn mijn verjaardag gaan vieren!\",\n        \"Zullen we naar dat gezellige huisje bovenaan de berg gaan?\",\n        \"Volgens mij liggen daar alle pakjes...\",\n      ],\n    },\n  ],\n  loseDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Jikes! Dat was echt moeilijk!\"],\n    },\n    {\n      characterColor: \"yellow\",\n      characterName: \"Sinterklaas\",\n      text: [\n        \"Ik lees hier net wat tips in mijn grote boek.\",\n        \"Let op dat Zak :paper: altijd sterker is tegen Roe :rock:\",\n        \"en Roe :rock: sterker is tegen Schoen :scissors:\",\n        \"en Schoen :scissors: sterker is tegen Zak :paper:.\",\n        \"Oja. En wees zuinig met waar je je energie aan uitgeeft!\",\n        \"Ik kwam er net achter dat de beren pas gaan genezen onder\",\n        \"15 punten. Dus misschien net daarboven een grote aanval plannen?\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Dat zijn goede tips Sinterklaas, bedankt!\"],\n    },\n  ],\n};\n","import { CharacterSprites, LevelCharacter } from \"../../types\";\n\nexport const tinka: LevelCharacter = {\n  characterSprite: CharacterSprites.Tinka,\n  position: [11, -4, 1],\n  conditions: {\n    minimalCards: 1,\n  },\n  conditionDialog: [\n    {\n      characterColor: \"red\",\n      characterName: \"Tinka\",\n      text: [\"Help Tristan! Deze beer houdt mij in zijn greep!\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Mam ik wil je helpen, maar ik heb nu niets om mee te vechten!\"],\n    },\n  ],\n  initialDialog: [\n    {\n      characterColor: \"red\",\n      characterName: \"Tinka\",\n      text: [\"Help Tristan! Deze beer houdt mij in zijn greep!\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ik help je mam. Blijf maar rustig, geen paniek.\"],\n    },\n    {\n      characterColor: \"red\",\n      characterName: \"Tinka\",\n      text: [\"Iiieee!!! Ik vindt het eng!!\"],\n    },\n  ],\n  fights: [{ enemies: [\"bear\"] }],\n  rewards: {\n    follower: CharacterSprites.Tinka,\n    xp: 25,\n  },\n  winDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Zie je mam, geen probleem!\"],\n    },\n    {\n      characterColor: \"red\",\n      characterName: \"Tinka\",\n      text: [\n        \"Tristan, je bent geweldig!\",\n        \"Ik ga met je mee, dan kunnen we anderen helpen.\",\n      ],\n    },\n  ],\n  loseDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Hmm dat moet ik nog maar eens oefenen!\"],\n    },\n    {\n      characterColor: \"red\",\n      characterName: \"Tinka\",\n      text: [\"Kom snel terug!!\"],\n    },\n  ],\n};\n","import { LevelData } from \"../types\";\nimport stage1 from \"./stage1\";\nimport bedroom from \"./bedroom\";\nimport livingroom from \"./livingroom\";\nimport street from \"./street\";\nimport mountain from \"./mountain\";\nimport finish from \"./finish\";\n\nconst zones = [stage1, bedroom, livingroom, street, mountain, finish].reduce(\n  (r, e) => ({ ...r, [e.name]: e }),\n  {} as Record<string, LevelData>\n);\n\nexport default zones;\n","import { LevelData } from \"../types\";\nimport { amerigo } from \"./characters/amerigo\";\nimport { carl } from \"./characters/carl\";\nimport { catoo } from \"./characters/catoo\";\nimport { gina } from \"./characters/gina\";\nimport { piet } from \"./characters/piet\";\nimport { sint } from \"./characters/sint\";\nimport { tinka } from \"./characters/tinka\";\n\nconst stage1: LevelData = {\n  name: \"Stage1\",\n  tiles: [\n    { coord: [1, 1, 1], img: \"block\", set: \"terrain\" },\n    { coord: [1, 1, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [2, 1, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [3, 1, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [2, 1, 1], img: \"block\", set: \"terrain\" },\n    {\n      coord: [3, 1, 1],\n      img: \"blockCornerSmall\",\n      set: \"terrain\",\n      direction: \"east\",\n    },\n    { coord: [1, 2, 1], img: \"block\", set: \"terrain\" },\n    { coord: [3, 3, 1], img: \"block\", set: \"terrain\" },\n    { coord: [2, 2, 1], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [3, 2, 1], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [4, 1, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [4, 3, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [6, 3, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [6, 5, 1], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [6, 1, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [6, -1, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [4, -1, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [4, -3, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [6, -3, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [8, -3, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [8, -1, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [8, 1, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [10, 1, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [10, -1, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    {\n      coord: [4, 2, 1],\n      img: \"blockDirtRamp\",\n      set: \"terrain\",\n      direction: \"east\",\n    },\n    {\n      coord: [6, 4, 1],\n      img: \"blockDirtRamp\",\n      set: \"terrain\",\n      direction: \"south\",\n    },\n    { coord: [5, -1, 1], img: \"block\", set: \"terrain\" },\n    { coord: [6, -1, 1], img: \"treePine\", set: \"terrain\" },\n  ],\n  decorations: [{ coord: [6, 1, 1], img: \"plant\", set: \"terrain\" }],\n  characters: [\n    { ...amerigo, position: [1, 1, 2] },\n    { ...catoo, position: [7, 6, 2] },\n    { ...tinka, position: [4, -2, 1] },\n    { ...carl, position: [7, -1, 1] },\n    { ...piet, position: [7, 1, 1] },\n    { ...gina, position: [9, 0, 1] },\n    { ...sint, position: [9, -3, 1] },\n  ],\n  exits: [],\n};\n\nexport default stage1;\n","import { LevelData } from \"../types\";\nimport { amerigo } from \"./characters/amerigo\";\n\nconst bedroom: LevelData = {\n  name: \"Slaapkamer\",\n  tiles: [\n    { coord: [2, 0, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [2, 1, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [2, 2, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [3, 0, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [3, 1, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [3, 2, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [4, 0, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [4, 1, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [4, 2, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [5, 0, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [5, 1, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [5, 2, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [2, 3, 2], img: \"wall\", set: \"furniture\", direction: \"west\" },\n    { coord: [3, 3, 2], img: \"wall\", set: \"furniture\", direction: \"west\" },\n    { coord: [4, 3, 2], img: \"wall\", set: \"furniture\", direction: \"west\" },\n    { coord: [5, 3, 2], img: \"wall\", set: \"furniture\", direction: \"west\" },\n    {\n      coord: [2, 1, 2],\n      img: \"desk\",\n      set: \"furniture\",\n      direction: \"east\",\n    },\n    {\n      coord: [2, 2, 2],\n      img: \"bedSingle\",\n      set: \"furniture\",\n      direction: \"east\",\n    },\n    {\n      coord: [1, 2, 2],\n      img: \"wall\",\n      set: \"furniture\",\n      direction: \"north\",\n    },\n    {\n      coord: [1, 1, 2],\n      img: \"wall\",\n      set: \"furniture\",\n      direction: \"north\",\n    },\n    {\n      coord: [1, 0, 2],\n      img: \"wall\",\n      set: \"furniture\",\n      direction: \"north\",\n    },\n    { coord: [5, -1, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [6, -1, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [5, -2, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [6, -2, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [5, -3, 1], img: \"floorFull\", set: \"furniture\" },\n    {\n      coord: [6, -3, 1],\n      img: \"stairs\",\n      set: \"furniture\",\n      direction: \"east\",\n      size: \"wide\",\n    },\n    {\n      coord: [5, 0, 1],\n      img: \"wallDoorway\",\n      set: \"furniture\",\n      direction: \"west\",\n    },\n  ],\n  decorations: [],\n  characters: [amerigo],\n  exits: [{ coord: [6, -3, 1.5], level: \"Woonkamer\", startCoord: [8, -3, 1] }],\n};\n\nexport default bedroom;\n","import { LevelData } from \"../types\";\nimport { catoo } from \"./characters/catoo\";\n\nconst livingroom: LevelData = {\n  name: \"Woonkamer\",\n  tiles: [\n    {\n      coord: [6, -3, 1],\n      img: \"stairs\",\n      set: \"furniture\",\n      direction: \"east\",\n      size: \"wide\",\n    },\n    { coord: [7, -2, 1], img: \"wall\", set: \"furniture\", direction: \"west\" },\n    { coord: [7, -2, 1], img: \"wall\", set: \"furniture\", direction: \"north\" },\n    { coord: [6, -1, 1], img: \"wall\", set: \"furniture\", direction: \"north\" },\n    { coord: [7, -4, 1], img: \"wall\", set: \"furniture\", direction: \"north\" },\n    { coord: [6, 0, 1], img: \"wall\", set: \"furniture\", direction: \"north\" },\n    { coord: [6, 1, 1], img: \"wall\", set: \"furniture\", direction: \"north\" },\n    { coord: [6, 2, 1], img: \"wall\", set: \"furniture\", direction: \"north\" },\n    { coord: [7, 3, 1], img: \"wall\", set: \"furniture\", direction: \"west\" },\n    { coord: [8, 3, 1], img: \"wall\", set: \"furniture\", direction: \"west\" },\n    { coord: [9, 3, 1], img: \"wall\", set: \"furniture\", direction: \"west\" },\n    { coord: [10, 3, 1], img: \"wall\", set: \"furniture\", direction: \"west\" },\n    { coord: [8, -3, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [8, -4, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [8, -2, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [8, -1, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [8, 0, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [8, 1, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [8, 2, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [7, -1, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [7, 2, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [7, 1, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [7, 0, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [9, 2, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [9, 2, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [9, 1, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [9, 0, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [9, -1, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [10, 2, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [10, 2, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [10, 1, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [10, 0, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [10, -1, 0], img: \"floorFull\", set: \"furniture\" },\n    {\n      coord: [8, 1, 1],\n      img: \"loungeDesignSofa\",\n      set: \"furniture\",\n      size: \"wide\",\n    },\n    {\n      coord: [7, -1, 1],\n      img: \"bookcaseOpen\",\n      set: \"furniture\",\n    },\n    { coord: [8, -5, 0], img: \"blockDirt\", set: \"terrain\" },\n  ],\n  decorations: [\n    {\n      coord: [8, -1, 1],\n      img: \"doorwayOpen\",\n      set: \"furniture\",\n      direction: \"west\",\n    },\n    {\n      coord: [8, -4, 1],\n      img: \"doorwayOpen\",\n      set: \"furniture\",\n      direction: \"west\",\n    },\n  ],\n  characters: [catoo],\n  exits: [\n    { coord: [7, -3, 1.5], level: \"Slaapkamer\", startCoord: [5, -3, 2] },\n    { coord: [8, -5, 1], level: \"Straat\", startCoord: [8, -5, 1] },\n  ],\n};\n\nexport default livingroom;\n","import { LevelData, TerrainTile } from \"../types\";\nimport { tinka } from \"./characters/tinka\";\nimport { carl } from \"./characters/carl\";\nimport { piet } from \"./characters/piet\";\n\nconst street: LevelData = {\n  name: \"Straat\",\n  tiles: [\n    { coord: [7, -5, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [8, -4, 0], img: \"block\", set: \"terrain\" },\n    { coord: [8, -5, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [8, -6, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [8, -7, 0], img: \"block\", set: \"terrain\" },\n\n    { coord: [9, -4, 0], img: \"block\", set: \"terrain\" },\n    { coord: [9, -5, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [9, -6, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [9, -7, 0], img: \"block\", set: \"terrain\" },\n\n    { coord: [10, -4, 0], img: \"block\", set: \"terrain\" },\n    { coord: [10, -5, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [10, -6, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [10, -7, 0], img: \"block\", set: \"terrain\" },\n\n    { coord: [9, -4, 0], img: \"block\", set: \"terrain\" },\n    { coord: [9, -5, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [9, -6, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [9, -7, 0], img: \"block\", set: \"terrain\" },\n    { coord: [10, -4, 1], img: \"treePine\", set: \"terrain\" },\n\n    { coord: [8, -3, 1], img: \"wallHalf\", set: \"fantasy\", direction: \"west\" },\n    { coord: [9, -3, 1], img: \"wallHalf\", set: \"fantasy\", direction: \"west\" },\n\n    { coord: [10, -3, 1], img: \"wallHalf\", set: \"fantasy\", direction: \"west\" },\n    { coord: [10, -7, 1], img: \"treePine\", set: \"terrain\" },\n    { coord: [10, -4, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    { coord: [10, -7, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    { coord: [12, 6, 0], img: \"block\", set: \"terrain\" },\n    { coord: [11, 6, 0], img: \"block\", set: \"terrain\" },\n    { coord: [14, 6, 0], img: \"block\", set: \"terrain\" },\n\n    ...Array(4)\n      .fill(0)\n      .map((_, i) => -7 + i)\n      .reduce(\n        (r, y) =>\n          r.concat([\n            { coord: [11, y, 0], img: \"roadCurb\", set: \"fantasy\" },\n            { coord: [12, y, 0], img: \"roadEdge\", set: \"fantasy\" },\n            { coord: [13, y, 0], img: \"road\", set: \"fantasy\" },\n            { coord: [14, y, 0], img: \"road\", set: \"fantasy\" },\n          ]),\n        [] as TerrainTile[]\n      ),\n    ...Array(10)\n      .fill(0)\n      .map((_, i) => -3 + i)\n      .reduce(\n        (r, y) =>\n          r.concat([\n            {\n              coord: [10, y, 0],\n              img: \"block\",\n              set: \"terrain\",\n            },\n            {\n              coord: [10, y, 1],\n              img: \"hedge\",\n              set: \"fantasy\",\n              direction: \"south\",\n            },\n            { coord: [11, y, 0], img: \"roadCurb\", set: \"fantasy\" },\n            { coord: [12, y, 0], img: \"roadEdge\", set: \"fantasy\" },\n            { coord: [13, y, 0], img: \"road\", set: \"fantasy\" },\n            { coord: [14, y, 0], img: \"road\", set: \"fantasy\" },\n            ...((y % 3 === 0\n              ? [{ coord: [12, y, 1], img: \"lantern\", set: \"fantasy\" }]\n              : []) as TerrainTile[]),\n          ]),\n        [] as TerrainTile[]\n      ),\n    { coord: [13, 7, 0], img: \"planks\", set: \"fantasy\" },\n    { coord: [13, 8, 0], img: \"planks\", set: \"fantasy\" },\n    { coord: [14, 7, 1], img: \"fence\", set: \"fantasy\", direction: \"north\" },\n    { coord: [14, 8, 1], img: \"fence\", set: \"fantasy\", direction: \"north\" },\n    { coord: [12, 7, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    { coord: [12, 8, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    {\n      coord: [13, 7, 0],\n      img: \"wallWoodArchTopDetail\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [14, 8, 0],\n      img: \"wallWoodArchTopDetail\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n    { coord: [13, 9, 0], img: \"planks\", set: \"fantasy\" },\n    { coord: [13, 10, 0], img: \"planks\", set: \"fantasy\" },\n    { coord: [14, 9, 1], img: \"fence\", set: \"fantasy\", direction: \"north\" },\n    { coord: [14, 10, 1], img: \"fence\", set: \"fantasy\", direction: \"north\" },\n    { coord: [12, 9, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    { coord: [12, 10, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    {\n      coord: [13, 9, 0],\n      img: \"wallWoodArchTopDetail\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [14, 10, 0],\n      img: \"wallWoodArchTopDetail\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n    { coord: [12, 7, 1], img: \"wallHalf\", set: \"fantasy\", direction: \"west\" },\n    { coord: [14, 7, 1], img: \"wallHalf\", set: \"fantasy\", direction: \"west\" },\n    { coord: [11, 7, 1], img: \"wallHalf\", set: \"fantasy\", direction: \"west\" },\n  ],\n  decorations: [\n    { coord: [8, -5, 1], img: \"wallDoorwayRound\", set: \"fantasy\" },\n    { coord: [8, -4, 1], img: \"wallWindowStone\", set: \"fantasy\" },\n    { coord: [8, -6, 1], img: \"wallDoor\", set: \"fantasy\" },\n    { coord: [8, -7, 1], img: \"wallWindowStone\", set: \"fantasy\" },\n    { coord: [8, -7, 2], img: \"wallWindowStone\", set: \"fantasy\" },\n    { coord: [8, -6, 2], img: \"wallWindowStone\", set: \"fantasy\" },\n    { coord: [8, -5, 2], img: \"wallWindowStone\", set: \"fantasy\" },\n    { coord: [8, -4, 2], img: \"wallWindowStone\", set: \"fantasy\" },\n    { coord: [7, -7, 2], img: \"wall\", set: \"fantasy\", direction: \"west\" },\n    { coord: [7, -7, 1], img: \"wall\", set: \"fantasy\", direction: \"west\" },\n    { coord: [7, -7, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [7, -7, 3], img: \"roofLeft\", set: \"fantasy\" },\n    { coord: [7, -6, 3], img: \"roof\", set: \"fantasy\" },\n    { coord: [7, -5, 3], img: \"roof\", set: \"fantasy\" },\n    { coord: [7, -4, 3], img: \"roofRight\", set: \"fantasy\" },\n    { coord: [7, -4, 3], img: \"chimneyTop\", set: \"fantasy\" },\n  ],\n  characters: [tinka, carl, piet],\n  exits: [\n    { coord: [13, 10, 1], level: \"Berg\", startCoord: [18, 0, 1] },\n    { coord: [7, -5, 1], level: \"Woonkamer\", startCoord: [8, -4, 1] },\n  ],\n};\n\nexport default street;\n","import { LevelData } from \"../types\";\nimport { gina } from \"./characters/gina\";\nimport { sint } from \"./characters/sint\";\n\nconst mountain: LevelData = {\n  name: \"Berg\",\n  tiles: [\n    { coord: [18, -2, 0], img: \"planks\", set: \"fantasy\" },\n    { coord: [18, -1, 0], img: \"planks\", set: \"fantasy\" },\n    { coord: [19, -2, 1], img: \"fence\", set: \"fantasy\", direction: \"north\" },\n    { coord: [19, -1, 1], img: \"fence\", set: \"fantasy\", direction: \"north\" },\n    { coord: [17, -2, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    { coord: [17, -1, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    {\n      coord: [18, -2, 0],\n      img: \"wallWoodArchTopDetail\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [19, -1, 0],\n      img: \"wallWoodArchTopDetail\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n    { coord: [18, 0, 0], img: \"planks\", set: \"fantasy\" },\n    { coord: [18, 1, 0], img: \"planks\", set: \"fantasy\" },\n\n    { coord: [19, 0, 1], img: \"fence\", set: \"fantasy\", direction: \"north\" },\n    { coord: [19, 1, 1], img: \"fence\", set: \"fantasy\", direction: \"north\" },\n    { coord: [17, 0, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    { coord: [17, 1, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    {\n      coord: [18, -2, 0],\n      img: \"wallWood\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [18, 0, 0],\n      img: \"wallWoodArchTopDetail\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [19, 1, 0],\n      img: \"wallWoodArchTopDetail\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n    { coord: [19, 2, 0], img: \"block\", set: \"terrain\" },\n    { coord: [18, 2, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [17, 2, 0], img: \"block\", set: \"terrain\" },\n    { coord: [16, 2, 0], img: \"block\", set: \"terrain\" },\n    { coord: [15, 2, 0], img: \"block\", set: \"terrain\" },\n\n    { coord: [19, 3, 0], img: \"block\", set: \"terrain\" },\n    { coord: [18, 3, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [17, 3, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [16, 3, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [15, 3, 0], img: \"block\", set: \"terrain\" },\n\n    { coord: [17, 4, 0], img: \"block\", set: \"terrain\" },\n    { coord: [16, 4, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [15, 4, 0], img: \"blockDirt\", set: \"terrain\" },\n\n    { coord: [18, 4, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n\n    { coord: [17, 5, 0], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [16, 5, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [15, 5, 0], img: \"blockSnow\", set: \"terrain\" },\n\n    { coord: [19, 4, 1], img: \"treePine\", set: \"terrain\" },\n    { coord: [17, 2, 1], img: \"treePine\", set: \"terrain\" },\n    { coord: [14, 5, 2], img: \"treePineSnow\", set: \"terrain\" },\n\n    {\n      coord: [14, 4, 1],\n      img: \"blockDirtRamp\",\n      set: \"terrain\",\n      direction: \"east\",\n    },\n    { coord: [14, 5, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [14, 3, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [14, 2, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [14, 2, 0], img: \"blockDirt\", set: \"terrain\" },\n\n    { coord: [13, 2, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [12, 2, 0], img: \"blockDirt\", set: \"terrain\" },\n\n    { coord: [12, 2, 1], img: \"blockSnowLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [12, 4, 1], img: \"blockSnowLarge\", set: \"terrain\", size: \"large\" },\n\n    {\n      coord: [11, 5, 2],\n      img: \"wallDetailCross\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [11, 3, 2],\n      img: \"wallDetailCross\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [11, 4, 2],\n      img: \"wallDoor\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [11, 3, 2],\n      img: \"wallDetailDiagonal\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [11, 3, 3],\n      img: \"wallDetailCross\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [11, 3, 3],\n      img: \"wallWindowGlass\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [11, 4, 3],\n      img: \"wallWindowGlass\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [11, 5, 3],\n      img: \"wallWindowGlass\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    { coord: [12, 5, 1], img: \"planks\", set: \"fantasy\" },\n    { coord: [12, 4, 1], img: \"planks\", set: \"fantasy\" },\n    {\n      coord: [11, 2, 2],\n      img: \"wallBroken\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [12, 6, 2],\n      img: \"wallHalf\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [13, 6, 2],\n      img: \"wallHalf\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [11, 3, 4],\n      img: \"roofHighWindow\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n    {\n      coord: [11, 4, 4],\n      img: \"roofHigh\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n    {\n      coord: [11, 5, 4],\n      img: \"roofHighWindow\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n\n    { coord: [17, 6, 0], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [16, 6, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [15, 6, 0], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [14, 6, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [15, 6, 1], img: \"treePineSnow\", set: \"terrain\" },\n\n    { coord: [17, 7, 0], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [16, 7, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [15, 7, 0], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [14, 7, 1], img: \"blockSnow\", set: \"terrain\" },\n\n    { coord: [17, 8, 0], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [16, 8, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [15, 8, 0], img: \"blockDirt\", set: \"terrain\" },\n    {\n      coord: [14, 8, 1],\n      img: \"blockSnowSlope\",\n      set: \"terrain\",\n      direction: \"east\",\n    },\n\n    { coord: [17, 8, 1], img: \"treePineSnow\", set: \"terrain\" },\n    { coord: [16, 9, 1], img: \"treePineSnow\", set: \"terrain\" },\n\n    { coord: [17, 9, 0], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [16, 9, 0], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [15, 9, 0], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [14, 9, 1], img: \"blockSnow\", set: \"terrain\" },\n\n    { coord: [13, 9, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [13, 8, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [13, 7, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [13, 6, 1], img: \"blockSnow\", set: \"terrain\" },\n\n    { coord: [12, 9, 2], img: \"blockSnow\", set: \"terrain\" },\n    {\n      coord: [12, 8, 2],\n      img: \"blockSnowSlope\",\n      set: \"terrain\",\n      direction: \"south\",\n    },\n    { coord: [12, 7, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [12, 6, 1], img: \"blockSnow\", set: \"terrain\" },\n\n    { coord: [11, 9, 2], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [11, 8, 2], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [11, 7, 2], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [11, 6, 1], img: \"blockSnow\", set: \"terrain\" },\n\n    { coord: [10, 9, 2], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [10, 8, 2], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [10, 7, 2], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [10, 6, 1], img: \"blockSnow\", set: \"terrain\" },\n\n    { coord: [9, 9, 3], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [9, 8, 3], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [9, 7, 3], img: \"blockSnow\", set: \"terrain\" },\n\n    { coord: [10, 10, 2], img: \"treePineSnow\", set: \"terrain\" },\n    { coord: [12, 10, 2], img: \"treePineSnow\", set: \"terrain\" },\n\n    { coord: [13, 10, 2], img: \"blockSnow\", set: \"terrain\" },\n    {\n      coord: [14, 10, 2],\n      img: \"blockSnowSlope\",\n      set: \"terrain\",\n      direction: \"south\",\n    },\n\n    { coord: [15, 11, 2], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [15, 10, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [16, 10, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [17, 10, 1], img: \"blockSnow\", set: \"terrain\" },\n\n    {\n      coord: [13, 11, 2],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n\n    {\n      coord: [15, 12, 2],\n      img: \"blockSnowSlope\",\n      set: \"terrain\",\n      direction: \"east\",\n    },\n    { coord: [16, 10, 2], img: \"treePineSnow\", set: \"terrain\" },\n    {\n      coord: [16, 11, 1],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [18, 11, 1],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    { coord: [19, 11, 2], img: \"treePineSnow\", set: \"terrain\" },\n    { coord: [17, 12, 2], img: \"treePineSnow\", set: \"terrain\" },\n    {\n      coord: [20, 11, 1],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n\n    { coord: [21, 12, 2], img: \"arrow\", set: \"terrain\", direction: \"south\" },\n  ],\n  decorations: [\n    {\n      coord: [12, 5, 2],\n      img: \"overhang\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n    {\n      coord: [12, 4, 2],\n      img: \"overhang\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n  ],\n  characters: [gina, sint],\n  exits: [\n    { coord: [18, -2, 1], level: \"Straat\", startCoord: [13, 7, 1] },\n    { coord: [21, 11, 2], level: \"Feest\", startCoord: [10, -6, 1] },\n  ],\n};\n\nexport default mountain;\n","import { LevelData } from \"../types\";\nimport { matthijs } from \"./characters/matthijs\";\n\nconst finish: LevelData = {\n  name: \"Feest\",\n  tiles: [\n    {\n      coord: [10, -6, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [8, -6, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    { coord: [8, -6, 1], img: \"treePineSnow\", set: \"terrain\" },\n    { coord: [10, -5, 1], img: \"arrow\", set: \"terrain\", direction: \"south\" },\n    {\n      coord: [12, -6, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [10, -4, 1],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [12, -4, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [10, -2, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [12, -2, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [10, 0, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [12, 0, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [8, 0, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [8, -2, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [8, 2, 0],\n      img: \"blockDirt\",\n      set: \"terrain\",\n    },\n    {\n      coord: [9, 2, 0],\n      img: \"blockDirt\",\n      set: \"terrain\",\n    },\n    {\n      coord: [8, 3, 0],\n      img: \"blockDirt\",\n      set: \"terrain\",\n    },\n    {\n      coord: [6, 2, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [10, 2, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [6, 0, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [6, -2, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [10, -2, 1],\n      img: \"treePineSnow\",\n      set: \"terrain\",\n    },\n    {\n      coord: [9, -2, 1],\n      img: \"treePineSnow\",\n      set: \"terrain\",\n    },\n    {\n      coord: [8, -2, 1],\n      img: \"treePineSnow\",\n      set: \"terrain\",\n    },\n    {\n      coord: [8, -3, 0],\n      img: \"treePineSnow\",\n      set: \"terrain\",\n    },\n    {\n      coord: [9, 3, 1],\n      img: \"wallWindowGlass\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [9, 3, 2],\n      img: \"wallWindowGlass\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [8, 3, 2],\n      img: \"wallWindowRound\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [9, 3, 2],\n      img: \"wall\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [8, 3, 1],\n      img: \"wall\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n    {\n      coord: [9, 3, 1],\n      img: \"wall\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [8, 3, 1],\n      img: \"wallDoorwaySquare\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [8, 3, 3],\n      img: \"roofLeft\",\n      set: \"fantasy\",\n      direction: \"east\",\n    },\n    {\n      coord: [9, 3, 3],\n      img: \"roofRight\",\n      set: \"fantasy\",\n      direction: \"east\",\n    },\n    {\n      coord: [10, 4, 1],\n      img: \"wallWoodDoor\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [10, 0, 1],\n      img: \"presentGreenLow\",\n      direction: \"west\",\n      set: \"holiday\",\n    },\n    {\n      coord: [7, 2, 1],\n      img: \"presentGreenRound\",\n      set: \"holiday\",\n    },\n    {\n      coord: [11, -3, 2],\n      img: \"presentLow\",\n      set: \"holiday\",\n    },\n    {\n      coord: [11, 2, 1],\n      img: \"present\",\n      set: \"holiday\",\n    },\n    { coord: [7, 3, 1], img: \"treePineSnow\", set: \"terrain\" },\n    { coord: [6, 2, 1], img: \"treePineSnow\", set: \"terrain\" },\n    { coord: [6, 1, 1], img: \"treePineSnow\", set: \"terrain\" },\n  ],\n  decorations: [],\n  characters: [matthijs],\n  exits: [{ coord: [9, -5, 1], level: \"Berg\", startCoord: [20, 12, 2] }],\n};\n\nexport default finish;\n","import { CharacterSprites, LevelCharacter } from \"../../types\";\n\nexport const matthijs: LevelCharacter = {\n  characterSprite: CharacterSprites.Matthijs,\n  position: [8, 2, 1],\n  conditions: {\n    encountersCompleted: [CharacterSprites.Sint],\n  },\n  conditionDialog: [\n    {\n      characterColor: \"green\",\n      characterName: \"Matthijs\",\n      text: [\"Hee Tristan, kom je het Sinterklaas feest bij ons vieren?\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ja graag, maar ik moet eerst nog Sinterklaas helpen geloof ik!\"],\n    },\n    {\n      characterColor: \"green\",\n      characterName: \"Matthijs\",\n      text: [\"Okee success! Kom je snel terug als je hem geholpen hebt?\"],\n    },\n  ],\n  initialDialog: [\n    {\n      characterColor: \"green\",\n      characterName: \"Matthijs\",\n      text: [\"Hee Tristan, kom je het Sinterklaas feest bij ons vieren?\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Zeker, ik heb hem zelfs meegenomen!\"],\n    },\n    {\n      characterColor: \"green\",\n      characterName: \"Matthijs\",\n      text: [\"Wow goed gedaan! Laten we snel naar binnen gaan!\"],\n    },\n  ],\n  fights: [],\n  rewards: { gameCompleted: true },\n  winDialog: [],\n  loseDialog: [],\n};\n","import React, { useState, useEffect } from \"react\";\nimport CombatArena from \"./components/CombatArena\";\nimport DialogView from \"./components/Dialog\";\nimport Level from \"./components/Level\";\nimport { evolutions } from \"./data/creatures\";\nimport zones from \"./data\";\nimport {\n  addFollower,\n  getCard,\n  giveXP,\n  removeCard,\n  selectCardIds,\n  selectZone,\n} from \"./state/characterSlice\";\nimport {\n  endEncounter,\n  selectFightWon,\n  selectInCombat,\n  selectLevelingUp,\n  startFight,\n} from \"./state/combatSlice\";\nimport {\n  closeEncounter,\n  EncounterState,\n  selectActiveEncounter,\n  winEncounter,\n} from \"./state/encounterSlice\";\nimport { useAppDispatch, useAppSelector } from \"./state/hooks\";\nimport { LevelCharacter, LevelData, Dialog } from \"./types\";\nimport Icon from \"./components/Icon\";\n\nconst AFTER_FIGHT_COOLDOWN = 3000;\n\ntype DialogType =\n  | \"initial\"\n  | \"conditional\"\n  | \"win\"\n  | \"lose\"\n  | \"evolve\"\n  | \"none\";\n\ntype DialogState = {\n  type: DialogType;\n  sentence: number;\n};\n\ntype DialogProps = {\n  characterName: string;\n  characterColor: string;\n  text: string;\n};\n\nconst processText = (text: string): React.ReactNode =>\n  text\n    .replaceAll(\":rock:\", \"|rockIcon|\")\n    .replaceAll(\":paper:\", \"|paperIcon|\")\n    .replaceAll(\":scissors:\", \"|scissorsIcon|\")\n    .split(\"|\")\n    .map((element, index) => {\n      if (element === \"rockIcon\") return <Icon symbol={\"rod\"} key={index} />;\n      if (element === \"paperIcon\") return <Icon symbol={\"bag\"} key={index} />;\n      if (element === \"scissorsIcon\")\n        return <Icon symbol={\"shoe\"} key={index} />;\n      return <React.Fragment key={index}>{element}</React.Fragment>;\n    });\n\nconst hasDialogEnded = (\n  dialogType: DialogType,\n  character: LevelCharacter | undefined,\n  dialogState: DialogState,\n  evolving?: string\n): boolean => {\n  if (dialogState.type !== dialogType) return false;\n\n  const dialogData = selectDialogData(character, dialogState, evolving);\n  return dialogData === false;\n};\n\nconst selectDialogData = (\n  character: LevelCharacter | undefined,\n  dialogState: DialogState,\n  evolving?: string\n): DialogProps | false => {\n  let dialogList: Dialog[] = [];\n  if (character) {\n    if (dialogState.type === \"initial\") {\n      dialogList = character.initialDialog;\n    }\n    if (dialogState.type === \"lose\") {\n      dialogList = character.loseDialog;\n    }\n    if (dialogState.type === \"win\") {\n      dialogList = character.winDialog;\n    }\n    if (dialogState.type === \"conditional\") {\n      dialogList = character.conditionDialog;\n    }\n  }\n  if (evolving) {\n    const evolveData = evolutions[evolving];\n    dialogList = evolveData.dialog;\n  }\n  if (dialogList.length === 0) return false;\n\n  let sentencesConsumed = dialogState.sentence;\n  let dialogIndex = 0;\n  while (sentencesConsumed > -1) {\n    const activeDialog = dialogList[dialogIndex];\n    if (!activeDialog) return false;\n    if (activeDialog.text.length <= sentencesConsumed) {\n      dialogIndex++;\n      sentencesConsumed -= activeDialog.text.length;\n    } else {\n      return {\n        characterColor: activeDialog.characterColor,\n        characterName: activeDialog.characterName,\n        text: activeDialog.text[sentencesConsumed],\n      };\n    }\n  }\n\n  return {\n    characterColor: \"orange\",\n    characterName: \"Tristan\",\n    text: \"Awesome!\",\n  };\n};\n\nconst selectEncounterCharacter = (\n  data: LevelData,\n  encounter: EncounterState\n): LevelCharacter | undefined => {\n  if (encounter.encounterCharacter === -1) return undefined;\n\n  return data.characters.find(\n    (ch) => ch.characterSprite === encounter.encounterCharacter\n  );\n};\n\ntype Props = {\n  onComplete: () => void;\n};\n\nconst Game: React.FunctionComponent<Props> = ({ onComplete }) => {\n  const dispatch = useAppDispatch();\n  const encounter = useAppSelector(selectActiveEncounter);\n  const zoneId = useAppSelector(selectZone);\n  const cardIds = useAppSelector(selectCardIds);\n  const evolving = useAppSelector(selectLevelingUp);\n\n  const zone = zones[zoneId];\n\n  const inCombat = useAppSelector(selectInCombat);\n  const fightWon = useAppSelector(selectFightWon);\n  const [dialogState, setDialogState] = useState<DialogState>({\n    type: \"none\",\n    sentence: 0,\n  });\n  const character = selectEncounterCharacter(zone, encounter);\n\n  useEffect(() => {\n    if (character && dialogState.type === \"none\") {\n      let metConditions = true;\n      if (character.conditions) {\n        if (\n          character.conditions.minimalCards &&\n          character.conditions.minimalCards > cardIds.length\n        ) {\n          metConditions = false;\n        }\n        if (\n          character.conditions.encountersCompleted &&\n          !character.conditions.encountersCompleted.every((e) =>\n            encounter.encountersCompleted.includes(e)\n          )\n        ) {\n          metConditions = false;\n        }\n      }\n\n      setDialogState({\n        type: metConditions ? \"initial\" : \"conditional\",\n        sentence: 0,\n      });\n    }\n    if (\n      !inCombat &&\n      character &&\n      hasDialogEnded(\"initial\", character, dialogState)\n    ) {\n      const activeFight = character.fights[encounter.fightsFinished];\n      if (activeFight) {\n        dispatch(startFight(activeFight.enemies));\n      } else {\n        dispatch(winEncounter());\n      }\n    }\n    if (\n      character &&\n      (hasDialogEnded(\"lose\", character, dialogState) ||\n        hasDialogEnded(\"conditional\", character, dialogState))\n    ) {\n      dispatch(closeEncounter(false));\n      setDialogState({ type: \"none\", sentence: 0 });\n    }\n    if (\n      evolving &&\n      hasDialogEnded(\"evolve\", character, dialogState, evolving)\n    ) {\n      setDialogState({ type: \"none\", sentence: 0 });\n\n      const evolveData = evolutions[evolving];\n      dispatch(removeCard(evolving));\n      dispatch(getCard(evolveData.newCard));\n    }\n    if (character && hasDialogEnded(\"win\", character, dialogState)) {\n      dispatch(closeEncounter(true));\n      setDialogState({ type: \"none\", sentence: 0 });\n      if (character.rewards.card) {\n        dispatch(getCard(character.rewards.card));\n      }\n      if (character.rewards.removeCard) {\n        dispatch(removeCard(character.rewards.removeCard));\n      }\n      if (character.rewards.follower) {\n        dispatch(addFollower(character.rewards.follower));\n      }\n      if (character.rewards.xp) {\n        dispatch(giveXP(character.rewards.xp));\n      }\n      if (character.rewards.gameCompleted) {\n        onComplete();\n      }\n    }\n  }, [\n    onComplete,\n    inCombat,\n    character,\n    dialogState,\n    dispatch,\n    encounter.fightsFinished,\n    encounter.encountersCompleted,\n    cardIds.length,\n    evolving,\n  ]);\n\n  useEffect(() => {\n    if (\n      character &&\n      encounter.result === \"lost\" &&\n      dialogState.type !== \"lose\"\n    ) {\n      const timeoutId = setTimeout(() => {\n        setDialogState({ type: \"lose\", sentence: 0 });\n        dispatch(endEncounter());\n      }, AFTER_FIGHT_COOLDOWN);\n      return () => clearTimeout(timeoutId);\n    }\n    if (character && encounter.result === \"won\" && dialogState.type !== \"win\") {\n      if (inCombat) {\n        const timeoutId = setTimeout(() => {\n          setDialogState({ type: \"win\", sentence: 0 });\n          dispatch(endEncounter());\n        }, AFTER_FIGHT_COOLDOWN);\n        return () => clearTimeout(timeoutId);\n      } else {\n        setDialogState({ type: \"win\", sentence: 0 });\n        dispatch(endEncounter());\n      }\n    }\n    if (\n      inCombat &&\n      character &&\n      encounter.result === \"inProgress\" &&\n      fightWon &&\n      encounter.fightsFinished > 0 &&\n      character.fights[encounter.fightsFinished]\n    ) {\n      const timeoutId = setTimeout(() => {\n        dispatch(\n          startFight(character.fights[encounter.fightsFinished].enemies)\n        );\n      }, AFTER_FIGHT_COOLDOWN);\n      return () => clearTimeout(timeoutId);\n    }\n  }, [\n    encounter.result,\n    character,\n    dialogState.type,\n    dispatch,\n    fightWon,\n    inCombat,\n    encounter.fightsFinished,\n  ]);\n\n  const dialogData = selectDialogData(character, dialogState, evolving);\n\n  return (\n    <main>\n      <Level data={zone} />\n      {inCombat && character && <CombatArena character={character} />}\n      {dialogData && (\n        <DialogView\n          name={dialogData.characterName}\n          color={dialogData.characterColor}\n          onClick={() => {\n            setDialogState((state) => ({\n              ...state,\n              type: evolving ? \"evolve\" : state.type,\n              sentence: state.sentence + 1,\n            }));\n          }}\n        >\n          {processText(dialogData.text)}\n        </DialogView>\n      )}\n    </main>\n  );\n};\n\nexport default Game;\n","import React, { useState, useCallback } from \"react\";\nimport SplashScreen from \"./components/SplashScreen\";\nimport Game from \"./Game\";\n\ntype GameState = \"init\" | \"started\" | \"finished\";\n\nconst App: React.FunctionComponent = () => {\n  const [gameState, setGameState] = useState<GameState>(\"init\");\n\n  const onComplete = useCallback(() => {\n    setGameState(\"finished\");\n  }, []);\n\n  const onStart = useCallback(() => {\n    setGameState(\"started\");\n  }, []);\n\n  if (gameState === \"started\") {\n    return <Game onComplete={onComplete} />;\n  }\n\n  if (gameState === \"finished\") {\n    return <SplashScreen screen=\"end\" />;\n  }\n\n  return <SplashScreen onKeyPress={onStart} screen=\"start\" />;\n};\n\nexport default App;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport characterReducer from \"./characterSlice\";\nimport combatReducer from \"./combatSlice\";\nimport encounterReducer from \"./encounterSlice\";\n\nexport const store = configureStore({\n  reducer: {\n    character: characterReducer,\n    combat: combatReducer,\n    encounter: encounterReducer,\n  },\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { store } from \"./state/store\";\nimport { Provider } from \"react-redux\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}