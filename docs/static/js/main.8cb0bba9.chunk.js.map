{"version":3,"sources":["components/CombatArena.module.css","buffer.ts","prepareAnimation.ts","traverse.ts","shaders/vertexShader.ts","vertices.ts","player.ts","shaders/vertexShader-min.vert","shaders/fragmentShader-min.frag","components/MemberStats.module.css","components/SplashScreen.module.css","components/Level.module.css","components/CombatView.module.css","components/Dialog.module.css","components/Character.module.css","components/Tile.module.css","components/Level.tsx","components/SplashScreen.tsx","className.ts","combatHelpers.ts","combat.ts","data/geppetto/combat_characters.png","data/creatures.ts","state/combatSlice.ts","state/encounterSlice.ts","state/hooks.ts","components/CombatLogSentence.tsx","components/CombatView.tsx","components/Icon.tsx","data/geppetto/zak.png","data/geppetto/schoen.png","data/geppetto/roe.png","components/MemberStats.tsx","data/geppetto/systeem.png","components/logo.png","components/CombatArena.tsx","components/Dialog.tsx","state/characterSlice.ts","components/Character.tsx","components/tileHelpers.ts","components/Tile.tsx","types.ts","data/characters/amerigo.ts","data/characters/carl.ts","data/characters/catoo.ts","data/characters/gina.ts","data/characters/piet.ts","data/characters/sint.ts","data/characters/tinka.ts","data/index.ts","data/stage1.ts","data/bedroom.ts","data/livingroom.ts","data/street.ts","data/mountain.ts","data/finish.ts","data/characters/matthijs.ts","Game.tsx","App.tsx","state/store.ts","serviceWorker.ts","index.tsx"],"names":["module","exports","MixMode","vectors","reduce","result","vec","concat","array","data","Float32Array","length","stride","undefined","item","type","shapes","visitor","parents","shape","mutationVectors","mutator","items","translate","stretch","rotate","deform","opacity","lightness","colorize","saturation","self","parentShape","mutatorIndex","indexOf","i","mutatorIndices","mutators","mutatorMapping","value","origin","radius","index","push","parentMutation","findIndex","e","name","parent","shapeMutatorMapping","parentList","Int32Array","forEach","vectorSettings","imageDefinition","controlNames","controls","map","c","animations","a","tracks","events","keyframes","frame","event","time","Object","keys","controlValues","filter","v","l","controlName","frames","duration","looping","mutType","MULTIPLY","HUE","ADD","includes","version","Error","elements","vertices","indices","points","anchor","sprite","minX","Infinity","maxX","minY","maxY","x","y","shapeIndices","from","triangles","itemOffset","offset","start","amount","z","mutatorInfo","mutatorCount","mutationValues","entries","defaultFrame","key","controlMutationValueList","mutationValueIndicesList","controlMutationIndicesList","element","sort","b","mutationControlData","control","controlMutations","steps","mutation","values","k","controlIndex","controlData","valueStartIndex","stepType","fill","maxIteration","directControls","keyAsString","parseInt","d","Math","max","mixMode","trackX","trackY","mutatorParents","controlMutationValues","mutationValueIndices","controlMutationIndices","defaultControlValues","shapeVertices","Uint16Array","n","factor","abs","aa","ba","track","position","startValue","mixer","previousPos","previousValue","mix","zoom","panX","panY","zIndex","gl","getContext","premultipliedalpha","depth","antialias","powerPreference","clearColor","enable","DEPTH_TEST","BLEND","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","animation","program","createProgram","vertexShaderSource","vs","createShader","VERTEX_SHADER","fs","FRAGMENT_SHADER","deleteProgram","deleteShader","shaderSource","compileShader","attachShader","linkProgram","getProgramParameter","LINK_STATUS","console","error","getProgramInfoLog","getShaderInfoLog","onTrackStoppedListeners","onCustomEventListeners","render","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","viewport","width","height","addAnimation","image","textureUnit","options","id","unit","TEXTURE0","TEXTURE1","TEXTURE2","TEXTURE3","TEXTURE4","TEXTURE5","TEXTURE6","TEXTURE7","TEXTURE8","TEXTURE9","useProgram","texture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA","UNSIGNED_BYTE","uniform2f","getUniformLocation","parentLocation","uniform1iv","setBuffer","uniform","buffer","uniformLocation","uniform2fv","uniform3fv","uniform4fv","mutationValuesLocation","uControlValues","uniform1fv","renderControlValues","vertexBuffer","createBuffer","indexBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","ELEMENT_ARRAY_BUFFER","uBasePosition","uTranslate","uMutation","uViewport","uScale","aCoord","getAttribLocation","aTexCoord","cWidth","cHeight","basePosition","scale","playingAnimations","trackNames","stopTrack","playingIndex","playing","playTime","Date","startedAt","startAt","playingAnimation","splice","listener","callback","nameToControlIndex","join","nameToTrackIndex","trackName","trackIndex","newAnimation","destroy","deleteTexture","deleteBuffer","setLooping","loop","startTrack","speed","animationControls","some","controlNr","iterationStartedAt","lastRender","maxValue","getControlValue","setPanning","newPanX","newPanY","setZoom","newZoom","setZIndex","newZIndex","vertexAttribPointer","FLOAT","BYTES_PER_ELEMENT","enableVertexAttribArray","canvasWidth","canvasHeight","landscape","uniform4f","activeTexture","uniform1i","uniform3f","now","playPosition","absTime","handler","updatedMutationValues","ctrlValue","xValue","yValue","hue","uniform1f","drawElements","TRIANGLES","UNSIGNED_SHORT","onTrackStopped","onEvent","MoveDirection","SplashScreen","onKeyPress","screen","useEffect","code","window","addEventListener","removeEventListener","className","styles","startScreen","endScreen","classNames","isStrongFor","to","isWeakFor","DUMMY_ACTION","action","target","genericCombatTexture","url","Promise","resolve","Image","crossOrigin","src","onload","loadTexture","amerigoTexture","creatures","level","xpResult","initiative","health","energy","prepareAnimation","amerigoAnimation","actions","animationTrack","damage","cost","cooldown","targets","ameerigogoAnimation","ozosnelAnimation","ozoveelsnellerAnimation","damageType","robotAnimation","bearAnimation","slimeAnimation","creature","evolutions","amerigo","newCard","dialog","characterName","characterColor","text","ozosnel","createCombatCreature","party","cardId","creatureCard","card","cooldowns","inTurn","combatSlice","createSlice","initialState","inCombat","combatResult","currentTurn","lastActionLog","reducers","startFight","state","payload","cA","cB","startEncounter","endEncounter","actionTurn","currentcreature","find","team","ownCard","actionDetails","isEnemy","healing","min","source","with","round","stunned","leftAlive","rightAlive","selectInCombat","combat","selectFightWon","selectCombatLog","selectLevelingUp","character","cards","xp","selectCombatStatus","currentCreature","currentCard","disabled","inCooldown","outcome","partyA","partyB","turn","isStunned","encounterSlice","encounterCharacter","fightsFinished","encountersCompleted","encounter","closeEncounter","loseEncounter","completeFight","winEncounter","selectActiveEncounter","useAppDispatch","useDispatch","useAppSelector","useSelector","creatureName","actionMap","hurts","heals","stuns","unitMap","turns","CombatLogSentence","sentence","style","textTransform","background","backgroundAnimation","trackMapping","CombatView","canvasRef","useRef","playerRef","animationsRef","resizeHandler","current","getBoundingClientRect","devicePixelRatio","player","setupWebGL","img","stateTrack","setupBackground","requestAnimationFrame","combatStatus","combatLog","checkSetup","synchronizeAnimations","animationStates","log","states","entry","sourceAction","getAnimationStates","animationId","arena","ref","imageMapping","bag","shoe","rod","Icon","symbol","alt","verticalAlign","MemberStats","member","padding","color","memberProps","energyBar","actionRequiresTarget","actionSelection","actionRequiresEnemyTarget","actionRequiresFriendlyTarget","CombatArena","delayedCombatStatus","dispatch","useState","setCombatStatus","timeoutId","setTimeout","clearTimeout","setActionSelection","targetSelection","setTargetSelection","actionFocus","setActionFocus","characterOrder","fights","actionData","needsHealing","healingAbilities","defensiveAction","specialAbilities","offensiveAction","targetType","r","enemy","enemyActionSelection","f","targetName","actionIndices","keyHandling","ev","fightScreen","systeemImage","top","left","logo","right","partyStats","partyBox","actionsMenu","focusAction","disabledAction","Dialog","onClick","children","keyListener","dialogBox","characterSlice","positionHistory","followers","move","unshift","slice","getCard","removeCard","addFollower","giveXP","enterLevel","selectPosition","selectZone","selectCardIds","selectFollowers","pos","calculateXy","calculatePosition","size","transform","Character","backgroundPosition","tileMapping","terrain","furniture","fantasy","holiday","directionMapping","north","east","south","west","remapDirection","stairs","getTileSrc","tile","direction","set","sizeMapping","wide","normal","large","small","furnitureLookup","floorFull","offsetX","offsetY","wall","bedSingle","desk","wallDoorway","offsetZ","loungeDesignSofa","doorwayOpen","getStyle","tileData","Tile","dimensions","defaultSettings","tileConfig","getDimensions","coord","preventEvents","CharacterSprites","getTopTerrain","topZ","tiles","samePosition","isRamp","inDirection","xDelta","yDelta","inOppositeDirection","X_MARGIN","Y_MARGIN","calculateNewPos","levelData","currentTerrain","newTerrain","isFloor","directionMap","Up","Down","Left","Right","None","Level","cardIds","activeEncounter","posRef","terrainRef","canMoveRef","levelSwitchRef","levelSwitchState","setLevelSwitchState","timeId","levelCharacters","useMemo","characters","follower","characterSprite","movePlayer","useCallback","deltas","newPos","screenPos","needsScroll","scrollSettings","scrollLeft","scrollTop","behavior","scroll","onExit","exits","startCoord","meetCharacter","keyHandler","preventDefault","fadeout","decorations","Amerigo","conditionDialog","initialDialog","rewards","winDialog","loseDialog","carl","Carl","conditions","minimalCards","enemies","catoo","Catoo","gina","Gina","piet","Piet","sint","Sint","tinka","Tinka","zones","Array","_","Matthijs","gameCompleted","AFTER_FIGHT_COOLDOWN","hasDialogEnded","dialogType","dialogState","evolving","selectDialogData","dialogList","sentencesConsumed","dialogIndex","activeDialog","Game","onComplete","zoneId","zone","fightWon","setDialogState","ch","selectEncounterCharacter","metConditions","every","activeFight","evolveData","dialogData","replaceAll","split","Fragment","App","gameState","setGameState","onStart","store","configureStore","reducer","characterReducer","combatReducer","encounterReducer","Boolean","location","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.8cb0bba9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"fightScreen\":\"CombatArena_fightScreen__2Ikf1\",\"log\":\"CombatArena_log__zgc9c\",\"partyStats\":\"CombatArena_partyStats__CKZRw\",\"partyBox\":\"CombatArena_partyBox__NUtcY\",\"actionsMenu\":\"CombatArena_actionsMenu__2zW-s\",\"focusAction\":\"CombatArena_focusAction__3v0XJ\",\"disabledAction\":\"CombatArena_disabledAction__2vNUZ\"};","import { Vec2, Vec3, Vec4 } from \"src/types\";\n\nexport const flatten = (vectors: Vec2[] | Vec3[] | Vec4[]): number[] =>\n  ((vectors as unknown) as number[][]).reduce<number[]>(\n    (result, vec) => result.concat(vec),\n    []\n  );\n\nexport type PreparedFloatBuffer = {\n  data: Float32Array;\n  length: number;\n  stride: number;\n};\n\nexport type PreparedIntBuffer = {\n  data: Int32Array;\n  length: number;\n  stride: number;\n};\n\nexport const vectorArrayToPreparedFloatBuffer = (\n  array: Vec2[] | Vec3[] | Vec4[]\n): PreparedFloatBuffer => ({\n  data: new Float32Array(flatten(array)),\n  length: array.length,\n  stride: array[0] === undefined ? 0 : array[0].length,\n});\n","import Delaunator from \"delaunator\";\nimport {\n  flatten,\n  PreparedFloatBuffer,\n  PreparedIntBuffer,\n  vectorArrayToPreparedFloatBuffer,\n} from \"./buffer\";\nimport { isMutationVector, isShapeDefinition, visitShapes } from \"./traverse\";\nimport {\n  ImageDefinition,\n  MutationVector,\n  ShapeDefinition,\n  SpriteDefinition,\n  Vec2,\n  Vec3,\n  Vec4,\n} from \"./types\";\n\nconst getAnchor = (sprite: SpriteDefinition): Vec2 => {\n  let minX = Infinity;\n  let maxX = -Infinity;\n  let minY = Infinity;\n  let maxY = -Infinity;\n  sprite.points.forEach(([x, y]) => {\n    minX = x < minX ? x : minX;\n    maxX = x > maxX ? x : maxX;\n    minY = y < minY ? y : minY;\n    maxY = y > maxY ? y : maxY;\n  });\n\n  return [(minX + maxX) / 2, (minY + maxY) / 2];\n};\n\nexport const fileredTriangles = (points: number[][]): number[] =>\n  Delaunator.from(points).triangles;\n\nconst vectorTypeMapping: { [key in MutationVector[\"type\"]]: number } = {\n  translate: 1,\n  stretch: 2,\n  rotate: 3,\n  deform: 4,\n  opacity: 5,\n  lightness: 6,\n  colorize: 7,\n  saturation: 8,\n};\n\nconst mutatorToVec4 = (mutator: MutationVector): Vec4 => [\n  vectorTypeMapping[mutator.type],\n  mutator.origin[0],\n  mutator.origin[1],\n  mutator.type === \"deform\" || mutator.type === \"translate\"\n    ? mutator.radius\n    : -1,\n];\n\nconst getParentMutation = (\n  parents: (ShapeDefinition | MutationVector)[],\n  self?: MutationVector\n): MutationVector | null => {\n  const parentShape = parents[parents.length - 1];\n  if (isShapeDefinition(parentShape)) {\n    const mutatorIndex = self ? parentShape.mutationVectors.indexOf(self) : -1;\n    if (mutatorIndex > 0) {\n      return parentShape.mutationVectors[mutatorIndex - 1];\n    }\n    for (let i = parents.length - (self ? 2 : 1); i >= 0; i--) {\n      const shape = parents[i];\n      if (\n        shape &&\n        isShapeDefinition(shape) &&\n        shape.mutationVectors.length > 0\n      ) {\n        return shape.mutationVectors[shape.mutationVectors.length - 1];\n      }\n    }\n  }\n  return null;\n};\n\nexport const createMutationList = (\n  shapes: ShapeDefinition[]\n): {\n  parentList: Int32Array;\n  vectorSettings: Vec4[];\n  shapeMutatorMapping: Record<string, number>;\n  mutatorMapping: Record<string, number>;\n} => {\n  const mutatorIndices: { name: string; index: number; parent: number }[] = [];\n  const mutators: Vec4[] = [];\n\n  const mutatorMapping: Record<string, number> = {};\n\n  visitShapes(shapes, (item, parents) => {\n    if (isMutationVector(item)) {\n      const value = mutatorToVec4(item);\n      const index = mutators.length;\n      mutators.push(value);\n\n      const parentMutation = getParentMutation(parents, item);\n      const mutatorIndex =\n        parentMutation === null\n          ? -1\n          : mutatorIndices.findIndex((e) => e.name === parentMutation.name);\n      mutatorIndices.push({ name: item.name, index, parent: mutatorIndex });\n      mutatorMapping[item.name] = mutatorIndex;\n    }\n  });\n\n  const shapeMutatorMapping: Record<string, number> = {};\n  visitShapes(shapes, (item, parents) => {\n    if (isShapeDefinition(item)) {\n      const parentMutation = getParentMutation(parents.concat(item));\n      const mutatorIndex =\n        parentMutation === null\n          ? -1\n          : mutatorIndices.findIndex((e) => e.name === parentMutation.name);\n\n      shapeMutatorMapping[item.name] = mutatorIndex;\n    }\n  });\n\n  const parentList = new Int32Array(mutators.length);\n  mutatorIndices.forEach((item, index) => {\n    parentList[index] = item.parent;\n  });\n\n  return {\n    mutatorMapping,\n    parentList,\n    vectorSettings: mutators,\n    shapeMutatorMapping,\n  };\n};\n\nconst convertAnimations = (\n  imageDefinition: ImageDefinition\n): PreparedAnimation[] => {\n  const controlNames = imageDefinition.controls.map((c) => c.name);\n  return imageDefinition.animations.map<PreparedAnimation>((a) => {\n    const tracks: [number, Float32Array][] = [];\n    const events: [number, string][] = [];\n\n    const trackControls = a.keyframes\n      .reduce<string[]>((result, frame) => {\n        if (frame.event) {\n          events.push([frame.time, frame.event]);\n        }\n        return result.concat(Object.keys(frame.controlValues));\n      }, [])\n      .filter((v, i, l) => l.indexOf(v) === i);\n\n    trackControls.forEach((controlName) => {\n      const frames: Vec2[] = [];\n      a.keyframes.forEach((frame) => {\n        const value = frame.controlValues[controlName];\n        if (value !== undefined) {\n          frames.push([frame.time, value]);\n        }\n      });\n      tracks.push([\n        controlNames.indexOf(controlName),\n        new Float32Array(flatten(frames)),\n      ]);\n    });\n\n    return {\n      name: a.name,\n      duration:\n        a.keyframes.length === 0 ? 0 : a.keyframes[a.keyframes.length - 1].time,\n      looping: a.looping,\n      tracks,\n      events,\n    };\n  });\n};\n\nexport type PreparedControl = {\n  name: string;\n  steps: number;\n};\n\nexport type PreparedShape = {\n  name: string;\n  start: number;\n  amount: number;\n  mutator: number;\n  x: number;\n  y: number;\n  z: number;\n};\n\nexport type PreparedAnimation = {\n  name: string;\n  duration: number;\n  looping: boolean;\n  tracks: [number, Float32Array][];\n  events: [number, string][];\n};\n\nexport enum MixMode {\n  MULTIPLY,\n  ADD,\n  HUE,\n}\n\ntype DirectControl = {\n  mutation: number;\n  control: number;\n  stepType: number;\n  mixMode: MixMode;\n  trackX: Float32Array;\n  trackY: Float32Array;\n};\n\nexport type PreparedImageDefinition = {\n  directControls: DirectControl[];\n  mutators: PreparedFloatBuffer;\n  mutatorParents: PreparedIntBuffer;\n  mutationValues: PreparedFloatBuffer;\n  controlMutationValues: PreparedFloatBuffer;\n  mutationValueIndices: PreparedFloatBuffer;\n  controlMutationIndices: PreparedFloatBuffer;\n  shapeVertices: PreparedFloatBuffer;\n  shapeIndices: Uint16Array;\n  shapes: PreparedShape[];\n  maxIteration: number;\n  controls: PreparedControl[];\n  defaultControlValues: Float32Array;\n  animations: PreparedAnimation[];\n};\n\nconst getMixMode = (mutType: number): MixMode =>\n  mutType === vectorTypeMapping.stretch ||\n  mutType === vectorTypeMapping.lightness ||\n  mutType === vectorTypeMapping.saturation ||\n  mutType === vectorTypeMapping.opacity\n    ? MixMode.MULTIPLY\n    : mutType === vectorTypeMapping.colorize\n    ? MixMode.HUE\n    : MixMode.ADD;\n\nconst SUPPORTED_VERSIONS = [\"1.0\", \"1.1\"];\n\n/**\n * Convert the JSON based input animation file into a preprocessed list of buffers to place into WebGL\n *\n * @param imageDefinition\n * @returns PreparedAnimation\n */\nexport const prepareAnimation = (\n  imageDefinition: ImageDefinition\n): PreparedImageDefinition => {\n  if (!SUPPORTED_VERSIONS.includes(imageDefinition.version)) {\n    throw new Error(\n      `Version ${imageDefinition.version} files are not supported`\n    );\n  }\n\n  const elements: PreparedShape[] = [];\n  const vertices: Vec4[] = [];\n  const indices: number[] = [];\n\n  visitShapes(imageDefinition.shapes, (shape) => {\n    if (shape.type !== \"sprite\") return;\n\n    const anchor = getAnchor(shape);\n    const shapeIndices = fileredTriangles(shape.points);\n    const itemOffset = [...shape.translate, elements.length * 0.1];\n    const offset = vertices.length;\n\n    elements.push({\n      name: shape.name,\n      start: indices.length * 2,\n      amount: shapeIndices.length,\n      mutator: 0,\n      x: itemOffset[0],\n      y: itemOffset[1],\n      z: -0.9 + itemOffset[2] * 0.0001,\n    });\n\n    shape.points.forEach(([x, y]) => {\n      vertices.push([x - anchor[0], y - anchor[1], x, y]);\n    });\n\n    shapeIndices.forEach((index) => {\n      indices.push(index + offset);\n    });\n  });\n\n  const mutatorInfo = createMutationList(imageDefinition.shapes);\n  const mutatorCount = mutatorInfo.parentList.length;\n  const mutators = Object.keys(mutatorInfo.mutatorMapping);\n  const controls: PreparedControl[] = [];\n\n  const mutationValues = new Float32Array(mutatorCount * 2);\n  Object.entries(imageDefinition.defaultFrame).forEach(([key, value]) => {\n    const index = mutators.indexOf(key);\n    if (index === -1) return;\n    mutationValues[index * 2] = value[0];\n    mutationValues[index * 2 + 1] = value[1];\n  });\n\n  type ControlData = {\n    name: string;\n    controlIndex: number;\n    valueStartIndex: number;\n    values: Vec2[];\n    stepType: number;\n  };\n\n  type MutationControl = {\n    [key: number]: ControlData[];\n  };\n\n  const controlMutationValueList: Vec2[] = [];\n  const mutationValueIndicesList: Vec3[] = [];\n  const controlMutationIndicesList: Vec2[] = [];\n\n  elements.forEach((element) => {\n    element.mutator = mutatorInfo.shapeMutatorMapping[element.name];\n  });\n  elements.sort((a, b) => (b.z || 0) - (a.z || 0));\n\n  const controlValues = new Float32Array(imageDefinition.controls.length);\n  const mutationControlData: MutationControl =\n    imageDefinition.controls.reduce<MutationControl>(\n      (result, control, index) => {\n        const controlMutations = control.steps.reduce<string[]>(\n          (result, frame) =>\n            result.concat(\n              Object.keys(frame).filter((name) => !result.includes(name))\n            ),\n          []\n        );\n        controls.push({\n          name: control.name,\n          steps: control.steps.length,\n        });\n        controlValues[index] = imageDefinition.controlValues[control.name];\n        controlMutations.forEach((mutation) => {\n          const index = mutators.indexOf(mutation);\n          const values: Vec2[] = control.steps.map((k) => k[mutation]);\n          const controlIndex =\n            imageDefinition?.controls.findIndex(\n              (c) => c.name === control.name\n            ) || 0;\n\n          const controlData: ControlData = {\n            name: control.name,\n            controlIndex,\n            valueStartIndex: 0,\n            values,\n            stepType: 0,\n          };\n\n          result = {\n            ...result,\n            [index]: (result[index] || []).concat(controlData),\n          };\n        });\n        return result;\n      },\n      {}\n    );\n\n  controlMutationIndicesList.length = mutatorInfo.vectorSettings.length;\n  controlMutationIndicesList.fill([0, 0]);\n\n  let maxIteration = 0;\n  const directControls: DirectControl[] = [];\n\n  Object.entries(mutationControlData).forEach(([keyAsString, controls]) => {\n    const key = parseInt(keyAsString, 10);\n    if (controls.length === 1) {\n      const control = controls[0];\n      const mutType = mutatorInfo.vectorSettings[key][0];\n\n      directControls.push({\n        mutation: key,\n        mixMode: getMixMode(mutType),\n        control: control.controlIndex,\n        stepType: control.stepType,\n        trackX: new Float32Array(\n          control.values.reduce<number[]>(\n            (result, element, index) => result.concat(index, element[0]),\n            []\n          )\n        ),\n        trackY: new Float32Array(\n          control.values.reduce<number[]>(\n            (result, element, index) => result.concat(index, element[1]),\n            []\n          )\n        ),\n      });\n      return;\n    }\n    if (controls.length === 0) {\n      return;\n    }\n    for (const control of controls) {\n      control.valueStartIndex = controlMutationValueList.length;\n      controlMutationValueList.push(...control.values);\n    }\n\n    const items: Vec3[] = controls.map<Vec3>((d) => [\n      d.valueStartIndex,\n      d.controlIndex,\n      d.stepType,\n    ]);\n\n    controlMutationIndicesList[key] = [\n      mutationValueIndicesList.length,\n      items.length,\n    ];\n    maxIteration = Math.max(maxIteration, items.length);\n    mutationValueIndicesList.push(...items);\n  });\n\n  return {\n    directControls,\n    mutators: vectorArrayToPreparedFloatBuffer(mutatorInfo.vectorSettings),\n    mutatorParents: {\n      data: mutatorInfo.parentList,\n      length: mutatorInfo.parentList.length,\n      stride: 1,\n    },\n    mutationValues: {\n      data: mutationValues,\n      length: mutatorInfo.parentList.length,\n      stride: 2,\n    },\n    controlMutationValues: vectorArrayToPreparedFloatBuffer(\n      controlMutationValueList\n    ),\n    mutationValueIndices: vectorArrayToPreparedFloatBuffer(\n      mutationValueIndicesList\n    ),\n    controlMutationIndices: vectorArrayToPreparedFloatBuffer(\n      controlMutationIndicesList\n    ),\n    defaultControlValues: controlValues,\n    shapeVertices: vectorArrayToPreparedFloatBuffer(vertices),\n    shapeIndices: new Uint16Array(indices),\n    shapes: elements,\n    controls,\n    maxIteration,\n    animations: convertAnimations(imageDefinition),\n  };\n};\n","import {\n  MutationVector,\n  ShapeMutationVector,\n  ColorMutationVector,\n  ShapeDefinition,\n} from \"./types\";\n\ninterface ItemWithType {\n  type: string;\n}\n\nexport const isShapeDefinition = (\n  item: ItemWithType\n): item is ShapeDefinition => item.type === \"folder\" || item.type === \"sprite\";\n\nexport const isMutationVector = (item: ItemWithType): item is MutationVector =>\n  isShapeVector(item) || isColorVector(item);\n\nconst isShapeVector = (item: ItemWithType): item is ShapeMutationVector =>\n  item.type === \"deform\" ||\n  item.type === \"rotate\" ||\n  item.type === \"translate\" ||\n  item.type === \"stretch\" ||\n  item.type === \"opacity\";\n\nconst isColorVector = (item: ItemWithType): item is ColorMutationVector =>\n  item.type === \"lightness\" ||\n  item.type === \"saturation\" ||\n  item.type === \"colorize\";\n\nexport const visitShapes = (\n  shapes: ShapeDefinition[],\n  visitor: (\n    item: ShapeDefinition | MutationVector,\n    parents: (ShapeDefinition | MutationVector)[]\n  ) => void,\n  parents: (ShapeDefinition | MutationVector)[] = []\n): void => {\n  for (const shape of shapes) {\n    visitor(shape, parents);\n    for (const mutator of shape.mutationVectors) {\n      visitor(mutator, [...parents, shape]);\n    }\n    if (shape.type === \"folder\") {\n      visitShapes(shape.items, visitor, [...parents, shape]);\n    }\n  }\n};\n","import { PreparedImageDefinition } from \"src/prepareAnimation\";\nimport shader from \"./vertexShader-min.vert\";\n\nconst minOne = (n: number) => Math.max(n, 1);\n\nexport const animationVertexShader = (\n  animation: PreparedImageDefinition\n): string => `\n#define MAX_MUT ${minOne(animation.mutators.length)}\n#define MAX_IT ${animation.maxIteration}\nuniform vec2 uControlMutValues[${minOne(\n  animation.controlMutationValues.length\n)}];\nuniform vec3 uMutValueIndices[${minOne(animation.mutationValueIndices.length)}];\nuniform vec2 uControlMutIndices[${minOne(\n  animation.controlMutationIndices.length\n)}];\nuniform float uControlValues[${minOne(animation.controls.length)}];\n${shader}\n`;\n","export const mix = (a: number, b: number, factor: number): number =>\n  a * (1 - factor) + b * factor;\n\nexport const mixHue = (a: number, b: number, factor: number): number => {\n  const d = Math.abs(a - b);\n  let aa = a;\n  let ba = b;\n\n  if (a < b && Math.abs(a + 1 - b) < d) {\n    aa += 1;\n  }\n  if (a > b && Math.abs(b - a + 1) < d) {\n    ba += 1;\n  }\n  return mix(aa, ba, factor) % 1;\n};\n\nexport const interpolateFloat = (\n  track: Float32Array,\n  position: number,\n  startValue = 0,\n  mixer = mix\n): number => {\n  for (let i = 0; i < track.length; i += 2) {\n    if (track[i] > position) {\n      const previousPos = i > 1 ? track[i - 2] : 0;\n      const previousValue = i > 1 ? track[i - 1] : startValue;\n      const mix = (position - previousPos) / (track[i] - previousPos);\n      return mixer(previousValue, track[i + 1], mix);\n    }\n  }\n\n  return track[track.length - 1];\n};\n","import { PreparedFloatBuffer, PreparedIntBuffer } from \"./buffer\";\nimport { MixMode, PreparedImageDefinition } from \"./prepareAnimation\";\nimport animationFragmentShader from \"./shaders/fragmentShader-min.frag\";\nimport { animationVertexShader } from \"./shaders/vertexShader\";\nimport { interpolateFloat, mixHue } from \"./vertices\";\n\n/**\n * Function to call for unsubscribing to an event listener\n */\nexport type Unsubscribe = () => void;\n\nexport type TrackStoppedCallback = (track: string) => void;\nexport type CustomEventCallback = (\n  eventName: string,\n  track: string,\n  time: number\n) => void;\n\nexport type PlayOptions = {\n  /**\n   * Start animation at given ms.\n   */\n  startAt?: number;\n  /**\n   * Playback speed.\n   * @default 1.0\n   */\n  speed?: number;\n};\n\n/**\n * Options to control the animation, start animation tracks, etc.\n */\nexport type AnimationControls = {\n  /**\n   * Render a frame of the image.\n   */\n  render(): void;\n\n  /**\n   * Set the looping state of an animation track.\n   *\n   * The default value is based on how the animation is build.\n   *\n   * @param loop true for looping, false to stop looping.\n   * @param trackName the name of the animation track to adjust.\n   * @throws an error if the provided trackName does not exist\n   */\n  setLooping(loop: boolean, trackName: string): void;\n\n  /**\n   * Start an animation. Conflicting animations will be automatically stopped.\n   *\n   * @param trackName the name of the animation track to start.\n   * If the name is not valid, an exception will be thrown\n   * indicating what animation names are available.\n   * @throws an error if the provided trackName does not exist\n   */\n  startTrack(trackName: string, options?: PlayOptions): void;\n\n  /**\n   * Stop an animation.\n   *\n   * @param trackName the name of the animation track to start.\n   * If the name is not valid, an exception will be thrown\n   * indicating what animation names are available.\n   */\n  stopTrack(trackName: string): void;\n\n  /**\n   * Manipulates a control. Will stop animations that are using this control as well.\n   *\n   * @param controlName name of the control to change\n   * @param value value to set for control. Take into account that each control can have different\n   * value limits, depending on the amount of step a control has.\n   * @throws an error if the provided controlName does not exist\n   */\n  setControlValue(controlName: string, value: number): void;\n\n  /**\n   * Retreives current value of a control. This value will not update for each frame\n   * of an animation. It will only update at the end of each play iteration of an animation.\n   *\n   * @param controlName name of the control to get value from\n   * @return value of the control. Take into account that each control can have different\n   * value limits, depending on the amount of step a control has.\n   */\n  getControlValue(controlName: string): number;\n\n  /**\n   * Update the panning of the animation.\n   *\n   * @param panX value of horizontal panning. `0` = center, `-1` = left, `1` = right.\n   * @param panY value of vertical panning. `0` = center, `-1` = bottom, `1` = top.\n   */\n  setPanning(panX: number, panY: number): void;\n\n  /**\n   * Updates the zoom level.\n   *\n   * @param zoom `1` = 100%, `1.5` is 150%, `0.5` = 50% zoom.\n   */\n  setZoom(zoom: number): void;\n\n  /**\n   * Changes the rendering order of animations.\n   *\n   * @param zIndex The index number for rendering.\n   * The higher the number, the more in the front the element will be stacked.\n   */\n  setZIndex(zIndex: number): void;\n\n  /**\n   * Register a callback to get notifications when a track is stopped.\n   * A track can be stopped for the following reasons.\n   *\n   * - A control is used that is conflicting with an animation track.\n   * - Another track is started that is conflicting with an animation track.\n   * - A track is stopped using `stopTrack`\n   *\n   * @param callback function to call when tracks are stopped.\n   * The first argument will be the trackname.\n   * @returns a function to call to unsubscribe\n   */\n  onTrackStopped(callback: TrackStoppedCallback): Unsubscribe;\n\n  /**\n   * Register a callback to get notifications when an event is triggered.\n   * Events can be defined in an animation.\n   *\n   * @param callback function that gets called whenever an event happens.\n   * It passes in the eventName, track and time.\n   * @returns a function to call to unsubscribe\n   */\n  onEvent(callback: CustomEventCallback): Unsubscribe;\n\n  /**\n   * Clears all memory associated to this animation.\n   */\n  destroy(): void;\n};\n\n/**\n * Options to set directly when adding an animation.\n */\nexport interface AnimationOptions {\n  /**\n   * Horizontal position of image in canvas. `0` = center, `-1` = left, `1` = right.\n   *\n   * @default 0.0\n   */\n  panX: number;\n  /**\n   * Vertical position of image in canvas. `0` = center, `-1` = bottom, `1` = top.\n   *\n   * @default 0.0\n   */\n  panY: number;\n  /**\n   * Zoom level. `1` = 100%, `1.5` is 150%, `0.5` = 50% zoom.\n   *\n   * @default 1.0\n   */\n  zoom: number;\n  /**\n   * Adds a stacking order to the rendering elements, this helps when\n   * stacking multiple animations on top of eachother.\n   *\n   * @default 0\n   */\n  zIndex: number;\n}\n\nconst DEFAULT_OPTIONS: AnimationOptions = {\n  zoom: 1.0,\n  panX: 0.0,\n  panY: 0.0,\n  zIndex: 0,\n};\n\ntype PlayStatus = {\n  name: string;\n  index: number;\n  startAt: number;\n  speed: number;\n  startedAt: number;\n  iterationStartedAt: number;\n  lastRender: number;\n};\n\n/**\n * A player to add Gepetto animations to.\n */\nexport type GeppettoPlayer = {\n  /**\n   * Clears the canvas. Use this when you created the player with {@link setupWebGL}.\n   * If you want to control the rendering process (and the clearing of the canvas) yourself,\n   * skip the call to this method in your render cycle.\n   */\n  render(): void;\n\n  /**\n   * Add a Geppetto animation to the player.\n   *\n   * @param animation an animation prepared with {@link prepareAnimation}.\n   * @param image a HTML Image element with loaded url to use as texture.\n   * @param textureUnit The texture unit to use you can use `0` for your first animation,\n   * `1` for your second, etc.\n   * @param options\n   */\n  addAnimation(\n    animation: PreparedImageDefinition,\n    image: HTMLImageElement,\n    textureUnit: number,\n    options?: Partial<AnimationOptions>\n  ): AnimationControls;\n\n  /**\n   * Destroys all animations added to this player.\n   */\n  destroy: () => void;\n};\n\nconst getContext = (element: HTMLCanvasElement): WebGLRenderingContext => {\n  const gl = element.getContext(\"webgl\", {\n    premultipliedalpha: true,\n    depth: true,\n    antialias: true,\n    powerPreference: \"low-power\",\n  }) as WebGLRenderingContext;\n\n  if (!gl) {\n    throw new Error(\"Canvas has no webgl context available\");\n  }\n  return gl;\n};\n\n/**\n * Initializes the WebGL Context of a provided context. Configures the context and returns\n * a GeppettoPlayer bound to this element.\n *\n * Use this method if you only render Geppetto Animations in your Canvas.\n * Use {@link createPlayer} if you want your own control over the canvas configuration\n *\n * @param element the Canvas DOM element that is not yet initialized with a context\n */\nexport const setupWebGL = (element: HTMLCanvasElement): GeppettoPlayer => {\n  const gl = getContext(element);\n\n  gl.clearColor(0.0, 0.0, 0.0, 1.0);\n  gl.enable(gl.DEPTH_TEST);\n  gl.enable(gl.BLEND);\n  gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n  return createPlayer(element);\n};\n\nconst setupWebGLProgram = (\n  gl: WebGLRenderingContext,\n  animation: PreparedImageDefinition\n): [WebGLProgram, WebGLShader, WebGLShader] => {\n  const program = gl.createProgram();\n  if (!program) throw new Error(\"Failed to create shader program\");\n\n  const vertexShaderSource = animationVertexShader(animation);\n\n  const vs = gl.createShader(gl.VERTEX_SHADER);\n  const fs = gl.createShader(gl.FRAGMENT_SHADER);\n  if (!vs || !fs) {\n    gl.deleteProgram(program);\n    gl.deleteShader(vs);\n    gl.deleteShader(fs);\n    throw new Error(\"Failed to create shader program\");\n  }\n\n  gl.shaderSource(vs, vertexShaderSource);\n  gl.shaderSource(fs, animationFragmentShader);\n  gl.compileShader(vs);\n  gl.compileShader(fs);\n\n  gl.attachShader(program, vs);\n  gl.attachShader(program, fs);\n  gl.linkProgram(program);\n\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n    console.error(\"Link failed: \" + gl.getProgramInfoLog(program));\n    console.error(\"vs info-log: \" + gl.getShaderInfoLog(vs));\n    console.error(\"fs info-log: \" + gl.getShaderInfoLog(fs));\n    throw new Error(\"Could not initialise shaders\");\n  }\n\n  return [program, vs, fs];\n};\n\nconst setProgramBuffer =\n  (gl: WebGLRenderingContext, program: WebGLProgram) =>\n  (uniform: string, buffer: PreparedFloatBuffer | PreparedIntBuffer) => {\n    const uniformLocation = gl.getUniformLocation(program, uniform);\n    const stride = buffer.stride;\n\n    if (stride == 2) {\n      gl.uniform2fv(uniformLocation, buffer.data);\n    } else if (stride == 3) {\n      gl.uniform3fv(uniformLocation, buffer.data);\n    } else if (stride == 4) {\n      gl.uniform4fv(uniformLocation, buffer.data);\n    }\n    return uniformLocation;\n  };\n\nconst setupTexture = (\n  gl: WebGLRenderingContext,\n  program: WebGLProgram,\n  image: HTMLImageElement\n): WebGLTexture | null => {\n  const texture = gl.createTexture();\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n  gl.useProgram(program);\n  gl.uniform2f(\n    gl.getUniformLocation(program, \"uTextureDimensions\"),\n    image.width,\n    image.height\n  );\n\n  return texture;\n};\n\nlet animId = 0;\n// A few extra milliseconds to make sure the last frame of an animation is rendered,\n// preventing visual artifacts\nconst ENDING_MARGIN = 4;\n\n/**\n * Initializes a player to display in an existing WebGL Environment.\n * Use this function to create a player if you want to have full control over the\n * rendering process (possibly to combine with other render code).\n *\n * @param element the Canvas DOM element containing a WebGL Context\n */\nexport const createPlayer = (element: HTMLCanvasElement): GeppettoPlayer => {\n  const gl = getContext(element);\n\n  const animations: AnimationControls[] = [];\n  let onTrackStoppedListeners: {\n    animation: number;\n    callback: TrackStoppedCallback;\n  }[] = [];\n  let onCustomEventListeners: CustomEventCallback[] = [];\n\n  return {\n    render: () => {\n      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n      gl.viewport(0, 0, element.width, element.height);\n    },\n    addAnimation: (animation, image, textureUnit, options) => {\n      const id = ++animId;\n      const unit = [\n        gl.TEXTURE0,\n        gl.TEXTURE1,\n        gl.TEXTURE2,\n        gl.TEXTURE3,\n        gl.TEXTURE4,\n        gl.TEXTURE5,\n        gl.TEXTURE6,\n        gl.TEXTURE7,\n        gl.TEXTURE8,\n        gl.TEXTURE9,\n      ][textureUnit];\n      const [program, vs, fs] = setupWebGLProgram(gl, animation);\n      // 3. Load texture\n      gl.useProgram(program);\n      const texture = setupTexture(gl, program, image);\n\n      // 4. Set Uniforms\n      const parentLocation = gl.getUniformLocation(program, \"uMutParent\");\n      gl.uniform1iv(parentLocation, animation.mutatorParents.data);\n\n      const setBuffer = setProgramBuffer(gl, program);\n      const mutationValuesLocation = setBuffer(\n        \"uMutValues\",\n        animation.mutationValues\n      );\n      setBuffer(\"uMutVectors\", animation.mutators);\n      setBuffer(\"uControlMutValues\", animation.controlMutationValues);\n      setBuffer(\"uMutValueIndices\", animation.mutationValueIndices);\n      setBuffer(\"uControlMutIndices\", animation.controlMutationIndices);\n\n      const uControlValues = gl.getUniformLocation(program, \"uControlValues\");\n      gl.uniform1fv(uControlValues, animation.defaultControlValues);\n\n      const controlValues = new Float32Array(animation.defaultControlValues);\n      const renderControlValues = new Float32Array(\n        animation.defaultControlValues\n      );\n\n      // 5. Set shape buffers\n      const vertexBuffer = gl.createBuffer();\n      const indexBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n      gl.bufferData(\n        gl.ARRAY_BUFFER,\n        animation.shapeVertices.data,\n        gl.STATIC_DRAW\n      );\n      gl.bindBuffer(gl.ARRAY_BUFFER, null);\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n      gl.bufferData(\n        gl.ELEMENT_ARRAY_BUFFER,\n        animation.shapeIndices,\n        gl.STATIC_DRAW\n      );\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n\n      // Get locations for rendering\n      const uBasePosition = gl.getUniformLocation(program, \"basePosition\");\n      const uTranslate = gl.getUniformLocation(program, \"translate\");\n      const uMutation = gl.getUniformLocation(program, \"mutation\");\n      const uViewport = gl.getUniformLocation(program, \"viewport\");\n      const uScale = gl.getUniformLocation(program, \"scale\");\n\n      const aCoord = gl.getAttribLocation(program, \"coordinates\");\n      const aTexCoord = gl.getAttribLocation(program, \"aTextureCoord\");\n\n      let cWidth = 0,\n        cHeight = 0;\n\n      let { zoom, panX, panY, zIndex } = { ...DEFAULT_OPTIONS, ...options };\n      let basePosition = [0, 0];\n      let scale = 1.0;\n\n      const playingAnimations: PlayStatus[] = [];\n      const trackNames = animation.animations.map((a) => a.name);\n      const controlNames = animation.controls.map((a) => a.name);\n      const looping: boolean[] = animation.animations.map((a) => a.looping);\n\n      const stopTrack = (track: string): void => {\n        // Remove from playing list\n        const playingIndex = playingAnimations.findIndex(\n          (e) => e.name === track\n        );\n        if (playingIndex === -1) return;\n        const playing = playingAnimations[playingIndex];\n\n        const now = +new Date();\n        let playTime = now - playing.startedAt + playing.startAt;\n\n        const playingAnimation = animation.animations[playing.index];\n        if (looping[playing.index]) {\n          playTime %= playingAnimation.duration;\n        }\n        playingAnimations.splice(playingIndex, 1);\n\n        // place current active control values in control values list\n        for (const [controlIndex, track] of playingAnimation.tracks) {\n          const value = interpolateFloat(\n            track,\n            playTime,\n            controlValues[controlIndex]\n          );\n          controlValues[controlIndex] = value;\n        }\n\n        for (const listener of onTrackStoppedListeners) {\n          if (listener.animation === id) listener.callback(track);\n        }\n      };\n\n      const nameToControlIndex = (controlName: string): number => {\n        const controlIndex = controlNames.indexOf(controlName);\n        if (controlIndex === -1) {\n          throw new Error(\n            `Control ${controlName} does not exist in ${controlNames.join(\",\")}`\n          );\n        }\n        return controlIndex;\n      };\n\n      const nameToTrackIndex = (trackName: string): number => {\n        const trackIndex = trackNames.indexOf(trackName);\n        if (trackIndex === -1) {\n          throw new Error(\n            `Track ${trackName} does not exist in ${trackNames.join(\",\")}`\n          );\n        }\n        return trackIndex;\n      };\n\n      const setControlValue: AnimationControls[\"setControlValue\"] = (\n        control,\n        value\n      ) => {\n        const controlIndex = nameToControlIndex(control);\n\n        const maxValue = animation.controls[controlIndex].steps - 1;\n        if (value < 0 || value > maxValue) {\n          throw new Error(\n            `Control ${control} value shoulde be between 0 and ${maxValue}. ${value} is out of bounds.`\n          );\n        }\n        // stop all conflicting tracks\n        for (const playing of playingAnimations) {\n          const playingAnimation = animation.animations[playing.index];\n          if (\n            playingAnimation.tracks.some(\n              ([controlNr]) => controlNr === controlIndex\n            )\n          ) {\n            stopTrack(trackNames[playing.index]);\n          }\n        }\n\n        controlValues[controlIndex] = value;\n        renderControlValues[controlIndex] = value;\n      };\n\n      const newAnimation: AnimationControls = {\n        destroy() {\n          gl.deleteShader(vs);\n          gl.deleteShader(fs);\n          gl.deleteProgram(program);\n          gl.deleteTexture(texture);\n          gl.deleteBuffer(vertexBuffer);\n          gl.deleteBuffer(indexBuffer);\n          animations.splice(animations.indexOf(newAnimation), 1);\n        },\n        setLooping(loop, track) {\n          const trackIndex = nameToTrackIndex(track);\n          looping[trackIndex] = loop;\n        },\n        startTrack(track, { startAt = 0, speed = 1 } = {}) {\n          const trackIndex = nameToTrackIndex(track);\n          const animationControls = animation.animations[trackIndex].tracks.map(\n            ([controlNr]) => controlNr\n          );\n\n          // stop all conflicting tracks\n          for (const playing of playingAnimations) {\n            const playingAnimation = animation.animations[playing.index];\n            if (\n              playingAnimation.tracks.some(([controlNr]) =>\n                animationControls.includes(controlNr)\n              )\n            ) {\n              stopTrack(trackNames[playing.index]);\n            }\n          }\n\n          playingAnimations.push({\n            name: track,\n            index: trackIndex,\n            startAt,\n            speed,\n            startedAt: +new Date(),\n            iterationStartedAt: +new Date() - startAt / speed,\n            lastRender: 0,\n          });\n        },\n        stopTrack,\n        setControlValue,\n        getControlValue: (controlName) =>\n          controlValues[nameToControlIndex(controlName)],\n        setPanning(newPanX, newPanY) {\n          panX = newPanX;\n          panY = newPanY;\n        },\n        setZoom(newZoom) {\n          zoom = newZoom;\n        },\n        setZIndex(newZIndex) {\n          zIndex = newZIndex;\n        },\n        render() {\n          gl.useProgram(program);\n          gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n\n          gl.vertexAttribPointer(\n            aCoord,\n            2,\n            gl.FLOAT,\n            false,\n            Float32Array.BYTES_PER_ELEMENT * 4,\n            /* offset */ 0\n          );\n          gl.enableVertexAttribArray(aCoord);\n          gl.vertexAttribPointer(\n            aTexCoord,\n            2,\n            gl.FLOAT,\n            false,\n            Float32Array.BYTES_PER_ELEMENT * 4,\n            /* offset */ 2 * Float32Array.BYTES_PER_ELEMENT\n          );\n          gl.enableVertexAttribArray(aTexCoord);\n\n          if (element.width !== cWidth || element.height !== cHeight) {\n            const canvasWidth = element.width;\n            const canvasHeight = element.height;\n            const landscape =\n              image.width / canvasWidth > image.height / canvasHeight;\n\n            scale = landscape\n              ? canvasWidth / image.width\n              : canvasHeight / image.height;\n\n            gl.uniform2f(uViewport, canvasWidth, canvasHeight);\n\n            basePosition = [canvasWidth / 2 / scale, canvasHeight / 2 / scale];\n            cWidth = element.width;\n            cHeight = element.height;\n          }\n\n          gl.uniform4f(uScale, scale, zoom, panX, panY);\n\n          gl.activeTexture(unit);\n          gl.bindTexture(gl.TEXTURE_2D, texture);\n          gl.uniform1i(gl.getUniformLocation(program, \"uSampler\"), textureUnit);\n\n          gl.uniform3f(\n            uBasePosition,\n            basePosition[0],\n            basePosition[1],\n            zIndex * 0.01\n          );\n\n          const now = +new Date();\n          for (const playing of playingAnimations) {\n            const playTime = (now - playing.iterationStartedAt) * playing.speed;\n            const playingAnimation = animation.animations[playing.index];\n\n            const playPosition = playTime % playingAnimation.duration;\n\n            if (playingAnimation.duration < playTime + ENDING_MARGIN) {\n              if (!looping[playing.index]) {\n                stopTrack(playingAnimation.name);\n                continue;\n              }\n              // Store current value as start value of next iteration\n              for (const [controlIndex] of playingAnimation.tracks) {\n                controlValues[controlIndex] = renderControlValues[controlIndex];\n              }\n              playing.iterationStartedAt = now - playPosition;\n            }\n\n            for (const [time, event] of playingAnimation.events) {\n              const absTime = playing.iterationStartedAt + time / playing.speed;\n              if (absTime < now && absTime > playing.lastRender) {\n                for (const handler of onCustomEventListeners) {\n                  handler(event, playing.name, time);\n                }\n              }\n            }\n            playing.lastRender = now;\n\n            for (const [controlIndex, track] of playingAnimation.tracks) {\n              const value = interpolateFloat(\n                track,\n                playPosition,\n                controlValues[controlIndex]\n              );\n              renderControlValues[controlIndex] = value;\n            }\n          }\n          const updatedMutationValues = Float32Array.from(\n            animation.mutationValues.data\n          );\n          for (const data of animation.directControls) {\n            const ctrlValue = renderControlValues[data.control];\n            const xValue = interpolateFloat(data.trackX, ctrlValue);\n            const yValue = interpolateFloat(data.trackY, ctrlValue);\n            if (data.mixMode === MixMode.MULTIPLY) {\n              updatedMutationValues[data.mutation * 2] *= xValue;\n              updatedMutationValues[data.mutation * 2 + 1] *= yValue;\n            } else if (data.mixMode === MixMode.ADD) {\n              updatedMutationValues[data.mutation * 2] += xValue;\n              updatedMutationValues[data.mutation * 2 + 1] += yValue;\n            } else {\n              const hue = interpolateFloat(data.trackX, ctrlValue, 0, mixHue);\n              updatedMutationValues[data.mutation * 2] = hue;\n              updatedMutationValues[data.mutation * 2 + 1] *= yValue;\n            }\n          }\n          gl.uniform2fv(mutationValuesLocation, updatedMutationValues);\n\n          gl.uniform1fv(uControlValues, renderControlValues);\n\n          for (const shape of animation.shapes) {\n            gl.uniform3f(uTranslate, shape.x, shape.y, shape.z);\n            gl.uniform1f(uMutation, shape.mutator);\n            gl.drawElements(\n              gl.TRIANGLES,\n              shape.amount,\n              gl.UNSIGNED_SHORT,\n              shape.start\n            );\n          }\n        },\n        onTrackStopped(callback) {\n          onTrackStoppedListeners = onTrackStoppedListeners.concat({\n            animation: id,\n            callback,\n          });\n          return () => {\n            onTrackStoppedListeners = onTrackStoppedListeners.filter(\n              (item) => item.callback !== callback\n            );\n          };\n        },\n        onEvent(callback) {\n          onCustomEventListeners = onCustomEventListeners.concat(callback);\n          return () => {\n            onCustomEventListeners = onCustomEventListeners.filter(\n              (item) => item !== callback\n            );\n          };\n        },\n      };\n      animations.push(newAnimation);\n\n      return newAnimation;\n    },\n    destroy() {\n      for (const anim of animations) {\n        anim.destroy();\n      }\n      animations.length = 0;\n    },\n  };\n};\n","#define A 0.017453292519943295\nuniform vec2 viewport;uniform vec3 basePosition;uniform vec3 translate;uniform float mutation;uniform vec4 scale;uniform vec2 uMutValues[MAX_MUT];uniform vec4 uMutVectors[MAX_MUT];uniform int uMutParent[MAX_MUT];attribute vec2 coordinates;attribute vec2 aTextureCoord;varying lowp vec2 vTextureCoord;varying lowp float vOpacity;varying lowp float vBrightness;varying lowp float vSaturation;varying lowp float vTargetHue;varying lowp float vTargetSaturation;mat4 B=mat4(2./viewport.x,0,0,0,0,-2./viewport.y,0,0,0,0,1,0,-1,+1,0,1);float C(float D,float E,float F){float G=abs(D-E);float H=D;float I=E;if(D<E&&abs(D+1.-E)<G){H=D+1.;}if(D>E&&abs(E-D+1.)<G){I=E+1.;}return mod(mix(H,I,F),1.);}vec2 J(int K,int L){vec2 M=uMutValues[K];vec2 N=uControlMutIndices[K];int O=int(N.x);int P=int(N.y);if(P==0){return M;}for(int Q=0;Q<MAX_IT;Q++){if(Q<P){vec3 R=uMutValueIndices[O+Q];float S=uControlValues[int(R.y)];int T=int(floor(R.x+S));int U=int(ceil(R.x+S));float V=S-floor(S);vec2 W=uControlMutValues[T];vec2 X=uControlMutValues[U];vec2 Y=mix(W,X,V);if(L==2||L==5||L==6||L==8){M*=Y;}else if(L==7){M=vec2(C(W[0],X[0],V),Y[1]);}else{M+=Y;}}else{return M;}}return M;}mat3 Z(mat3 a,int K){vec4 mutation=uMutVectors[K];int L=int(mutation.x);vec2 b=J(K,L);vec2 c=mutation.yz;vec3 M=a[0];vec3 d=a[1];vec3 e=a[2];if(L==1){float e=1.;if(mutation.a>0.&&distance(M.xy,c)>mutation.a){e=0.;}M=vec3(M.xy+b*e,M.z);}if(L==2){M=vec3(c.xy+vec2((M.x-c.x)*b.x,(M.y-c.y)*b.y),M.z);}if(L==3){float f=b.x*A;mat2 g=mat2(cos(f),sin(f),-sin(f),cos(f));M=vec3((M.xy-c)*g+c,M.z);}if(L==4){float e=1.-clamp(distance(M.xy,c),0.,mutation.a)/mutation.a;M=vec3(M.xy+b*e,M.z);}if(L==5){M=vec3(M.xy,M.z*b.x);}if(L==6){d=vec3(b.x*d.x,d.yz);}if(L==7){e=vec3(b.xy,e.z);}if(L==8){d=vec3(d.x,b.x*d.y,d.z);}return mat3(M,d,e);}mat3 h(mat3 a,int K){int i=K;mat3 M=a;for(int Q=0;Q<MAX_MUT;Q++){if(i==-1){return M;}M=Z(M,i);i=uMutParent[i];}return M;}void main(){mat3 O=mat3(coordinates+translate.xy,1.,1.,1.,0,0,0,0);mat3 j=h(O,int(mutation));vec3 k=j[0];vec3 l=j[1];vec3 m=j[2];vec4 n=B*vec4((k.xy+basePosition.xy)*scale.x,translate.z-basePosition.z,1.);gl_Position=vec4((n.xy+scale.ba)*scale.y,n.z,1.);vTextureCoord=aTextureCoord.xy;vOpacity=k.z;vBrightness=l.x;vSaturation=l.y;vTargetHue=m.x;vTargetSaturation=m.y;}","precision mediump float;varying mediump vec2 vTextureCoord;varying lowp float vOpacity;varying lowp float vBrightness;varying lowp float vSaturation;varying lowp float vTargetHue;varying lowp float vTargetSaturation;uniform sampler2D uSampler;uniform mediump vec2 uTextureDimensions;float A(vec3 B){lowp float C=min(min(B.r,B.g),B.b);lowp float D=max(max(B.r,B.g),B.b);return(D+C)/2.;}float E(lowp float F,lowp float G,lowp float H){if(H<0.)H+=1.;else if(H>1.)H-=1.;lowp float I;if((6.*H)<1.)I=F+(G-F)*6.*H;else if((2.*H)<1.)I=G;else if((3.*H)<2.)I=F+(G-F)*((2./3.)-H)*6.;else I=F;return I;}vec3 J(vec3 K){lowp vec3 L;if(K.y==0.)L=vec3(K.z);else{lowp float G;if(K.z<0.5)G=K.z*(1.+K.y);else G=(K.z+K.y)-(K.y*K.z);float F=2.*K.z-G;L.r=E(F,G,K.x+(1./3.));L.g=E(F,G,K.x);L.b=E(F,G,K.x-(1./3.));}return L;}void main(void){highp vec2 M=vTextureCoord.xy/uTextureDimensions;mediump vec4 N=texture2D(uSampler,M);vec3 B=N.rgb;float O=A(B);B=mix(mix(B,J(vec3(vTargetHue,vTargetSaturation,O)),1.-vSaturation)*clamp(vBrightness,0.,1.),vec3(1.,1.,1.),clamp(vBrightness-1.,0.,1.));gl_FragColor=vec4(B*N.a*vOpacity,N.a*vOpacity);}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"memberProps\":\"MemberStats_memberProps__3Yh-H\",\"energyBar\":\"MemberStats_energyBar__3Yb_H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"startScreen\":\"SplashScreen_startScreen__1ASwr\",\"endScreen\":\"SplashScreen_endScreen__3Wo6U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"terrain\":\"Level_terrain__1iJrW\",\"fadeout\":\"Level_fadeout__9v7sj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"arena\":\"CombatView_arena__2l160\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogBox\":\"Dialog_dialogBox__3N1Nf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"character\":\"Character_character__eccEu\",\"walking\":\"Character_walking__2-ORm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tile\":\"Tile_tile__2ux10\"};","import React, {\n  useEffect,\n  useCallback,\n  useRef,\n  useMemo,\n  useState,\n} from \"react\";\nimport className from \"../className\";\nimport {\n  enterLevel,\n  move,\n  selectCardIds,\n  selectFollowers,\n  selectPosition,\n} from \"../state/characterSlice\";\nimport { startEncounter } from \"../state/combatSlice\";\nimport { encounter, selectActiveEncounter } from \"../state/encounterSlice\";\nimport { useAppDispatch, useAppSelector } from \"../state/hooks\";\nimport { Direction, LevelData, Position, TerrainTile } from \"../types\";\nimport Character, { calculateXy } from \"./Character\";\nimport styles from \"./Level.module.css\";\nimport Tile from \"./Tile\";\nimport logo from \"./logo.png\";\n\ntype Props = {\n  data: LevelData;\n};\n\nconst preventEvents = [\n  \"Enter\",\n  \"ArrowLeft\",\n  \"ArrowUp\",\n  \"ArrowDown\",\n  \"ArrowRight\",\n  \"Space\",\n];\n\nenum MoveDirection {\n  Up,\n  Down,\n  Left,\n  Right,\n  None,\n}\n\nconst getTopTerrain = (\n  data: LevelData,\n  x: number,\n  y: number\n): TerrainTile | null => {\n  let topZ = -1;\n  let result: TerrainTile | null = null;\n  data.tiles.forEach((tile) => {\n    if (tile.coord[0] === x && tile.coord[1] === y && tile.coord[2] > topZ) {\n      topZ = tile.coord[2];\n      result = tile;\n    }\n    if (\n      tile.size === \"large\" &&\n      (tile.coord[0] === x || tile.coord[0] + 1 === x) &&\n      (tile.coord[1] === y || tile.coord[1] + 1 === y) &&\n      tile.coord[2] > topZ\n    ) {\n      topZ = tile.coord[2];\n      result = tile;\n    }\n    if (\n      tile.size === \"wide\" &&\n      (tile.coord[0] === x ||\n        (tile.coord[0] + 1 === x && tile.direction === \"east\")) &&\n      (tile.coord[1] === y ||\n        (tile.coord[1] + 1 === y && (tile.direction ?? \"north\") === \"north\")) &&\n      tile.coord[2] > topZ\n    ) {\n      topZ = tile.coord[2];\n      result = tile;\n    }\n  });\n  return result;\n};\n\nconst samePosition = (a: Position, b: Position) =>\n  a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n\nconst isRamp = (img: string): boolean =>\n  [\"blockDirtRamp\", \"blockSlope\", \"blockSnowSlope\", \"stairs\"].includes(img);\n\nconst isFloor = (newTerrain: TerrainTile): boolean =>\n  ![\"treePineSnow\"].includes(newTerrain.img);\n\nconst inDirection = (\n  direction: Direction,\n  xDelta: number,\n  yDelta: number\n): boolean =>\n  (direction === \"east\" && xDelta === -1) ||\n  (direction === \"south\" && yDelta === 1);\n\nconst inOppositeDirection = (\n  direction: Direction,\n  xDelta: number,\n  yDelta: number\n): boolean =>\n  (direction === \"east\" && xDelta === 1) ||\n  (direction === \"south\" && yDelta === -1);\n\nconst X_MARGIN = 300;\nconst Y_MARGIN = 200;\n\nconst calculateNewPos = (\n  levelData: LevelData,\n  position: Position,\n  xDelta: number,\n  yDelta: number\n): Position => {\n  let [x, y, z] = position;\n  const currentTerrain = getTopTerrain(levelData, position[0], position[1]);\n  if (currentTerrain && isRamp(currentTerrain.img)) {\n    if (inDirection(currentTerrain.direction || \"north\", xDelta, yDelta)) {\n      z += 0.5;\n    }\n    if (\n      inOppositeDirection(currentTerrain.direction || \"north\", xDelta, yDelta)\n    ) {\n      z -= 0.5;\n    }\n  }\n\n  const newTerrain = getTopTerrain(\n    levelData,\n    position[0] + xDelta,\n    position[1] + yDelta\n  );\n  if (newTerrain === null) {\n    // Cliff!\n    return position;\n  }\n\n  if (isRamp(newTerrain.img)) {\n    // Walking 'on' the ramp\n    if (\n      inDirection(newTerrain.direction || \"north\", xDelta, yDelta) &&\n      newTerrain.coord[2] === z\n    ) {\n      return [x + xDelta, y + yDelta, z + 0.5];\n    } else if (\n      inOppositeDirection(newTerrain.direction || \"north\", xDelta, yDelta) &&\n      newTerrain.coord[2] === z - 1\n    ) {\n      return [x + xDelta, y + yDelta, z - 0.5];\n    } else {\n      return position;\n    }\n  }\n\n  // Higher or lower level\n  if (newTerrain.coord[2] !== z - 1 || !isFloor(newTerrain)) {\n    return position;\n  }\n\n  return [x + xDelta, y + yDelta, z];\n};\n\ntype DirectionMap = {\n  [Key in MoveDirection]: [number, number];\n};\n\nconst directionMap: DirectionMap = {\n  [MoveDirection.Up]: [-1, 0],\n  [MoveDirection.Down]: [1, 0],\n  [MoveDirection.Left]: [0, -1],\n  [MoveDirection.Right]: [0, 1],\n  [MoveDirection.None]: [0, 0],\n};\n\ntype LevelSwitchState = \"fadeout\" | \"levelSwitch\" | \"fadein\";\n\nconst Level: React.FunctionComponent<Props> = ({ data: levelData }) => {\n  const position = useAppSelector(selectPosition);\n  const cardIds = useAppSelector(selectCardIds);\n  const followers = useAppSelector(selectFollowers);\n  const dispatch = useAppDispatch();\n  const activeEncounter = useAppSelector(selectActiveEncounter);\n  const posRef = useRef(position);\n  const terrainRef = useRef<HTMLDivElement>(null);\n  const canMoveRef = useRef(true);\n\n  const levelSwitchRef = useRef(levelData);\n  const [levelSwitchState, setLevelSwitchState] =\n    useState<LevelSwitchState>(\"fadeout\");\n  const data = levelSwitchRef.current;\n\n  useEffect(() => {\n    if (levelSwitchState === \"fadein\" && levelData !== levelSwitchRef.current) {\n      setLevelSwitchState(\"fadeout\");\n    }\n    if (levelSwitchState === \"fadeout\") {\n      const timeId = setTimeout(() => {\n        levelSwitchRef.current = levelData;\n        setLevelSwitchState(\"levelSwitch\");\n      }, 500);\n      return () => clearTimeout(timeId);\n    }\n    if (levelSwitchState === \"levelSwitch\") {\n      setLevelSwitchState(\"fadein\");\n      return;\n    }\n  }, [levelSwitchState, levelData]);\n\n  const levelCharacters = useMemo(\n    () =>\n      data.characters.filter(\n        (f) =>\n          !activeEncounter.encountersCompleted.some(\n            (follower) => f.characterSprite === follower\n          )\n      ),\n    [data, activeEncounter.encountersCompleted]\n  );\n  useEffect(() => {\n    posRef.current = position;\n  }, [data, position]);\n\n  useEffect(() => {\n    if (activeEncounter.encounterCharacter === -1) {\n      canMoveRef.current = true;\n    }\n  }, [activeEncounter.encounterCharacter]);\n\n  const movePlayer = useCallback(\n    (direction: MoveDirection) => {\n      const deltas = directionMap[direction];\n      const newPos = calculateNewPos(data, posRef.current, ...deltas);\n\n      // update scroll position\n      const screenPos = calculateXy(newPos);\n      if (terrainRef.current) {\n        const { width, height } = terrainRef.current.getBoundingClientRect();\n\n        let needsScroll = false;\n        const scrollSettings: ScrollToOptions = {\n          left: terrainRef.current.scrollLeft,\n          top: terrainRef.current.scrollTop,\n          behavior: \"smooth\",\n        };\n\n        if (screenPos.x - terrainRef.current.scrollLeft > width - X_MARGIN) {\n          scrollSettings.left = screenPos.x + X_MARGIN - width;\n          needsScroll = true;\n        }\n        if (screenPos.x - terrainRef.current.scrollLeft < X_MARGIN) {\n          scrollSettings.left = screenPos.x - X_MARGIN;\n          needsScroll = true;\n        }\n\n        if (screenPos.y - terrainRef.current.scrollTop > height - Y_MARGIN) {\n          scrollSettings.top = screenPos.y + Y_MARGIN - height;\n          needsScroll = true;\n        }\n\n        if (screenPos.y - terrainRef.current.scrollTop < Y_MARGIN) {\n          scrollSettings.top = screenPos.y - Y_MARGIN;\n          needsScroll = true;\n        }\n\n        if (needsScroll) {\n          terrainRef.current.scroll(scrollSettings);\n        }\n      }\n\n      // Check if we are meeting a character;\n      const onExit = data.exits.find((c) => samePosition(c.coord, newPos));\n      if (onExit) {\n        dispatch(\n          enterLevel({ level: onExit.level, position: onExit.startCoord })\n        );\n        return;\n      }\n\n      const meetCharacter = levelCharacters.find((c) =>\n        samePosition(c.position, newPos)\n      );\n      if (meetCharacter) {\n        canMoveRef.current = false;\n        dispatch(encounter(meetCharacter.characterSprite));\n        dispatch(startEncounter(cardIds));\n      } else {\n        posRef.current = newPos;\n        dispatch(move(posRef.current));\n      }\n    },\n    [dispatch, data, levelCharacters, cardIds]\n  );\n\n  useEffect(() => {\n    const keyHandler = (event: KeyboardEvent) => {\n      if (preventEvents.includes(event.code)) {\n        event.preventDefault();\n      }\n      if (canMoveRef.current) {\n        if (event.code === \"ArrowUp\") {\n          movePlayer(MoveDirection.Up);\n        }\n        if (event.code === \"ArrowDown\") {\n          movePlayer(MoveDirection.Down);\n        }\n        if (event.code === \"ArrowLeft\") {\n          movePlayer(MoveDirection.Left);\n        }\n        if (event.code === \"ArrowRight\") {\n          movePlayer(MoveDirection.Right);\n        }\n      }\n    };\n    movePlayer(MoveDirection.None);\n\n    window.addEventListener(\"keydown\", keyHandler);\n\n    return () => {\n      window.removeEventListener(\"keydown\", keyHandler);\n    };\n  }, [movePlayer]);\n\n  return (\n    <div\n      className={className({\n        [styles.terrain]: true,\n        [styles.fadeout]: levelSwitchState !== \"fadein\",\n      })}\n      ref={terrainRef}\n    >\n      <img\n        src={logo}\n        alt=\"Tristámon\"\n        height=\"100\"\n        style={{ position: \"fixed\", top: \"10px\", right: \"10px\" }}\n      />\n      {data.tiles.map((tile, index) => (\n        <Tile tile={tile} key={index} />\n      ))}\n      {data.decorations.map((tile, index) => (\n        <Tile tile={tile} key={index} />\n      ))}\n      {levelCharacters.map((character, index) => (\n        <Character\n          position={character.position}\n          index={character.characterSprite}\n          key={character.characterSprite}\n        />\n      ))}\n      {followers.map(({ index, pos }) => (\n        <Character position={pos} index={index} key={index} size=\"small\" />\n      ))}\n      <Character position={position} />\n    </div>\n  );\n};\n\nexport default Level;\n","import React, { useEffect } from \"react\";\nimport styles from \"./SplashScreen.module.css\";\n\ntype Props = {\n  onKeyPress?: () => void;\n  screen: \"start\" | \"end\";\n};\n\nconst SplashScreen: React.FunctionComponent<Props> = ({\n  onKeyPress,\n  screen,\n}) => {\n  useEffect(() => {\n    if (!onKeyPress) return;\n    const listener = (e: KeyboardEvent) => {\n      if (e.code === \"Enter\" || e.code === \"Space\") {\n        onKeyPress();\n      }\n    };\n\n    window.addEventListener(\"keydown\", listener);\n    return () => {\n      window.removeEventListener(\"keydown\", listener);\n    };\n  }, [onKeyPress]);\n  return (\n    <div\n      className={screen === \"start\" ? styles.startScreen : styles.endScreen}\n    />\n  );\n};\n\nexport default SplashScreen;\n","const className = (classNames: Record<string, boolean>): string =>\n  Object.entries(classNames)\n    .reduce(\n      (result, [key, value]) => (value ? result.concat(key) : result),\n      [] as string[]\n    )\n    .join(\" \");\n\nexport default className;\n","import { CreatureType } from \"./types\";\n\nexport const modifier = (from: CreatureType, to: CreatureType): number =>\n  isStrongFor(from, to) ? 1.2 : isWeakFor(from, to) ? 0.8 : 1.0;\n\nexport const isStrongFor = (from: CreatureType, to: CreatureType): boolean =>\n  (from === \"shoe\" && to === \"bag\") ||\n  (from === \"bag\" && to === \"rod\") ||\n  (from === \"rod\" && to === \"shoe\");\n\nexport const isWeakFor = (from: CreatureType, to: CreatureType): boolean =>\n  (from === \"shoe\" && to === \"rod\") ||\n  (from === \"rod\" && to === \"bag\") ||\n  (from === \"bag\" && to === \"shoe\");\n","import { isWeakFor } from \"./combatHelpers\";\nimport { CombatStatus } from \"./state/combatSlice\";\n\nconst DUMMY_ACTION = { action: \"wait\", target: \"all\" };\n\nexport const enemyActionSelection = (\n  combatStatus: CombatStatus\n): { action: string; target: string } => {\n  if (combatStatus.turn === undefined || combatStatus.turn.isStunned) {\n    return DUMMY_ACTION;\n  }\n  // weak team mates? heal!\n  const needsHealing = combatStatus.partyB\n    .filter((c) => c.health < 15)\n    .sort((a, b) => a.health - b.health);\n  const healingAbilities = combatStatus.turn.actions\n    .filter((a) => !a.disabled && a.damage < 0)\n    .sort((a, b) => a.cost - b.cost);\n\n  if (needsHealing.length > 0 && healingAbilities.length > 0) {\n    const defensiveAction = healingAbilities[0];\n\n    const target =\n      defensiveAction.targets[0] === \"allFriendlies\"\n        ? \"all\"\n        : needsHealing[0].id;\n\n    return { action: defensiveAction.name, target };\n  }\n\n  const specialAbilities = combatStatus.turn.actions\n    .filter((a) => a.damageType && !a.disabled)\n    .sort((a, b) => a.cost - b.cost)[0];\n\n  // max offence!\n  const offensiveAction = combatStatus.turn.actions\n    .filter((a) => !a.disabled)\n    .sort((a, b) => b.damage + b.cost - (a.damage + a.cost))[0];\n\n  const action = specialAbilities || offensiveAction;\n\n  if (action) {\n    const target = action.targets.reduce<null | string>(\n      (result, targetType) => {\n        if (targetType === \"allEnemies\") {\n          return \"all\";\n        }\n        if (targetType === \"maxHealth\") {\n          const target = combatStatus.partyA.reduce((r, current) =>\n            current.health > r.health ? current : r\n          );\n          return target.id;\n        }\n        if (targetType === \"minHealth\") {\n          const target = combatStatus.partyA.reduce((r, current) =>\n            current.health < r.health ? current : r\n          );\n          return target.id;\n        }\n        if (targetType === \"weakness\") {\n          const target = combatStatus.partyA.find((enemy) =>\n            combatStatus.turn\n              ? isWeakFor(enemy.card.type, combatStatus.turn.creature.card.type)\n              : false\n          );\n\n          if (target) return target.id;\n        }\n        return result;\n      },\n      null\n    );\n    if (target) {\n      return {\n        action: action.name,\n        target,\n      };\n    }\n  }\n  return DUMMY_ACTION;\n};\n","export default __webpack_public_path__ + \"static/media/combat_characters.04203c67.png\";","import { ImageDefinition, prepareAnimation } from \"geppetto-player\";\nimport { CreatureCard, CreatureCardId, Dialog } from \"../types\";\nimport amerigoTexture from \"./geppetto/combat_characters.png\";\nimport amerigoAnimation from \"./geppetto/amerigo.json\";\nimport ozosnelAnimation from \"./geppetto/ozosnel.json\";\nimport ozoveelsnellerAnimation from \"./geppetto/ozoveelsneller.json\";\nimport ameerigogoAnimation from \"./geppetto/ameerigogo.json\";\nimport robotAnimation from \"./geppetto/robot.json\";\nimport bearAnimation from \"./geppetto/beer.json\";\nimport slimeAnimation from \"./geppetto/slime.json\";\n\nconst loadTexture = async (url: string): Promise<HTMLImageElement> =>\n  new Promise((resolve) => {\n    const image = new Image();\n    image.crossOrigin = \"anonymous\";\n    image.src = url;\n    image.onload = () => resolve(image);\n  });\n\nexport const genericCombatTexture = loadTexture(amerigoTexture);\n\nconst amerigo: CreatureCard = {\n  id: \"amerigo\",\n  name: \"Amerigo\",\n  level: 1,\n  xpResult: 75,\n  type: \"shoe\",\n  initiative: 4,\n\n  health: 60,\n  energy: 4,\n\n  texture: genericCombatTexture,\n  animation: prepareAnimation(amerigoAnimation as unknown as ImageDefinition),\n\n  actions: [\n    {\n      name: \"Kopstoot\",\n      animationTrack: { track: \"headbutt\", target: \"self\" },\n      damage: 5,\n      cost: 0,\n      cooldown: 0,\n      targets: [\"enemy\"],\n    },\n    {\n      name: \"Hoeftrap\",\n      animationTrack: { track: \"kick\", target: \"self\" },\n      damage: 15,\n      cost: 2,\n      cooldown: 1,\n      targets: [\"enemy\"],\n    },\n    {\n      name: \"Eet wortel\",\n      damage: -40,\n      cost: 2,\n      cooldown: 2,\n      targets: [\"self\"],\n    },\n  ],\n};\n\nconst ameerigogo: CreatureCard = {\n  id: \"ameerigogo\",\n  name: \"Ameerigogo\",\n  level: 2,\n  xpResult: 0,\n  type: \"shoe\",\n  initiative: 4,\n\n  health: 80,\n  energy: 8,\n\n  texture: genericCombatTexture,\n  animation: prepareAnimation(\n    ameerigogoAnimation as unknown as ImageDefinition\n  ),\n\n  actions: [\n    {\n      name: \"Kopstoot\",\n      animationTrack: { track: \"headbutt\", target: \"self\" },\n      damage: 10,\n      cost: 0,\n      cooldown: 0,\n      targets: [\"enemy\"],\n    },\n    {\n      name: \"Hoeftrap\",\n      animationTrack: { track: \"kick\", target: \"self\" },\n      damage: 24,\n      cost: 2,\n      cooldown: 1,\n      targets: [\"enemy\"],\n    },\n    {\n      name: \"Eet wortel\",\n      damage: -60,\n      cost: 2,\n      cooldown: 2,\n      targets: [\"friendly\"],\n    },\n    {\n      name: \"Wortelfeest\",\n      animationTrack: { track: \"massHeal\", target: \"environment\" },\n\n      damage: -40,\n      cost: 4,\n      cooldown: 4,\n      targets: [\"allFriendlies\"],\n    },\n  ],\n};\n\nconst ozosnel: CreatureCard = {\n  id: \"ozosnel\",\n  name: \"Ozosnel\",\n  level: 1,\n  xpResult: 100,\n  type: \"rod\",\n  initiative: 2,\n\n  health: 50,\n  energy: 4,\n\n  texture: genericCombatTexture,\n  animation: prepareAnimation(ozosnelAnimation as unknown as ImageDefinition),\n\n  actions: [\n    {\n      name: \"Hoefzoef\",\n      animationTrack: { track: \"kick\", target: \"self\" },\n      damage: 6,\n      cost: 0,\n      cooldown: 0,\n      targets: [\"enemy\"],\n    },\n    {\n      name: \"Stormloop\",\n      animationTrack: { target: \"self\", track: \"zoef\" },\n      damage: 10,\n      cost: 2,\n      cooldown: 4,\n      targets: [\"allEnemies\"],\n    },\n  ],\n};\n\nconst ozoveelsneller: CreatureCard = {\n  id: \"ozoveelsneller\",\n  name: \"Ozoveelsneller\",\n  level: 2,\n  xpResult: 0,\n  type: \"rod\",\n  initiative: 2,\n\n  health: 70,\n  energy: 12,\n\n  texture: genericCombatTexture,\n  animation: prepareAnimation(\n    ozoveelsnellerAnimation as unknown as ImageDefinition\n  ),\n\n  actions: [\n    {\n      name: \"Hoefzoef\",\n      animationTrack: { track: \"kick\", target: \"self\" },\n      damage: 6,\n      cost: 0,\n      cooldown: 0,\n      targets: [\"enemy\"],\n    },\n    {\n      name: \"Zoefstomp\",\n      animationTrack: { track: \"stomp\", target: \"self\" },\n      damage: 2,\n      damageType: \"stun\",\n      cost: 3,\n      cooldown: 1,\n      targets: [\"enemy\"],\n    },\n    {\n      name: \"Pepernoten storm\",\n      animationTrack: { track: \"massAttack\", target: \"environment\" },\n      damage: 20,\n      cost: 3,\n      cooldown: 4,\n      targets: [\"allEnemies\"],\n    },\n  ],\n};\n\nconst robot: CreatureCard = {\n  id: \"robot\",\n  name: \"Robot\",\n  level: 1,\n  xpResult: 0,\n  type: \"rod\",\n  initiative: 6,\n\n  health: 30,\n  energy: 0,\n\n  texture: genericCombatTexture,\n  animation: prepareAnimation(robotAnimation as unknown as ImageDefinition),\n\n  actions: [\n    {\n      name: \"Arm klap\",\n      animationTrack: { target: \"self\", track: \"armklap\" },\n      damage: 8,\n      cost: 0,\n      cooldown: 0,\n      targets: [\"maxHealth\"],\n    },\n    {\n      name: \"Arm stomper\",\n      animationTrack: { target: \"self\", track: \"stomper\" },\n      damage: 12,\n      cost: 0,\n      cooldown: 3,\n      targets: [\"maxHealth\"],\n    },\n  ],\n};\n\nconst bear: CreatureCard = {\n  id: \"bear\",\n  name: \"Teddybeer\",\n  level: 1,\n  xpResult: 0,\n  type: \"shoe\",\n  initiative: 3,\n\n  health: 30,\n  energy: 4,\n\n  texture: genericCombatTexture,\n  animation: prepareAnimation(bearAnimation as unknown as ImageDefinition),\n\n  actions: [\n    {\n      name: \"Knuffel\",\n      animationTrack: { target: \"self\", track: \"hugAttack\" },\n      damage: 6,\n      cost: 0,\n      cooldown: 0,\n      targets: [\"weakness\", \"minHealth\"],\n    },\n    {\n      name: \"Knuffel sprong\",\n      animationTrack: { target: \"self\", track: \"hugJump\" },\n      damage: 12,\n      cost: 0,\n      cooldown: 3,\n      targets: [\"maxHealth\"],\n    },\n    {\n      name: \"Groepsknuffel\",\n      animationTrack: { target: \"self\", track: \"groupHug\" },\n      damage: -30,\n      cost: 2,\n      cooldown: 4,\n      targets: [\"allFriendlies\"],\n    },\n  ],\n};\n\nconst slime: CreatureCard = {\n  id: \"slime\",\n  name: \"Slijm\",\n  level: 1,\n  xpResult: 0,\n  type: \"bag\",\n  initiative: 8,\n\n  health: 40,\n  energy: 4,\n\n  texture: genericCombatTexture,\n  animation: prepareAnimation(slimeAnimation as unknown as ImageDefinition),\n\n  actions: [\n    {\n      name: \"Klodder\",\n      animationTrack: { target: \"self\", track: \"klodder\" },\n      damage: 10,\n      cost: 0,\n      cooldown: 0,\n      targets: [\"weakness\", \"maxHealth\"],\n    },\n    {\n      name: \"Plakkerigheid\",\n      animationTrack: { target: \"self\", track: \"stun\" },\n      damage: 2,\n      damageType: \"stun\",\n      cost: 2,\n      cooldown: 4,\n      targets: [\"maxHealth\"],\n    },\n  ],\n};\n\nconst creatures = [\n  amerigo,\n  ameerigogo,\n  ozosnel,\n  ozoveelsneller,\n  robot,\n  bear,\n  slime,\n].reduce(\n  (result, creature) => ({ ...result, [creature.id]: creature }),\n  {} as Record<string, CreatureCard>\n);\n\nexport const evolutions: Record<\n  string,\n  { dialog: Dialog[]; newCard: CreatureCardId }\n> = {\n  amerigo: {\n    newCard: \"ameerigogo\",\n    dialog: [\n      {\n        characterName: \"Amerigo\",\n        characterColor: \"lightblue\",\n        text: [\"Tristan! Ik... Ik ben aan het veranderen....\"],\n      },\n      {\n        characterName: \"Tristan\",\n        characterColor: \"orange\",\n        text: [\"Ojee... gaat alles goed???\"],\n      },\n      {\n        characterName: \"Amerigo\",\n        characterColor: \"lightblue\",\n        text: [\"Ik... Ik... \"],\n      },\n      {\n        characterName: \"Ameerigogo\",\n        characterColor: \"lightblue\",\n        text: [\n          \"Evolueer!! Ik ben nu Ameerigogo!\",\n          \"Go! Go! Meer Go!\",\n          \"Ameerigogo!\",\n        ],\n      },\n    ],\n  },\n  ozosnel: {\n    newCard: \"ozoveelsneller\",\n    dialog: [\n      {\n        characterName: \"Ozosnel\",\n        characterColor: \"sandybrown\",\n        text: [\"Tristan! Ik... Ik ben aan het veranderen....\"],\n      },\n      {\n        characterName: \"Tristan\",\n        characterColor: \"orange\",\n        text: [\"Evolueer je nu al??\"],\n      },\n      {\n        characterName: \"Ozosnel\",\n        characterColor: \"sandybrown\",\n        text: [\"Ik... Ik... denk het... \"],\n      },\n      {\n        characterName: \"Ozoveelsneller\",\n        characterColor: \"sandybrown\",\n        text: [\n          \"Evolueer!! Ik ben nu Ozoveelsneller!\",\n          \"Snel snel!!\",\n          \"Ozoveelsneller!\",\n        ],\n      },\n    ],\n  },\n};\n\nexport default creatures;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { modifier } from \"../combatHelpers\";\nimport creatures from \"../data/creatures\";\nimport {\n  Action,\n  ActionSentence,\n  CombatResult,\n  Creature,\n  CreatureCard,\n  CreatureCardId,\n} from \"../types\";\nimport { RootState } from \"./store\";\n\nexport interface CombatState {\n  inCombat: boolean;\n  combatResult: CombatResult;\n  creatures: Creature[];\n  currentTurn: string | null;\n  lastActionLog: ActionSentence[];\n}\n\nconst initialState: CombatState = {\n  inCombat: false,\n  combatResult: \"won\",\n  creatures: [],\n  currentTurn: null,\n  lastActionLog: [],\n};\n\nconst createCombatCreature =\n  (party: Creature[\"party\"]) =>\n  (cardId: string, index: number): Creature => {\n    const creatureCard = creatures[cardId];\n    if (!creatureCard) {\n      throw new Error(`Creature card with id \"${cardId}\" not found`);\n    }\n\n    return {\n      card: cardId,\n      id: `${cardId}${index}`,\n      health: creatureCard.health,\n      energy: creatureCard.energy,\n      cooldowns: {},\n      party,\n      inTurn: 0,\n    };\n  };\n\nexport const combatSlice = createSlice({\n  name: \"character\",\n  initialState,\n  reducers: {\n    startFight: (state, action: PayloadAction<CreatureCardId[]>) => {\n      state.inCombat = true;\n      state.combatResult = \"inProgress\";\n      state.creatures = state.creatures\n        .filter((c) => c.party === \"left\")\n        .concat(action.payload.map(createCombatCreature(\"right\")))\n        .map((c) => ({ ...c, inTurn: 0 }));\n\n      state.currentTurn = state.creatures.sort((a, b) => {\n        const cA = creatures[a.card];\n        const cB = creatures[b.card];\n        return (\n          a.inTurn * 100 + cA.initiative - (b.inTurn * 100 + cB.initiative)\n        );\n      })[0].id;\n      state.lastActionLog = [];\n    },\n    startEncounter: (state, action: PayloadAction<CreatureCardId[]>) => {\n      state.combatResult = \"inProgress\";\n      state.creatures = ([] as Creature[]).concat(\n        action.payload.map(createCombatCreature(\"left\"))\n      );\n    },\n    endEncounter: (state) => {\n      state.inCombat = false;\n    },\n    actionTurn: (\n      state,\n      action: PayloadAction<{ action: string; target: string }>\n    ) => {\n      const currentcreature = state.creatures.find(\n        (c) => c.id === state.currentTurn\n      );\n      if (!currentcreature) return;\n\n      const team = currentcreature.party;\n      const ownCard = creatures[currentcreature.card];\n      state.lastActionLog = [];\n\n      currentcreature.inTurn += 1;\n      currentcreature.cooldowns = Object.keys(currentcreature.cooldowns).reduce(\n        (result, name) =>\n          currentcreature.cooldowns[name] > 1\n            ? {\n                ...result,\n                [name]: currentcreature.cooldowns[name] - 1,\n              }\n            : result,\n        {}\n      );\n\n      const actionDetails = ownCard.actions.find(\n        (a) => a.name === action.payload.action\n      );\n      if (actionDetails) {\n        if (actionDetails.cost > 0) {\n          currentcreature.energy -= actionDetails.cost;\n        }\n        if (actionDetails.cooldown > 0) {\n          currentcreature.cooldowns[actionDetails.name] =\n            actionDetails.cooldown;\n        }\n\n        state.creatures\n          .filter((creature) => {\n            const isEnemy = creature.party !== team;\n\n            return (\n              action.payload.target === creature.id ||\n              (actionDetails.targets.includes(\"allEnemies\") &&\n                isEnemy &&\n                creature.health > 0 &&\n                action.payload.target === \"all\") ||\n              (actionDetails.targets.includes(\"allFriendlies\") &&\n                !isEnemy &&\n                creature.health > 0 &&\n                action.payload.target === \"all\")\n            );\n          })\n          .forEach((creature) => {\n            if (!state.currentTurn) return;\n            const card = creatures[creature.card];\n\n            if (actionDetails.damage < 0) {\n              const healing = Math.min(\n                card.health - creature.health,\n                actionDetails.damage * -1\n              );\n\n              if (healing > 0) {\n                state.lastActionLog.push({\n                  source: currentcreature,\n                  action: \"heals\",\n                  target: creature,\n                  with: actionDetails.name,\n                  points: healing,\n                  unit: \"points\",\n                });\n                // healing\n                creature.health += healing;\n              }\n            }\n\n            if (\n              actionDetails.damage > 0 &&\n              actionDetails.damageType === undefined\n            ) {\n              const damage = Math.round(\n                modifier(ownCard.type, card.type) * actionDetails.damage\n              );\n\n              if (state.currentTurn && damage > 0) {\n                state.lastActionLog.push({\n                  source: currentcreature,\n                  action: \"hurts\",\n                  with: actionDetails.name,\n                  target: creature,\n                  points: damage,\n                  unit: \"points\",\n                });\n                // dealing damage\n                creature.health -= damage;\n              }\n            }\n\n            if (\n              actionDetails.damage > 0 &&\n              actionDetails.damageType === \"stun\"\n            ) {\n              if (state.currentTurn) {\n                state.lastActionLog.push({\n                  source: currentcreature,\n                  action: \"stuns\",\n                  with: actionDetails.name,\n                  target: creature,\n                  points: actionDetails.damage,\n                  unit: \"turns\",\n                });\n                // dealing damage\n                creature.cooldowns = {\n                  ...creature.cooldowns,\n                  stunned: actionDetails.damage,\n                };\n              }\n            }\n          });\n      }\n\n      // Need a next turn?\n\n      const leftAlive = !state.creatures.some(\n        (c) => c.party === \"left\" && c.health <= 0\n      );\n      const rightAlive = state.creatures.some(\n        (c) => c.party === \"right\" && c.health > 0\n      );\n\n      if (leftAlive && rightAlive) {\n        state.currentTurn = state.creatures\n          .filter((a) => a.health > 0)\n          .sort((a, b) => {\n            const cA = creatures[a.card];\n            const cB = creatures[b.card];\n            return (\n              a.inTurn * 100 + cA.initiative - (b.inTurn * 100 + cB.initiative)\n            );\n          })[0].id;\n      } else {\n        state.currentTurn = null;\n        state.combatResult = leftAlive && !rightAlive ? \"won\" : \"lost\";\n      }\n    },\n  },\n});\n\nexport const { startFight, startEncounter, actionTurn, endEncounter } =\n  combatSlice.actions;\n\nexport const selectInCombat = (state: RootState) => state.combat.inCombat;\nexport const selectFightWon = (state: RootState) =>\n  state.combat.combatResult === \"won\";\n\nexport type CombatCreature = Omit<Creature, \"card\"> & {\n  card: CreatureCard;\n};\n\nexport type CombatStatus = {\n  outcome: CombatResult;\n  partyA: CombatCreature[];\n  partyB: CombatCreature[];\n  turn?: {\n    creature: CombatCreature;\n    isStunned: boolean;\n    actions: (Action & { disabled: boolean; inCooldown: number })[];\n  };\n};\n\nexport const selectCombatLog = (state: RootState) => state.combat.lastActionLog;\n\nexport const selectLevelingUp = (state: RootState) =>\n  state.character.cards.find(\n    (card) =>\n      state.character.xp[card] >= creatures[card].xpResult &&\n      creatures[card].xpResult > 0\n  );\n\nexport const selectCombatStatus = (state: RootState): CombatStatus => {\n  const currentCreature = state.combat.creatures.find(\n    (c) => c.id === state.combat.currentTurn\n  );\n\n  const currentCard = currentCreature ? creatures[currentCreature.card] : null;\n  const actions = currentCard\n    ? currentCard.actions.map((a) => ({\n        ...a,\n        disabled:\n          (currentCreature?.energy || 0) < a.cost ||\n          !!currentCreature?.cooldowns[a.name],\n        inCooldown: currentCreature?.cooldowns[a.name] ?? 0,\n      }))\n    : [];\n  return {\n    outcome: state.combat.combatResult,\n    partyA: state.combat.creatures\n      .filter((c) => c.party === \"left\")\n      .map<CombatCreature>((c) => ({\n        ...c,\n        card: creatures[c.card],\n      })),\n    partyB: state.combat.creatures\n      .filter((c) => c.party === \"right\")\n      .map<CombatCreature>((c) => ({\n        ...c,\n        card: creatures[c.card],\n      })),\n    turn:\n      currentCard && currentCreature\n        ? {\n            creature: { ...currentCreature, card: currentCard },\n            isStunned: !!(\n              currentCreature.cooldowns[\"stunned\"] &&\n              currentCreature.cooldowns[\"stunned\"] > 0\n            ),\n            actions,\n          }\n        : undefined,\n  };\n};\n\nexport default combatSlice.reducer;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"./store\";\n\nexport interface EncounterState {\n  encounterCharacter: number;\n  fightsFinished: number;\n  result: \"inProgress\" | \"won\" | \"lost\";\n  encountersCompleted: number[];\n}\n\nconst initialState: EncounterState = {\n  encounterCharacter: -1,\n  fightsFinished: 0,\n  result: \"inProgress\",\n  encountersCompleted: [],\n};\n\nexport const encounterSlice = createSlice({\n  name: \"encounter\",\n  initialState,\n  reducers: {\n    encounter: (state, action: PayloadAction<number>) => {\n      state.encounterCharacter = action.payload;\n      state.fightsFinished = 0;\n      state.result = \"inProgress\";\n    },\n    closeEncounter: (state, action: PayloadAction<boolean>) => {\n      state.fightsFinished = 0;\n      state.result = \"inProgress\";\n      if (action.payload) {\n        state.encountersCompleted.push(state.encounterCharacter);\n      }\n      state.encounterCharacter = -1;\n    },\n    loseEncounter: (state) => {\n      state.result = \"lost\";\n    },\n    completeFight: (state) => {\n      state.fightsFinished += 1;\n    },\n    winEncounter: (state) => {\n      state.result = \"won\";\n    },\n  },\n});\n\nexport const {\n  encounter,\n  closeEncounter,\n  winEncounter,\n  loseEncounter,\n  completeFight,\n} = encounterSlice.actions;\n\nexport const selectActiveEncounter = (state: RootState) => state.encounter;\n\nexport default encounterSlice.reducer;\n","import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport type { RootState, AppDispatch } from \"./store\";\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import creatures from \"../data/creatures\";\nimport { ActionSentence, ActionType } from \"../types\";\n\nconst creatureName = (cardId: string) => creatures[cardId].name;\n\ntype Props = {\n  sentence: ActionSentence;\n};\n\ntype ActionMap = {\n  [Key in ActionType]: string;\n};\n\nconst actionMap: ActionMap = {\n  hurts: \"raakt\",\n  heals: \"geneest\",\n  stuns: \"verdoofd\",\n};\n\nconst unitMap: Record<\"turns\" | \"points\", string> = {\n  turns: \"beurten\",\n  points: \"punten\",\n};\n\nconst CombatLogSentence: React.FunctionComponent<Props> = ({ sentence }) => (\n  <p>\n    <strong>{creatureName(sentence.source.card)}</strong>{\" \"}\n    {actionMap[sentence.action]}{\" \"}\n    <strong>\n      {sentence.source === sentence.target\n        ? \"zichzelf\"\n        : creatureName(sentence.target.card)}\n    </strong>{\" \"}\n    met <span style={{ textTransform: \"lowercase\" }}>{sentence.with}</span> voor{\" \"}\n    {sentence.points} {unitMap[sentence.unit]}\n  </p>\n);\n\nexport default CombatLogSentence;\n","import React, { useRef, useEffect } from \"react\";\nimport styles from \"./CombatView.module.css\";\nimport {\n  AnimationControls,\n  GeppettoPlayer,\n  ImageDefinition,\n  prepareAnimation,\n  setupWebGL,\n} from \"geppetto-player\";\nimport { useAppSelector } from \"../state/hooks\";\nimport {\n  CombatCreature,\n  CombatStatus,\n  selectCombatLog,\n  selectCombatStatus,\n} from \"../state/combatSlice\";\nimport { MutableRefObject } from \"hoist-non-react-statics/node_modules/@types/react\";\nimport { ActionSentence, ActionType } from \"../types\";\nimport creatures, { genericCombatTexture } from \"../data/creatures\";\nimport backgroundAnimation from \"../data/geppetto/background.json\";\n\ntype AnimationAdministration = Record<\n  string,\n  {\n    controls: AnimationControls;\n    stateTrack: string;\n    current: string;\n  }\n>;\nconst background = prepareAnimation(\n  backgroundAnimation as unknown as ImageDefinition\n);\n\nconst synchronizeAnimations = (\n  combatStatus: CombatStatus,\n  animationsRef: MutableRefObject<AnimationAdministration>,\n  player: GeppettoPlayer\n) => {\n  const checkSetup = async (creature: CombatCreature, index: number) => {\n    if (creature.health <= 0) return;\n    if (!animationsRef.current[creature.id]) {\n      const img = await creature.card.texture;\n\n      const animation = player.addAnimation(creature.card.animation, img, 0, {\n        panX:\n          creature.party === \"left\" ? -0.4 + index * -0.1 : 0.3 + index * 0.15,\n        panY: 0.2 + index * -0.2,\n        zoom: 1.5,\n        zIndex: 2 + index,\n      });\n      animation.startTrack(\"idle\");\n      animationsRef.current[creature.id] = {\n        controls: animation,\n        stateTrack: \"idle\",\n        current: \"idle\",\n      };\n      animation.onTrackStopped((track) => {\n        if (\n          track !== \"idle\" &&\n          track !== \"stunned\" &&\n          track !== \"dead\" &&\n          animationsRef.current[creature.id]\n        ) {\n          const stateTrack = animationsRef.current[creature.id].stateTrack;\n          animationsRef.current[creature.id].current = stateTrack;\n          animation.startTrack(stateTrack);\n        }\n        if (track === \"dead\") {\n          animation.destroy();\n          delete animationsRef.current[creature.id];\n        }\n      });\n    } else {\n      if (creature.cooldowns[\"stunned\"]) {\n        animationsRef.current[creature.id].stateTrack = \"stunned\";\n      } else {\n        animationsRef.current[creature.id].stateTrack = \"idle\";\n      }\n    }\n  };\n  combatStatus.partyA.forEach(checkSetup);\n  combatStatus.partyB.forEach(checkSetup);\n};\n\nconst trackMapping: Record<ActionType, string> = {\n  heals: \"healing\",\n  hurts: \"hurt\",\n  stuns: \"stunned\",\n};\n\nconst getAnimationStates = (log: ActionSentence[]): Record<string, string> => {\n  const states: Record<string, string> = {};\n  log.forEach((entry) => {\n    const sourceCard = creatures[entry.source.card];\n    const sourceAction = sourceCard.actions.find((a) => a.name === entry.with);\n    if (sourceAction && sourceAction.animationTrack) {\n      if (sourceAction.animationTrack.target === \"self\") {\n        states[entry.source.id] = sourceAction.animationTrack.track;\n      }\n      if (sourceAction.animationTrack.target === \"environment\") {\n        states[\"background\"] = sourceAction.animationTrack.track;\n      }\n    }\n\n    states[entry.target.id] =\n      states[entry.target.id] || trackMapping[entry.action];\n\n    if (entry.target.health <= 0) {\n      states[entry.target.id] = \"dead\";\n    }\n  });\n\n  return states;\n};\n\nconst CombatView: React.FunctionComponent = () => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const playerRef = useRef<GeppettoPlayer | null>(null);\n  const animationsRef = useRef<AnimationAdministration>({});\n\n  useEffect(() => {\n    const resizeHandler = () => {\n      if (!canvasRef.current) return;\n\n      const { width, height } = canvasRef.current?.getBoundingClientRect();\n      canvasRef.current.width = width * devicePixelRatio;\n      canvasRef.current.height = height * devicePixelRatio;\n    };\n\n    resizeHandler();\n\n    if (canvasRef.current) {\n      const player = setupWebGL(canvasRef.current);\n      playerRef.current = player;\n\n      const setupBackground = async () => {\n        const img = await genericCombatTexture;\n\n        const controls = player.addAnimation(background, img, 0, {\n          panX: 0,\n          zoom: 4.5,\n        });\n        animationsRef.current[\"background\"] = {\n          controls,\n          stateTrack: \"\",\n          current: \"\",\n        };\n      };\n      setupBackground();\n\n      const render = () => {\n        if (playerRef.current === null) return;\n\n        playerRef.current.render();\n\n        animationsRef.current[\"background\"] &&\n          animationsRef.current[\"background\"].controls.render();\n\n        Object.entries(animationsRef.current).forEach(([key, creature]) => {\n          if (key !== \"background\") creature.controls.render();\n        });\n\n        window.requestAnimationFrame(render);\n      };\n\n      window.requestAnimationFrame(render);\n    }\n\n    window.addEventListener(\"resize\", resizeHandler);\n    return () => {\n      window.removeEventListener(\"resize\", resizeHandler);\n\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      const animations = animationsRef.current;\n      const player = playerRef.current;\n      playerRef.current = null;\n\n      player?.destroy();\n      Object.values(animations).forEach((creature) => {\n        creature.controls.destroy();\n      });\n    };\n  }, []);\n\n  const combatStatus = useAppSelector(selectCombatStatus);\n  const combatLog = useAppSelector(selectCombatLog);\n\n  useEffect(() => {\n    if (!playerRef.current) return;\n    synchronizeAnimations(combatStatus, animationsRef, playerRef.current);\n    const animationStates = getAnimationStates(combatLog);\n\n    Object.entries(animationStates).forEach(([animationId, track]) => {\n      if (\n        animationsRef.current[animationId] &&\n        animationsRef.current[animationId].current !== track\n      ) {\n        animationsRef.current[animationId].current = track;\n        animationsRef.current[animationId].controls.startTrack(track);\n      }\n    });\n  }, [combatStatus, combatLog]);\n\n  return <canvas className={styles.arena} ref={canvasRef} />;\n};\n\nexport default CombatView;\n","import React from \"react\";\nimport { CreatureType } from \"../types\";\nimport rodImage from \"../data/geppetto/roe.png\";\nimport shoeImage from \"../data/geppetto/schoen.png\";\nimport bagImage from \"../data/geppetto/zak.png\";\n\ntype Props = {\n  symbol: CreatureType;\n};\n\nconst imageMapping: Record<CreatureType, string> = {\n  bag: bagImage,\n  shoe: shoeImage,\n  rod: rodImage,\n};\n\nconst Icon: React.FunctionComponent<Props> = ({ symbol }) => (\n  <img\n    width={24}\n    height={24}\n    src={imageMapping[symbol]}\n    alt={symbol}\n    style={{ verticalAlign: \"sub\" }}\n  />\n);\n\nexport default Icon;\n","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import React from \"react\";\nimport { CombatCreature } from \"../state/combatSlice\";\nimport Icon from \"./Icon\";\nimport styles from \"./MemberStats.module.css\";\n\ntype MemberProps = {\n  member: CombatCreature;\n  inTurn: boolean;\n};\n\nconst MemberStats: React.FunctionComponent<MemberProps> = ({\n  member,\n  inTurn,\n}) => {\n  const stunned =\n    member.cooldowns[\"stunned\"] && member.cooldowns[\"stunned\"] > 0;\n  return (\n    <div\n      style={{\n        opacity: member.health > 0 ? 1 : 0.5,\n        background: inTurn ? \"#222\" : \"#000\",\n        padding: \"0.5em\",\n      }}\n    >\n      <p style={{ color: member.party === \"left\" ? \"lightgreen\" : \"white\" }}>\n        <strong>\n          <Icon symbol={member.card.type} /> {member.card.name}\n          {stunned && \"🌪\"}\n          {inTurn ? \"️ ⬅️\" : \"\"}\n        </strong>\n      </p>\n      <p className={styles.memberProps}>\n        <span>\n          HP: {Math.max(member.health, 0)} / {member.card.health}\n        </span>\n        <progress value={member.health / member.card.health} />\n      </p>\n      {member.card.energy > 0 && (\n        <p className={styles.memberProps}>\n          <span>\n            E: {member.energy} / {member.card.energy}\n          </span>\n          <progress\n            className={styles.energyBar}\n            value={member.energy / member.card.energy}\n          />\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default MemberStats;\n","export default __webpack_public_path__ + \"static/media/systeem.1f6c1aca.png\";","export default __webpack_public_path__ + \"static/media/logo.692cd592.png\";","import React, { useState, useEffect } from \"react\";\nimport className from \"../className\";\nimport { enemyActionSelection } from \"../combat\";\nimport {\n  actionTurn,\n  CombatStatus,\n  endEncounter,\n  selectCombatLog,\n  selectCombatStatus,\n} from \"../state/combatSlice\";\nimport {\n  completeFight,\n  loseEncounter,\n  selectActiveEncounter,\n  winEncounter,\n} from \"../state/encounterSlice\";\nimport { useAppDispatch, useAppSelector } from \"../state/hooks\";\nimport { ActionTarget, CreatureCard, LevelCharacter } from \"../types\";\nimport styles from \"./CombatArena.module.css\";\nimport CombatLogSentence from \"./CombatLogSentence\";\nimport CombatView from \"./CombatView\";\nimport MemberStats from \"./MemberStats\";\nimport systeemImage from \"../data/geppetto/systeem.png\";\nimport logo from \"./logo.png\";\nimport Icon from \"./Icon\";\n\nconst DELAY_FOR_CPU_OPPONENT = 3000;\n\nconst actionRequiresTarget =\n  (type: ActionTarget) =>\n  (card: CreatureCard, actionSelection: string): boolean =>\n    card.actions.some(\n      (a) => a.name === actionSelection && a.targets.includes(type)\n    );\n\nconst actionRequiresEnemyTarget = actionRequiresTarget(\"enemy\");\nconst actionRequiresFriendlyTarget = actionRequiresTarget(\"friendly\");\n\ntype Props = {\n  character: LevelCharacter;\n};\n\nconst CombatArena: React.FunctionComponent<Props> = ({ character }) => {\n  const delayedCombatStatus = useAppSelector(selectCombatStatus);\n  const combatLog = useAppSelector(selectCombatLog);\n  const encounter = useAppSelector(selectActiveEncounter);\n  const dispatch = useAppDispatch();\n\n  const [combatStatus, setCombatStatus] =\n    useState<CombatStatus>(delayedCombatStatus);\n\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      setCombatStatus(delayedCombatStatus);\n    }, 3000);\n    return () => clearTimeout(timeoutId);\n  }, [delayedCombatStatus]);\n\n  const [actionSelection, setActionSelection] = useState<string | null>(null);\n  const [targetSelection, setTargetSelection] = useState<string | null>(null);\n  const [actionFocus, setActionFocus] = useState(0);\n\n  const characterOrder = delayedCombatStatus.partyA\n    .concat(delayedCombatStatus.partyB)\n    .sort((a, b) => a.card.initiative - b.card.initiative);\n\n  useEffect(() => {\n    if (combatStatus.outcome === \"lost\") {\n      const timeoutId = setTimeout(() => {\n        dispatch(loseEncounter());\n      }, 3000);\n      return () => clearTimeout(timeoutId);\n    }\n    if (combatStatus.outcome === \"won\") {\n      dispatch(completeFight());\n    }\n  }, [combatStatus.outcome, dispatch]);\n\n  useEffect(() => {\n    if (combatStatus.outcome !== \"inProgress\") {\n      const nextFightDetails = character.fights[encounter.fightsFinished];\n\n      if (!nextFightDetails && combatStatus.outcome === \"won\") {\n        const timeoutId = setTimeout(() => {\n          dispatch(endEncounter());\n          dispatch(winEncounter());\n        }, 3000);\n        return () => clearTimeout(timeoutId);\n      }\n    }\n  }, [\n    combatStatus.outcome,\n    encounter.fightsFinished,\n    character.fights,\n    dispatch,\n  ]);\n\n  useEffect(() => {\n    setActionSelection(null);\n    setTargetSelection(null);\n  }, [combatStatus.turn]);\n\n  useEffect(() => {\n    if (combatStatus.turn && combatStatus.turn.creature.party === \"right\") {\n      const actionData = enemyActionSelection(combatStatus);\n\n      const timeoutId = setTimeout(() => {\n        dispatch(actionTurn(actionData));\n        setActionSelection(null);\n        setTargetSelection(null);\n      }, DELAY_FOR_CPU_OPPONENT);\n      return () => clearTimeout(timeoutId);\n    }\n  }, [combatStatus, dispatch]);\n\n  useEffect(() => {\n    if (combatStatus.turn?.isStunned) {\n      const timeoutId = setTimeout(() => {\n        dispatch(actionTurn({ action: \"wait\", target: \"\" }));\n        setActionSelection(null);\n        setTargetSelection(null);\n      }, 2000);\n      return () => clearTimeout(timeoutId);\n    }\n    if (actionSelection && targetSelection) {\n      dispatch(\n        actionTurn({ action: actionSelection, target: targetSelection })\n      );\n      setActionSelection(null);\n      setTargetSelection(null);\n      return;\n    }\n    if (\n      actionSelection &&\n      !targetSelection &&\n      combatStatus.turn &&\n      !actionRequiresEnemyTarget(\n        combatStatus.turn.creature.card,\n        actionSelection\n      ) &&\n      !actionRequiresFriendlyTarget(\n        combatStatus.turn.creature.card,\n        actionSelection\n      )\n    ) {\n      const action = combatStatus.turn.actions.find(\n        (f) => f.name === actionSelection\n      );\n      if (!action) return;\n      const targetName = action.targets.reduce<string | null>(\n        (r, target) => {\n          if (r) return r;\n          if (target === \"self\") {\n            return combatStatus.turn?.creature.id ?? null;\n          }\n          return \"all\";\n        },\n\n        null\n      );\n      if (targetName) {\n        dispatch(actionTurn({ action: actionSelection, target: targetName }));\n        return;\n      }\n    }\n  }, [actionSelection, targetSelection, dispatch, combatStatus.turn]);\n\n  useEffect(() => {\n    if (\n      combatStatus.turn &&\n      combatStatus.turn.creature.party === \"left\" &&\n      actionSelection === null\n    ) {\n      const actionIndices = combatStatus.turn.actions.reduce(\n        (result, action, index) =>\n          action.disabled ? result : result.concat(index),\n        [] as number[]\n      );\n\n      const keyHandling = (ev: KeyboardEvent) => {\n        if (ev.code === \"ArrowDown\") {\n          setActionFocus(\n            (state) =>\n              actionIndices[\n                (actionIndices.indexOf(state) + 1) % actionIndices.length\n              ]\n          );\n        }\n        if (ev.code === \"ArrowUp\") {\n          setActionFocus(\n            (state) =>\n              actionIndices[\n                (actionIndices.length + actionIndices.indexOf(state) - 1) %\n                  actionIndices.length\n              ]\n          );\n        }\n        if ((ev.code === \"Space\" || ev.code === \"Enter\") && combatStatus.turn) {\n          setActionSelection(combatStatus.turn.actions[actionFocus].name);\n          setActionFocus(0);\n        }\n      };\n      window.addEventListener(\"keydown\", keyHandling);\n      return () => {\n        window.removeEventListener(\"keydown\", keyHandling);\n      };\n    }\n\n    if (\n      combatStatus.turn &&\n      combatStatus.turn.creature.party === \"left\" &&\n      actionSelection &&\n      targetSelection === null\n    ) {\n      const party = (\n        actionRequiresEnemyTarget(\n          combatStatus.turn.creature.card,\n          actionSelection\n        )\n          ? combatStatus.partyB\n          : actionRequiresFriendlyTarget(\n              combatStatus.turn.creature.card,\n              actionSelection\n            )\n          ? combatStatus.partyA\n          : []\n      ).filter((a) => a.health > 0);\n\n      const keyHandling = (ev: KeyboardEvent) => {\n        if (ev.code === \"ArrowDown\") {\n          setActionFocus((state) => (state + 1) % party.length);\n        }\n        if (ev.code === \"ArrowUp\") {\n          setActionFocus((state) => (party.length + state - 1) % party.length);\n        }\n        if ((ev.code === \"Space\" || ev.code === \"Enter\") && combatStatus.turn) {\n          setTargetSelection(party[actionFocus].id);\n          setActionFocus(0);\n        }\n      };\n      window.addEventListener(\"keydown\", keyHandling);\n      return () => {\n        window.removeEventListener(\"keydown\", keyHandling);\n      };\n    }\n  }, [\n    actionSelection,\n    combatStatus.turn,\n    combatStatus.partyB,\n    combatStatus.partyA,\n    setActionFocus,\n    actionFocus,\n    setTargetSelection,\n    targetSelection,\n  ]);\n\n  return (\n    <div className={styles.fightScreen}>\n      <img\n        src={systeemImage}\n        width={100}\n        height={100}\n        alt={\"Schoen -> Zak -> Roe\"}\n        style={{ position: \"absolute\", top: \"10px\", left: \"10px\" }}\n      />\n      <img\n        src={logo}\n        height={100}\n        alt={\"Tristámon\"}\n        style={{ position: \"absolute\", top: \"10px\", right: \"10px\" }}\n      />\n      <div className={styles.log}>\n        {combatLog.map((sentence, index) => (\n          <CombatLogSentence sentence={sentence} key={index} />\n        ))}\n        {combatStatus.turn && combatStatus === delayedCombatStatus && (\n          <p>\n            <strong>{combatStatus.turn.creature.card.name}</strong> is aan de\n            beurt!\n          </p>\n        )}\n      </div>\n      <CombatView />\n\n      <div className={styles.partyStats}>\n        <div className={styles.partyBox}>\n          {characterOrder.map((member) => (\n            <MemberStats\n              member={member}\n              key={member.id}\n              inTurn={\n                !!(\n                  combatStatus.turn &&\n                  combatStatus.turn.creature.id === member.id\n                )\n              }\n            />\n          ))}\n        </div>\n      </div>\n\n      {combatStatus.turn &&\n        combatStatus === delayedCombatStatus &&\n        combatStatus.turn.creature.party === \"left\" &&\n        !combatStatus.turn.isStunned &&\n        actionSelection === null && (\n          <div className={styles.actionsMenu}>\n            <h2>\n              Kies je actie, {combatStatus.turn.creature.card.name}{\" \"}\n              <Icon symbol={combatStatus.turn.creature.card.type} />:\n            </h2>\n            <ul>\n              {combatStatus.turn.actions.map((action, index) => (\n                <li\n                  key={action.name}\n                  className={className({\n                    [styles.focusAction]: index === actionFocus,\n                    [styles.disabledAction]: action.disabled,\n                  })}\n                >\n                  <p>\n                    <strong>{action.name}</strong>\n                  </p>\n                  {action.inCooldown > 0 && (\n                    <span>(Afkoelen: {action.inCooldown} beurten)</span>\n                  )}\n                  <p>\n                    {action.damage > 0 && action.damageType === undefined\n                      ? action.targets.includes(\"allEnemies\")\n                        ? `Schade iedereen: ${action.damage}. `\n                        : `Schade: ${action.damage}. `\n                      : \"\"}\n                    {action.damage > 0 && action.damageType === \"stun\"\n                      ? action.targets.includes(\"allEnemies\")\n                        ? `Verdoof iedereen: ${action.damage} beurten. `\n                        : `Verdoof: ${action.damage} beurten. `\n                      : \"\"}\n                    {action.damage < 0\n                      ? action.targets.includes(\"allFriendlies\")\n                        ? `Genees iedereen: ${action.damage * -1} HP. `\n                        : `Genezing: ${action.damage * -1} HP. `\n                      : \"\"}\n                    {action.cooldown > 0\n                      ? `Afkoeling: ${action.cooldown} beurten. `\n                      : \"\"}\n                    {action.cost > 0 ? `Kosten: ${action.cost} energie.` : \"\"}\n                  </p>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n      {combatStatus.turn &&\n        combatStatus === delayedCombatStatus &&\n        combatStatus.turn.creature.party === \"left\" &&\n        actionSelection &&\n        actionRequiresEnemyTarget(\n          combatStatus.turn.creature.card,\n          actionSelection\n        ) &&\n        targetSelection === null && (\n          <div className={styles.actionsMenu}>\n            <h2>\n              Kies je \"{actionSelection}\" doelwit,\n              {combatStatus.turn.creature.card.name}{\" \"}\n              <Icon symbol={combatStatus.turn.creature.card.type} />:\n            </h2>\n            <ul>\n              {combatStatus.partyB\n                .filter((a) => a.health > 0)\n                .map((target, index) => (\n                  <li\n                    key={target.id}\n                    className={className({\n                      [styles.focusAction]: index === actionFocus,\n                    })}\n                  >\n                    <p>\n                      <strong>\n                        <Icon symbol={target.card.type} /> {target.card.name}\n                      </strong>\n                    </p>\n                    <p>\n                      HP: {target.health} / {target.card.health}\n                    </p>\n                  </li>\n                ))}\n            </ul>\n          </div>\n        )}\n      {combatStatus.turn &&\n        combatStatus === delayedCombatStatus &&\n        combatStatus.turn.creature.party === \"left\" &&\n        actionSelection &&\n        actionRequiresFriendlyTarget(\n          combatStatus.turn.creature.card,\n          actionSelection\n        ) &&\n        targetSelection === null && (\n          <div className={styles.actionsMenu}>\n            <h2>\n              Kies je \"{actionSelection}\" doelwit,\n              {combatStatus.turn.creature.card.name}{\" \"}\n              <Icon symbol={combatStatus.turn.creature.card.type} />:\n            </h2>\n            <ul>\n              {combatStatus.partyA\n                .filter((a) => a.health > 0)\n                .map((target, index) => (\n                  <li\n                    key={target.id}\n                    className={className({\n                      [styles.focusAction]: index === actionFocus,\n                    })}\n                  >\n                    <p>\n                      <strong>{target.card.name}</strong>\n                    </p>\n                    <p>\n                      HP: {target.health} / {target.card.health}\n                    </p>\n                  </li>\n                ))}\n            </ul>\n          </div>\n        )}\n    </div>\n  );\n};\n\nexport default CombatArena;\n","import React, { useEffect } from \"react\";\nimport styles from \"./Dialog.module.css\";\n\ntype Props = {\n  color: string;\n  name: string;\n  onClick: () => void;\n};\n\nconst Dialog: React.FunctionComponent<Props> = ({\n  color,\n  name,\n  onClick,\n  children,\n}) => {\n  useEffect(() => {\n    const keyListener = (event: KeyboardEvent) => {\n      if (event.code === \"Enter\" || event.code === \"Space\") {\n        onClick();\n      }\n    };\n    window.addEventListener(\"keydown\", keyListener);\n\n    return () => {\n      window.removeEventListener(\"keydown\", keyListener);\n    };\n  }, [onClick]);\n  return (\n    <div className={styles.dialogBox} onClick={onClick}>\n      <h3 style={{ color }}>{name}</h3>\n      <p>{children}</p>\n    </div>\n  );\n};\n\nexport default Dialog;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"./store\";\nimport { CharacterSprites, CreatureCardId, Position } from \"../types\";\n\nexport interface CharacterState {\n  x: number;\n  y: number;\n  z: number;\n  level: string;\n  positionHistory: Position[];\n  followers: CharacterSprites[];\n  cards: CreatureCardId[];\n  xp: Record<CreatureCardId, number>;\n}\n\nconst initialState: CharacterState = {\n  // level: \"Feest\",\n  // x: 10,\n  // y: -6,\n  // z: 1,\n  level: \"Slaapkamer\",\n  x: 3,\n  y: 1,\n  z: 2,\n  positionHistory: [],\n  followers: [],\n  cards: [],\n  xp: {},\n};\n\nexport const characterSlice = createSlice({\n  name: \"character\",\n  initialState,\n  reducers: {\n    move: (state, action: PayloadAction<Position>) => {\n      if (\n        action.payload[0] === state.x &&\n        action.payload[1] === state.y &&\n        action.payload[2] === state.z\n      )\n        return;\n      state.positionHistory.unshift([state.x, state.y, state.z]);\n      state.positionHistory = state.positionHistory.slice(0, 6);\n\n      state.x = action.payload[0];\n      state.y = action.payload[1];\n      state.z = action.payload[2];\n    },\n    getCard: (state, action: PayloadAction<string>) => {\n      state.cards.push(action.payload);\n    },\n    removeCard: (state, action: PayloadAction<string>) => {\n      state.cards = state.cards.filter((c) => c !== action.payload);\n    },\n    addFollower: (state, action: PayloadAction<CharacterSprites>) => {\n      state.followers.unshift(action.payload);\n    },\n    giveXP: (state, action: PayloadAction<number>) => {\n      state.cards.forEach((card) => {\n        state.xp[card] = state.xp[card] || 0;\n        state.xp[card] += action.payload;\n      });\n    },\n    enterLevel: (\n      state,\n      action: PayloadAction<{ level: string; position: Position }>\n    ) => {\n      state.level = action.payload.level;\n      const [x, y, z] = action.payload.position;\n      state.x = x;\n      state.y = y;\n      state.z = z;\n      state.positionHistory = [];\n    },\n  },\n});\n\nexport const { move, getCard, removeCard, enterLevel, addFollower, giveXP } =\n  characterSlice.actions;\n\nexport const selectPosition = (state: RootState): Position => [\n  state.character.x,\n  state.character.y,\n  state.character.z,\n];\n\nexport const selectZone = (state: RootState): string => state.character.level;\n\nexport const selectCardIds = (state: RootState): CreatureCardId[] =>\n  state.character.cards;\n\nexport const selectFollowers = (\n  state: RootState\n): { pos: Position; index: CharacterSprites }[] =>\n  state.character.followers.map((id, index) => ({\n    index: id,\n    pos: state.character.positionHistory[index] || [\n      state.character.x,\n      state.character.y,\n      state.character.z,\n    ],\n  }));\n\nexport default characterSlice.reducer;\n","import React from \"react\";\nimport { Position } from \"../types\";\nimport styles from \"./Character.module.css\";\n\ntype Props = {\n  position: Position;\n  index?: number;\n  size?: \"normal\" | \"small\";\n};\n\nexport const calculateXy = (position: Position): { x: number; y: number } => ({\n  x: 64 * position[0] + 64 * position[1] + 200,\n  y: 32 * position[0] - 32 * position[1] - 78 * position[2] + 200,\n});\n\nconst calculatePosition = (\n  position: Position,\n  size: \"normal\" | \"small\"\n): React.CSSProperties => {\n  const { x, y } = calculateXy(position);\n  return {\n    transform: `translate(${x}px, ${y}px) ${\n      size === \"small\" ? \"scale(0.75)\" : \"\"\n    }`,\n    zIndex: `${100 + position[0] - position[1] + 10 * position[2]}`,\n  };\n};\n\nconst Character: React.FunctionComponent<Props> = ({\n  position,\n  index = 0,\n  size = \"normal\",\n}) => (\n  <div\n    className={styles.character}\n    style={{\n      ...calculatePosition(position, size),\n      backgroundPosition: `-${index * 128}px 0px`,\n    }}\n  />\n);\n\nexport default Character;\n","import { Direction, TerrainTile } from \"../types\";\n\nconst tileMapping: Record<TerrainTile[\"set\"], string> = {\n  terrain: \"kenney_platformerkit\",\n  furniture: \"kenney_furniturekit\",\n  fantasy: \"kenney_fantasytownkit\",\n  holiday: \"kenney_holidaykit\",\n};\n\nconst directionMapping: Record<\n  TerrainTile[\"set\"],\n  Record<Direction, string>\n> = {\n  terrain: {\n    north: \"NE\",\n    east: \"SE\",\n    south: \"SW\",\n    west: \"NW\",\n  },\n  holiday: {\n    north: \"NE\",\n    east: \"SE\",\n    south: \"SW\",\n    west: \"NW\",\n  },\n  furniture: {\n    north: \"NE\",\n    east: \"SE\",\n    south: \"SW\",\n    west: \"NW\",\n  },\n  fantasy: {\n    north: \"N\",\n    east: \"E\",\n    south: \"S\",\n    west: \"W\",\n  },\n};\nconst remapDirection: Record<string, Record<Direction, Direction>> = {\n  stairs: {\n    east: \"west\",\n    north: \"west\",\n    west: \"south\",\n    south: \"east\",\n  },\n};\n\nexport const getTileSrc = (tile: TerrainTile): string => {\n  const direction = remapDirection[tile.img]\n    ? remapDirection[tile.img][tile.direction ?? \"north\"]\n    : tile.direction ?? \"north\";\n  return `/images/${tileMapping[tile.set]}/Isometric/${tile.img}_${\n    directionMapping[tile.set][direction]\n  }.png`;\n};\n","import React from \"react\";\nimport { Position, TerrainTile, TileSize } from \"../types\";\nimport styles from \"./Tile.module.css\";\nimport { getTileSrc } from \"./tileHelpers\";\n\nconst sizeMapping: Record<TileSize, { x: number; y: number }> = {\n  wide: { x: 0, y: 0 },\n  normal: { x: 0, y: 0 },\n  large: { x: 64, y: 0 },\n  small: { x: -16, y: 0 },\n};\n\ntype TileData = {\n  width: number;\n  height: number;\n  offsetX: number;\n  offsetY: number;\n  offsetZ?: number;\n};\n\ntype TileDirectionData = Record<string, TileData>;\n\nconst furnitureLookup: Record<string, TileDirectionData> = {\n  floorFull: {\n    north: {\n      width: 128,\n      height: 67,\n      offsetX: 193,\n      offsetY: 204,\n    },\n  },\n  wall: {\n    north: {\n      width: 68,\n      height: 94,\n      offsetX: 254,\n      offsetY: 254,\n    },\n    west: {\n      width: 68,\n      height: 94,\n      offsetX: 194,\n      offsetY: 254,\n    },\n  },\n  bedSingle: {\n    east: {\n      width: 135,\n      height: 82,\n      offsetX: 206,\n      offsetY: 270,\n    },\n  },\n  desk: {\n    east: {\n      width: 112,\n      height: 85,\n      offsetX: 196,\n      offsetY: 250,\n    },\n  },\n  wallDoorway: {\n    west: {\n      width: 128,\n      height: 158,\n      offsetX: 154,\n      offsetY: 124,\n      offsetZ: 11,\n    },\n  },\n  stairs: {\n    east: {\n      width: 190,\n      height: 178,\n      offsetX: 195,\n      offsetY: 204,\n      offsetZ: 1,\n    },\n  },\n  loungeDesignSofa: {\n    north: {\n      width: 150,\n      height: 110,\n      offsetX: 195,\n      offsetY: 224,\n    },\n  },\n  doorwayOpen: {\n    west: {\n      width: 68,\n      height: 130,\n      offsetX: 194,\n      offsetY: 220,\n      offsetZ: 1,\n    },\n  },\n};\n\nconst getDimensions = (tile: TerrainTile): TileData => {\n  if (tile.set === \"terrain\" || tile.set === \"holiday\") {\n    const size = sizeMapping[tile.size ?? \"normal\"];\n\n    return {\n      width: 512,\n      height: 512,\n      offsetX: size.x,\n      offsetY: size.y,\n    };\n  } else if (tile.set === \"fantasy\") {\n    const size = sizeMapping[tile.size ?? \"normal\"];\n    const defaultSettings = {\n      width: 512,\n      height: 512,\n      offsetX: tile.direction === \"south\" ? size.x : size.x,\n      offsetY: tile.direction === \"south\" ? 0 : 0,\n      offsetZ: tile.direction === \"south\" ? 0 : 0,\n    };\n\n    const elevatedSettings = {\n      width: 512,\n      height: 512,\n      offsetX: 0,\n      offsetY: -70,\n      offsetZ: 1,\n    };\n\n    if ([\"roadCurb\", \"roadEdge\", \"road\", \"planks\"].includes(tile.img))\n      return elevatedSettings;\n\n    return defaultSettings;\n  } else {\n    // furniture\n    const defaultSettings = {\n      width: 68,\n      height: 94,\n      offsetX: 194,\n      offsetY: 254,\n    };\n    const tileConfig = furnitureLookup[tile.img];\n    return tileConfig\n      ? tileConfig[tile.direction ?? \"north\"] ?? defaultSettings\n      : defaultSettings;\n  }\n};\n\nconst getStyle = (\n  position: Position,\n  tileData: TileData\n): React.CSSProperties => {\n  return {\n    transform: `translate(${\n      64 * position[0] + 64 * position[1] + tileData.offsetX\n    }px, ${\n      32 * position[0] - 32 * position[1] - 78 * position[2] + tileData.offsetY\n    }px)`,\n    zIndex: `${\n      100 +\n      position[0] -\n      position[1] +\n      10 * position[2] +\n      (tileData.offsetZ ?? 0)\n    }`,\n  };\n};\n\ntype Props = {\n  tile: TerrainTile;\n};\n\nconst Tile: React.FunctionComponent<Props> = ({ tile }) => {\n  const dimensions = getDimensions(tile);\n  return (\n    <img\n      src={\".\" + getTileSrc(tile)}\n      width={dimensions.width}\n      height={dimensions.height}\n      alt={tile.img}\n      className={styles.tile}\n      style={getStyle(tile.coord, dimensions)}\n    />\n  );\n};\n\nexport default Tile;\n","import { PreparedImageDefinition } from \"geppetto-player\";\n\nexport enum CharacterSprites {\n  Tristan = 0,\n  Catoo = 1,\n  Tinka = 2,\n  Carl = 3,\n  Gina = 4,\n  Piet = 5,\n  Sint = 6,\n  Amerigo = 7,\n  Matthijs = 8,\n}\n\nexport type Creature = {\n  card: CreatureCardId;\n  id: string;\n  health: number;\n  energy: number;\n  cooldowns: Record<string, number>;\n  party: \"left\" | \"right\";\n  inTurn: number;\n};\n\nexport type ActionType = \"heals\" | \"hurts\" | \"stuns\";\n\nexport type ActionSentence = {\n  source: Creature;\n  action: ActionType;\n  target: Creature;\n  with: string;\n  points: number;\n  unit: \"points\" | \"turns\";\n};\n\nexport type CombatResult = \"inProgress\" | \"retreat\" | \"won\" | \"lost\";\n\nexport type Direction = \"north\" | \"east\" | \"south\" | \"west\";\nexport type Position = [number, number, number];\nexport type TileSize = \"normal\" | \"small\" | \"large\" | \"wide\";\nexport type TerrainTile = {\n  coord: Position;\n  img: string;\n  direction?: Direction;\n  size?: TileSize;\n  set: \"terrain\" | \"furniture\" | \"fantasy\" | \"holiday\";\n};\n\nexport type Dialog = {\n  characterName: string;\n  characterColor: string;\n  text: string[];\n};\n\nexport type Fight = {\n  dialog?: Dialog[];\n  enemies: CreatureCardId[];\n};\n\nexport type LevelCharacter = {\n  initialDialog: Dialog[];\n  winDialog: Dialog[];\n  loseDialog: Dialog[];\n  conditions?: {\n    minimalCards?: number;\n    encountersCompleted?: CharacterSprites[];\n  };\n  conditionDialog: Dialog[];\n  characterSprite: CharacterSprites;\n  position: Position;\n  fights: Fight[];\n  rewards: {\n    follower?: CharacterSprites;\n    card?: string;\n    removeCard?: string;\n    xp?: number;\n    gameCompleted?: boolean;\n  };\n};\n\nexport type LevelExit = {\n  coord: Position;\n  level: string;\n  startCoord: Position;\n};\n\nexport type LevelData = {\n  name: string;\n  tiles: TerrainTile[];\n  decorations: TerrainTile[];\n  characters: LevelCharacter[];\n  exits: LevelExit[];\n};\n\nexport type ActionTarget =\n  | \"weakness\"\n  | \"minHealth\"\n  | \"maxHealth\"\n  | \"enemy\"\n  | \"friendly\"\n  | \"allEnemies\"\n  | \"allFriendlies\"\n  | \"self\";\n\nexport type Action = {\n  name: string;\n  damage: number;\n  damageType?: \"stun\";\n  animationTrack?: { track: string; target: \"self\" | \"environment\" };\n  cost: number;\n  cooldown: number;\n  targets: ActionTarget[];\n};\n\nexport type CreatureCardId = string;\n\nexport type CreatureType = \"shoe\" | \"bag\" | \"rod\";\n\nexport type CreatureCard = {\n  id: string;\n  name: string;\n  level: number;\n  initiative: number;\n\n  xpResult: number;\n\n  type: CreatureType;\n  health: number;\n  energy: number;\n\n  texture: Promise<HTMLImageElement>;\n  animation: PreparedImageDefinition;\n\n  actions: Action[];\n};\n","import { CharacterSprites, LevelCharacter } from \"../../types\";\n\nexport const amerigo: LevelCharacter = {\n  characterSprite: CharacterSprites.Amerigo,\n  position: [4, 2, 2],\n  conditionDialog: [],\n  initialDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Whaa er staat een paard in mijn kamer!\"],\n    },\n    {\n      characterColor: \"lightblue\",\n      characterName: \"Amerigo\",\n      text: [\n        \"Tristan help!\",\n        \"Al het speelgoed van Sinterklaas is tot leven gekomen!\",\n        \"En nu houden ze de Sint, Hoofdpiet en jouw familie gevangen!\",\n        \"We moeten ze redden. Ik zal je helpen.\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Dat gaan we doen! Ik ben tenslotte een goede Pokémon trainer!\"],\n    },\n    {\n      characterColor: \"lightblue\",\n      characterName: \"Amerigo\",\n      text: [\"Amerigo, go!\"],\n    },\n    {\n      characterColor: \"lightblue\",\n      characterName: \"Amerigo\",\n      text: [\"**Poef**\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\n        \"Wow! Amerigo is nu in mijn Pokébal gegaan!\",\n        \"Nu op zoek naar mijn familie!\",\n      ],\n    },\n  ],\n  fights: [],\n  rewards: {\n    card: \"amerigo\",\n  },\n  winDialog: [],\n  loseDialog: [],\n};\n","import { CharacterSprites, LevelCharacter } from \"../../types\";\n\nexport const carl: LevelCharacter = {\n  characterSprite: CharacterSprites.Carl,\n  position: [11, -7, 1],\n  conditions: {\n    minimalCards: 1,\n  },\n  conditionDialog: [\n    {\n      characterColor: \"green\",\n      characterName: \"Carl\",\n      text: [\"Tris! Dit slijmmonster houdt mij gevangen!\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ik heb niets om mee te vechten!\", \"Ik kom later terug.\"],\n    },\n  ],\n  initialDialog: [\n    {\n      characterColor: \"green\",\n      characterName: \"Carl\",\n      text: [\n        \"Tris! Dit slijmmonster houdt mij gevangen!\",\n        \"Ik heb dit nog nooit meegemaakt!\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ik help je wel Pa!\"],\n    },\n  ],\n  fights: [{ enemies: [\"slime\"] }],\n  rewards: {\n    follower: CharacterSprites.Carl,\n    xp: 25,\n  },\n  winDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Zo Pap, daar heb ik korte metten mee gemaakt!\"],\n    },\n    {\n      characterColor: \"green\",\n      characterName: \"Carl\",\n      text: [\"Jij weet van aanpakken! Ik ga ook met je mee!\"],\n    },\n  ],\n  loseDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Oei dat ging niet helemaal lekker!\"],\n    },\n    {\n      characterColor: \"green\",\n      characterName: \"Carl\",\n      text: [\"Gewoon nog een keertje proberen!\"],\n    },\n  ],\n};\n","import { CharacterSprites, LevelCharacter } from \"../../types\";\n\nexport const catoo: LevelCharacter = {\n  characterSprite: CharacterSprites.Catoo,\n  position: [10, 2, 1],\n  conditions: {\n    minimalCards: 1,\n  },\n  conditionDialog: [\n    {\n      characterColor: \"pink\",\n      characterName: \"Catootje\",\n      text: [\n        \"Help, grote broer! Ik wordt door speelgoed gevangen gehouden!\",\n        \"Kan jij deze robot verslaan?\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ik heb niets om mee te vechten!\", \" Ik kom later terug.\"],\n    },\n  ],\n  initialDialog: [\n    {\n      characterColor: \"pink\",\n      characterName: \"Catootje\",\n      text: [\n        \"Help, grote broer! Ik wordt door speelgoed gevangen gehouden!\",\n        \"Kan jij deze robot verslaan?\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Natuurlijk kan ik dat!\"],\n    },\n  ],\n  fights: [{ enemies: [\"robot\"] }],\n  rewards: {\n    follower: CharacterSprites.Catoo,\n    xp: 25,\n  },\n  winDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ha! Daar hebben we mooi van gewonnen Amerigo!\"],\n    },\n    {\n      characterColor: \"lightblue\",\n      characterName: \"Amerigo\",\n      text: [\n        \"Ja zeker, maar mijn schade kwam niet volledig aan.\",\n        \"Dit komt omdat ik een :scissors: (schoen) type ben, en deze robot is van het type :rock: (roe)\",\n        \":rock: (roe) is sterker tegen :scissors: (schoen), :scissors: (schoen) is sterker tegen :paper: (zak), en :paper: (zak) is weer sterker tegen :rock: (roe).\",\n        \"Gebruik die informatie voor tactische keuzes!\",\n      ],\n    },\n    {\n      characterColor: \"pink\",\n      characterName: \"Catootje\",\n      text: [\n        \"Goed gedaan broer!\",\n        \"Ik ga met je mee! Dan gaan we de anderen redden!\",\n      ],\n    },\n  ],\n  loseDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Oei dat moet ik nog maar eens proberen\"],\n    },\n    {\n      characterColor: \"pink\",\n      characterName: \"Catootje\",\n      text: [\"Je kan het!\"],\n    },\n  ],\n};\n","import { CharacterSprites, LevelCharacter } from \"../../types\";\n\nexport const gina: LevelCharacter = {\n  characterSprite: CharacterSprites.Gina,\n  position: [14, 3, 2],\n  conditions: {\n    minimalCards: 1,\n  },\n  conditionDialog: [\n    {\n      characterColor: \"red\",\n      characterName: \"Gina\",\n      text: [\"Help Tristan! Al dit speelgoed is ineens op hol geslagen!\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\n        \"Dat klopt Amma! ik ben dat aan het fixen!\",\n        \"Ik moet alleen iets hebben om mee te vechten!\",\n      ],\n    },\n  ],\n  initialDialog: [\n    {\n      characterColor: \"red\",\n      characterName: \"Gina\",\n      text: [\"Help Tristan! Al dit speelgoed is ineens op hol geslagen!\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Dat klopt Amma! ik ben dat aan het fixen!\"],\n    },\n    {\n      characterColor: \"red\",\n      characterName: \"Gina\",\n      text: [\"Help!!\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Blijf rustig Amma! Ik knok ze wel weg!\"],\n    },\n  ],\n  fights: [\n    { enemies: [\"robot\", \"robot\", \"robot\"] },\n    { enemies: [\"slime\", \"bear\"] },\n  ],\n  rewards: {\n    follower: CharacterSprites.Gina,\n    xp: 100,\n  },\n  winDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Poe, dat was wel even een gevecht...\"],\n    },\n    {\n      characterColor: \"red\",\n      characterName: \"Gina\",\n      text: [\"Goed gedaan jongen! Ik ga met je mee!\"],\n    },\n  ],\n  loseDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Dat was best wel lastig...\"],\n    },\n    {\n      characterColor: \"red\",\n      characterName: \"Gina\",\n      text: [\"Als iemand dit moet kunnen dan ben jij dit!\"],\n    },\n  ],\n};\n","import { CharacterSprites, LevelCharacter } from \"../../types\";\n\nexport const piet: LevelCharacter = {\n  characterSprite: CharacterSprites.Piet,\n  position: [14, 6, 1],\n  conditions: {\n    minimalCards: 1,\n  },\n  conditionDialog: [\n    {\n      characterColor: \"navyblue\",\n      characterName: \"Piet\",\n      text: [\"Hey Tristan! Ons speelgoed is tot leven gekomen!\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ik heb niets om mee te vechten!\", \" Ik kom later terug.\"],\n    },\n  ],\n  initialDialog: [\n    {\n      characterColor: \"navyblue\",\n      characterName: \"Piet\",\n      text: [\n        \"Hey Tristan! Ons speelgoed is tot leven gekomen!\",\n        \"Zou jij mij kunnen helpen? Ik heb dan een tof cadeau voor jou!\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ik ben benieuwd! Maar eerst jou helpen!\"],\n    },\n  ],\n  fights: [{ enemies: [\"robot\", \"bear\"] }],\n  rewards: {\n    follower: CharacterSprites.Piet,\n    card: \"ozosnel\",\n  },\n  winDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Kijk Piet, zo doe je dat!\"],\n    },\n    {\n      characterColor: \"navyblue\",\n      characterName: \"Piet\",\n      text: [\n        \"Wow, jij bent wel echt een goede Pokémon vechter!\",\n        \"Ik heb echt een perfect cadeau voor jou!\",\n        \"Kijk, hier een mooie Pokébal met Ozosnel!\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Wauw, super vet!\"],\n    },\n  ],\n  loseDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Oei, dat moet ik nog maar eens proberen\"],\n    },\n    {\n      characterColor: \"navyblue\",\n      characterName: \"Piet\",\n      text: [\"Je kan het, dat weet ik zeker!\"],\n    },\n  ],\n};\n","import { CharacterSprites, LevelCharacter } from \"../../types\";\n\nexport const sint: LevelCharacter = {\n  characterSprite: CharacterSprites.Sint,\n  position: [10, 9, 3],\n  conditions: {\n    minimalCards: 2,\n  },\n  conditionDialog: [\n    {\n      characterColor: \"yellow\",\n      characterName: \"Sinterklaas\",\n      text: [\n        \"Hoi Tristan, begrijp ik goed dat jij me van dit...\",\n        \"...probleempje kan verlossen?\",\n        \"Normaal ben ik juist blij met speelgoed, maar dit loopt een beetje uit de hand...\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ik kom terug zodra ik beter kan vechten!\"],\n    },\n  ],\n  initialDialog: [\n    {\n      characterColor: \"yellow\",\n      characterName: \"Sinterklaas\",\n      text: [\n        \"Hoi Tristan, begrijp ik goed dat jij me van dit...\",\n        \"...probleempje kan verlossen?\",\n        \"Normaal ben ik juist blij met speelgoed, maar dit loopt een beetje uit de hand...\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\n        \"Ik ben de beste Pokémon trainer van het land Sinterklaas!\",\n        \"Hier ben ik weer hoor!\",\n        \"Bereid je maar voor!\",\n        \"OP EEN EPISCH GEVECHT!!\",\n      ],\n    },\n  ],\n  fights: [\n    { enemies: [\"robot\", \"slime\"] },\n    { enemies: [\"bear\", \"bear\", \"slime\"] },\n    { enemies: [\"robot\", \"robot\", \"bear\"] },\n  ],\n  rewards: {\n    follower: CharacterSprites.Sint,\n  },\n  winDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ha! Daar heb ik mooi van gewonnen!\"],\n    },\n    {\n      characterColor: \"yellow\",\n      characterName: \"Sinterklaas\",\n      text: [\n        \"Fantastisch gedaan jongen! Dat was...\",\n        \"GEWELDIG!\",\n        \"(en geweldadig)\",\n        \"Trouwens, wat heb je precies met mijn paarden gedaan?\",\n        \"Ze zien er zo... Blits uit...\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ik heb ze even ge-evolueerd Sinterklaas.\"],\n    },\n    {\n      characterColor: \"yellow\",\n      characterName: \"Sinterklaas\",\n      text: [\n        \"Nou, euhm, goed dan... laten we nu fijn mijn verjaardag gaan vieren!\",\n        \"Zullen we naar dat gezellige huisje bovenaan de berg gaan?\",\n        \"Volgens mij liggen daar alle pakjes...\",\n      ],\n    },\n  ],\n  loseDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Jikes! Dat was echt moeilijk!\"],\n    },\n    {\n      characterColor: \"yellow\",\n      characterName: \"Sinterklaas\",\n      text: [\n        \"Ik lees hier net wat tips in mijn grote boek.\",\n        \"Let op dat Zak :paper: altijd sterker is tegen Roe :rock:\",\n        \"en Roe :rock: sterker is tegen Schoen :scissors:\",\n        \"en Schoen :scissors: sterker is tegen Zak :paper:.\",\n        \"Oja. En wees zuinig met waar je je energie aan uitgeeft!\",\n        \"Ik kwam er net achter dat de beren pas gaan genezen onder\",\n        \"15 punten. Dus misschien net daarboven een grote aanval plannen?\",\n      ],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Dat zijn goede tips Sinterklaas, bedankt!\"],\n    },\n  ],\n};\n","import { CharacterSprites, LevelCharacter } from \"../../types\";\n\nexport const tinka: LevelCharacter = {\n  characterSprite: CharacterSprites.Tinka,\n  position: [11, -4, 1],\n  conditions: {\n    minimalCards: 1,\n  },\n  conditionDialog: [\n    {\n      characterColor: \"red\",\n      characterName: \"Tinka\",\n      text: [\"Help Tristan! Deze beer houdt mij in zijn greep!\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Mam ik wil je helpen, maar ik heb nu niets om mee te vechten!\"],\n    },\n  ],\n  initialDialog: [\n    {\n      characterColor: \"red\",\n      characterName: \"Tinka\",\n      text: [\"Help Tristan! Deze beer houdt mij in zijn greep!\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ik help je mam. Blijf maar rustig, geen paniek.\"],\n    },\n    {\n      characterColor: \"red\",\n      characterName: \"Tinka\",\n      text: [\"Iiieee!!! Ik vindt het eng!!\"],\n    },\n  ],\n  fights: [{ enemies: [\"bear\"] }],\n  rewards: {\n    follower: CharacterSprites.Tinka,\n    xp: 25,\n  },\n  winDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Zie je mam, geen probleem!\"],\n    },\n    {\n      characterColor: \"red\",\n      characterName: \"Tinka\",\n      text: [\n        \"Tristan, je bent geweldig!\",\n        \"Ik ga met je mee, dan kunnen we anderen helpen.\",\n      ],\n    },\n  ],\n  loseDialog: [\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Hmm dat moet ik nog maar eens oefenen!\"],\n    },\n    {\n      characterColor: \"red\",\n      characterName: \"Tinka\",\n      text: [\"Kom snel terug!!\"],\n    },\n  ],\n};\n","import { LevelData } from \"../types\";\nimport stage1 from \"./stage1\";\nimport bedroom from \"./bedroom\";\nimport livingroom from \"./livingroom\";\nimport street from \"./street\";\nimport mountain from \"./mountain\";\nimport finish from \"./finish\";\n\nconst zones = [stage1, bedroom, livingroom, street, mountain, finish].reduce(\n  (r, e) => ({ ...r, [e.name]: e }),\n  {} as Record<string, LevelData>\n);\n\nexport default zones;\n","import { LevelData } from \"../types\";\nimport { amerigo } from \"./characters/amerigo\";\nimport { carl } from \"./characters/carl\";\nimport { catoo } from \"./characters/catoo\";\nimport { gina } from \"./characters/gina\";\nimport { piet } from \"./characters/piet\";\nimport { sint } from \"./characters/sint\";\nimport { tinka } from \"./characters/tinka\";\n\nconst stage1: LevelData = {\n  name: \"Stage1\",\n  tiles: [\n    { coord: [1, 1, 1], img: \"block\", set: \"terrain\" },\n    { coord: [1, 1, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [2, 1, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [3, 1, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [2, 1, 1], img: \"block\", set: \"terrain\" },\n    {\n      coord: [3, 1, 1],\n      img: \"blockCornerSmall\",\n      set: \"terrain\",\n      direction: \"east\",\n    },\n    { coord: [1, 2, 1], img: \"block\", set: \"terrain\" },\n    { coord: [3, 3, 1], img: \"block\", set: \"terrain\" },\n    { coord: [2, 2, 1], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [3, 2, 1], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [4, 1, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [4, 3, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [6, 3, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [6, 5, 1], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [6, 1, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [6, -1, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [4, -1, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [4, -3, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [6, -3, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [8, -3, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [8, -1, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [8, 1, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [10, 1, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [10, -1, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n    {\n      coord: [4, 2, 1],\n      img: \"blockDirtRamp\",\n      set: \"terrain\",\n      direction: \"east\",\n    },\n    {\n      coord: [6, 4, 1],\n      img: \"blockDirtRamp\",\n      set: \"terrain\",\n      direction: \"south\",\n    },\n    { coord: [5, -1, 1], img: \"block\", set: \"terrain\" },\n    { coord: [6, -1, 1], img: \"treePine\", set: \"terrain\" },\n  ],\n  decorations: [{ coord: [6, 1, 1], img: \"plant\", set: \"terrain\" }],\n  characters: [\n    { ...amerigo, position: [1, 1, 2] },\n    { ...catoo, position: [7, 6, 2] },\n    { ...tinka, position: [4, -2, 1] },\n    { ...carl, position: [7, -1, 1] },\n    { ...piet, position: [7, 1, 1] },\n    { ...gina, position: [9, 0, 1] },\n    { ...sint, position: [9, -3, 1] },\n  ],\n  exits: [],\n};\n\nexport default stage1;\n","import { LevelData } from \"../types\";\nimport { amerigo } from \"./characters/amerigo\";\n\nconst bedroom: LevelData = {\n  name: \"Slaapkamer\",\n  tiles: [\n    { coord: [2, 0, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [2, 1, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [2, 2, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [3, 0, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [3, 1, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [3, 2, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [4, 0, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [4, 1, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [4, 2, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [5, 0, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [5, 1, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [5, 2, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [2, 3, 2], img: \"wall\", set: \"furniture\", direction: \"west\" },\n    { coord: [3, 3, 2], img: \"wall\", set: \"furniture\", direction: \"west\" },\n    { coord: [4, 3, 2], img: \"wall\", set: \"furniture\", direction: \"west\" },\n    { coord: [5, 3, 2], img: \"wall\", set: \"furniture\", direction: \"west\" },\n    {\n      coord: [2, 1, 2],\n      img: \"desk\",\n      set: \"furniture\",\n      direction: \"east\",\n    },\n    {\n      coord: [2, 2, 2],\n      img: \"bedSingle\",\n      set: \"furniture\",\n      direction: \"east\",\n    },\n    {\n      coord: [1, 2, 2],\n      img: \"wall\",\n      set: \"furniture\",\n      direction: \"north\",\n    },\n    {\n      coord: [1, 1, 2],\n      img: \"wall\",\n      set: \"furniture\",\n      direction: \"north\",\n    },\n    {\n      coord: [1, 0, 2],\n      img: \"wall\",\n      set: \"furniture\",\n      direction: \"north\",\n    },\n    { coord: [5, -1, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [6, -1, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [5, -2, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [6, -2, 1], img: \"floorFull\", set: \"furniture\" },\n    { coord: [5, -3, 1], img: \"floorFull\", set: \"furniture\" },\n    {\n      coord: [6, -3, 1],\n      img: \"stairs\",\n      set: \"furniture\",\n      direction: \"east\",\n      size: \"wide\",\n    },\n    {\n      coord: [5, 0, 1],\n      img: \"wallDoorway\",\n      set: \"furniture\",\n      direction: \"west\",\n    },\n  ],\n  decorations: [],\n  characters: [amerigo],\n  exits: [{ coord: [6, -3, 1.5], level: \"Woonkamer\", startCoord: [8, -3, 1] }],\n};\n\nexport default bedroom;\n","import { LevelData } from \"../types\";\nimport { catoo } from \"./characters/catoo\";\n\nconst livingroom: LevelData = {\n  name: \"Woonkamer\",\n  tiles: [\n    {\n      coord: [6, -3, 1],\n      img: \"stairs\",\n      set: \"furniture\",\n      direction: \"east\",\n      size: \"wide\",\n    },\n    { coord: [7, -2, 1], img: \"wall\", set: \"furniture\", direction: \"west\" },\n    { coord: [7, -2, 1], img: \"wall\", set: \"furniture\", direction: \"north\" },\n    { coord: [6, -1, 1], img: \"wall\", set: \"furniture\", direction: \"north\" },\n    { coord: [7, -4, 1], img: \"wall\", set: \"furniture\", direction: \"north\" },\n    { coord: [6, 0, 1], img: \"wall\", set: \"furniture\", direction: \"north\" },\n    { coord: [6, 1, 1], img: \"wall\", set: \"furniture\", direction: \"north\" },\n    { coord: [6, 2, 1], img: \"wall\", set: \"furniture\", direction: \"north\" },\n    { coord: [7, 3, 1], img: \"wall\", set: \"furniture\", direction: \"west\" },\n    { coord: [8, 3, 1], img: \"wall\", set: \"furniture\", direction: \"west\" },\n    { coord: [9, 3, 1], img: \"wall\", set: \"furniture\", direction: \"west\" },\n    { coord: [10, 3, 1], img: \"wall\", set: \"furniture\", direction: \"west\" },\n    { coord: [8, -3, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [8, -4, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [8, -2, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [8, -1, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [8, 0, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [8, 1, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [8, 2, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [7, -1, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [7, 2, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [7, 1, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [7, 0, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [9, 2, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [9, 2, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [9, 1, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [9, 0, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [9, -1, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [10, 2, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [10, 2, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [10, 1, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [10, 0, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [10, -1, 0], img: \"floorFull\", set: \"furniture\" },\n    {\n      coord: [8, 1, 1],\n      img: \"loungeDesignSofa\",\n      set: \"furniture\",\n      size: \"wide\",\n    },\n    {\n      coord: [7, -1, 1],\n      img: \"bookcaseOpen\",\n      set: \"furniture\",\n    },\n    { coord: [8, -5, 0], img: \"blockDirt\", set: \"terrain\" },\n  ],\n  decorations: [\n    {\n      coord: [8, -1, 1],\n      img: \"doorwayOpen\",\n      set: \"furniture\",\n      direction: \"west\",\n    },\n    {\n      coord: [8, -4, 1],\n      img: \"doorwayOpen\",\n      set: \"furniture\",\n      direction: \"west\",\n    },\n  ],\n  characters: [catoo],\n  exits: [\n    { coord: [7, -3, 1.5], level: \"Slaapkamer\", startCoord: [5, -3, 2] },\n    { coord: [8, -5, 1], level: \"Straat\", startCoord: [8, -5, 1] },\n  ],\n};\n\nexport default livingroom;\n","import { LevelData, TerrainTile } from \"../types\";\nimport { tinka } from \"./characters/tinka\";\nimport { carl } from \"./characters/carl\";\nimport { piet } from \"./characters/piet\";\n\nconst street: LevelData = {\n  name: \"Straat\",\n  tiles: [\n    { coord: [7, -5, 0], img: \"floorFull\", set: \"furniture\" },\n    { coord: [8, -4, 0], img: \"block\", set: \"terrain\" },\n    { coord: [8, -5, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [8, -6, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [8, -7, 0], img: \"block\", set: \"terrain\" },\n\n    { coord: [9, -4, 0], img: \"block\", set: \"terrain\" },\n    { coord: [9, -5, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [9, -6, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [9, -7, 0], img: \"block\", set: \"terrain\" },\n\n    { coord: [10, -4, 0], img: \"block\", set: \"terrain\" },\n    { coord: [10, -5, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [10, -6, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [10, -7, 0], img: \"block\", set: \"terrain\" },\n\n    { coord: [9, -4, 0], img: \"block\", set: \"terrain\" },\n    { coord: [9, -5, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [9, -6, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [9, -7, 0], img: \"block\", set: \"terrain\" },\n    { coord: [10, -4, 1], img: \"treePine\", set: \"terrain\" },\n\n    { coord: [8, -3, 1], img: \"wallHalf\", set: \"fantasy\", direction: \"west\" },\n    { coord: [9, -3, 1], img: \"wallHalf\", set: \"fantasy\", direction: \"west\" },\n\n    { coord: [10, -3, 1], img: \"wallHalf\", set: \"fantasy\", direction: \"west\" },\n    { coord: [10, -7, 1], img: \"treePine\", set: \"terrain\" },\n    { coord: [10, -4, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    { coord: [10, -7, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    { coord: [12, 6, 0], img: \"block\", set: \"terrain\" },\n    { coord: [11, 6, 0], img: \"block\", set: \"terrain\" },\n    { coord: [14, 6, 0], img: \"block\", set: \"terrain\" },\n\n    ...Array(4)\n      .fill(0)\n      .map((_, i) => -7 + i)\n      .reduce(\n        (r, y) =>\n          r.concat([\n            { coord: [11, y, 0], img: \"roadCurb\", set: \"fantasy\" },\n            { coord: [12, y, 0], img: \"roadEdge\", set: \"fantasy\" },\n            { coord: [13, y, 0], img: \"road\", set: \"fantasy\" },\n            { coord: [14, y, 0], img: \"road\", set: \"fantasy\" },\n          ]),\n        [] as TerrainTile[]\n      ),\n    ...Array(10)\n      .fill(0)\n      .map((_, i) => -3 + i)\n      .reduce(\n        (r, y) =>\n          r.concat([\n            {\n              coord: [10, y, 0],\n              img: \"block\",\n              set: \"terrain\",\n            },\n            {\n              coord: [10, y, 1],\n              img: \"hedge\",\n              set: \"fantasy\",\n              direction: \"south\",\n            },\n            { coord: [11, y, 0], img: \"roadCurb\", set: \"fantasy\" },\n            { coord: [12, y, 0], img: \"roadEdge\", set: \"fantasy\" },\n            { coord: [13, y, 0], img: \"road\", set: \"fantasy\" },\n            { coord: [14, y, 0], img: \"road\", set: \"fantasy\" },\n            ...((y % 3 === 0\n              ? [{ coord: [12, y, 1], img: \"lantern\", set: \"fantasy\" }]\n              : []) as TerrainTile[]),\n          ]),\n        [] as TerrainTile[]\n      ),\n    { coord: [13, 7, 0], img: \"planks\", set: \"fantasy\" },\n    { coord: [13, 8, 0], img: \"planks\", set: \"fantasy\" },\n    { coord: [14, 7, 1], img: \"fence\", set: \"fantasy\", direction: \"north\" },\n    { coord: [14, 8, 1], img: \"fence\", set: \"fantasy\", direction: \"north\" },\n    { coord: [12, 7, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    { coord: [12, 8, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    {\n      coord: [13, 7, 0],\n      img: \"wallWoodArchTopDetail\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [14, 8, 0],\n      img: \"wallWoodArchTopDetail\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n    { coord: [13, 9, 0], img: \"planks\", set: \"fantasy\" },\n    { coord: [13, 10, 0], img: \"planks\", set: \"fantasy\" },\n    { coord: [14, 9, 1], img: \"fence\", set: \"fantasy\", direction: \"north\" },\n    { coord: [14, 10, 1], img: \"fence\", set: \"fantasy\", direction: \"north\" },\n    { coord: [12, 9, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    { coord: [12, 10, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    {\n      coord: [13, 9, 0],\n      img: \"wallWoodArchTopDetail\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [14, 10, 0],\n      img: \"wallWoodArchTopDetail\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n    { coord: [12, 7, 1], img: \"wallHalf\", set: \"fantasy\", direction: \"west\" },\n    { coord: [14, 7, 1], img: \"wallHalf\", set: \"fantasy\", direction: \"west\" },\n    { coord: [11, 7, 1], img: \"wallHalf\", set: \"fantasy\", direction: \"west\" },\n  ],\n  decorations: [\n    { coord: [8, -5, 1], img: \"wallDoorwayRound\", set: \"fantasy\" },\n    { coord: [8, -4, 1], img: \"wallWindowStone\", set: \"fantasy\" },\n    { coord: [8, -6, 1], img: \"wallDoor\", set: \"fantasy\" },\n    { coord: [8, -7, 1], img: \"wallWindowStone\", set: \"fantasy\" },\n    { coord: [8, -7, 2], img: \"wallWindowStone\", set: \"fantasy\" },\n    { coord: [8, -6, 2], img: \"wallWindowStone\", set: \"fantasy\" },\n    { coord: [8, -5, 2], img: \"wallWindowStone\", set: \"fantasy\" },\n    { coord: [8, -4, 2], img: \"wallWindowStone\", set: \"fantasy\" },\n    { coord: [7, -7, 2], img: \"wall\", set: \"fantasy\", direction: \"west\" },\n    { coord: [7, -7, 1], img: \"wall\", set: \"fantasy\", direction: \"west\" },\n    { coord: [7, -7, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [7, -7, 3], img: \"roofLeft\", set: \"fantasy\" },\n    { coord: [7, -6, 3], img: \"roof\", set: \"fantasy\" },\n    { coord: [7, -5, 3], img: \"roof\", set: \"fantasy\" },\n    { coord: [7, -4, 3], img: \"roofRight\", set: \"fantasy\" },\n    { coord: [7, -4, 3], img: \"chimneyTop\", set: \"fantasy\" },\n  ],\n  characters: [tinka, carl, piet],\n  exits: [\n    { coord: [13, 10, 1], level: \"Berg\", startCoord: [18, 0, 1] },\n    { coord: [7, -5, 1], level: \"Woonkamer\", startCoord: [8, -4, 1] },\n  ],\n};\n\nexport default street;\n","import { LevelData } from \"../types\";\nimport { gina } from \"./characters/gina\";\nimport { sint } from \"./characters/sint\";\n\nconst mountain: LevelData = {\n  name: \"Berg\",\n  tiles: [\n    { coord: [18, -2, 0], img: \"planks\", set: \"fantasy\" },\n    { coord: [18, -1, 0], img: \"planks\", set: \"fantasy\" },\n    { coord: [19, -2, 1], img: \"fence\", set: \"fantasy\", direction: \"north\" },\n    { coord: [19, -1, 1], img: \"fence\", set: \"fantasy\", direction: \"north\" },\n    { coord: [17, -2, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    { coord: [17, -1, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    {\n      coord: [18, -2, 0],\n      img: \"wallWoodArchTopDetail\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [19, -1, 0],\n      img: \"wallWoodArchTopDetail\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n    { coord: [18, 0, 0], img: \"planks\", set: \"fantasy\" },\n    { coord: [18, 1, 0], img: \"planks\", set: \"fantasy\" },\n\n    { coord: [19, 0, 1], img: \"fence\", set: \"fantasy\", direction: \"north\" },\n    { coord: [19, 1, 1], img: \"fence\", set: \"fantasy\", direction: \"north\" },\n    { coord: [17, 0, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    { coord: [17, 1, 1], img: \"fence\", set: \"fantasy\", direction: \"south\" },\n    {\n      coord: [18, -2, 0],\n      img: \"wallWood\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [18, 0, 0],\n      img: \"wallWoodArchTopDetail\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [19, 1, 0],\n      img: \"wallWoodArchTopDetail\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n    { coord: [19, 2, 0], img: \"block\", set: \"terrain\" },\n    { coord: [18, 2, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [17, 2, 0], img: \"block\", set: \"terrain\" },\n    { coord: [16, 2, 0], img: \"block\", set: \"terrain\" },\n    { coord: [15, 2, 0], img: \"block\", set: \"terrain\" },\n\n    { coord: [19, 3, 0], img: \"block\", set: \"terrain\" },\n    { coord: [18, 3, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [17, 3, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [16, 3, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [15, 3, 0], img: \"block\", set: \"terrain\" },\n\n    { coord: [17, 4, 0], img: \"block\", set: \"terrain\" },\n    { coord: [16, 4, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [15, 4, 0], img: \"blockDirt\", set: \"terrain\" },\n\n    { coord: [18, 4, 0], img: \"blockLarge\", set: \"terrain\", size: \"large\" },\n\n    { coord: [17, 5, 0], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [16, 5, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [15, 5, 0], img: \"blockSnow\", set: \"terrain\" },\n\n    { coord: [19, 4, 1], img: \"treePine\", set: \"terrain\" },\n    { coord: [17, 2, 1], img: \"treePine\", set: \"terrain\" },\n    { coord: [14, 5, 2], img: \"treePineSnow\", set: \"terrain\" },\n\n    {\n      coord: [14, 4, 1],\n      img: \"blockDirtRamp\",\n      set: \"terrain\",\n      direction: \"east\",\n    },\n    { coord: [14, 5, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [14, 3, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [14, 2, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [14, 2, 0], img: \"blockDirt\", set: \"terrain\" },\n\n    { coord: [13, 2, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [12, 2, 0], img: \"blockDirt\", set: \"terrain\" },\n\n    { coord: [12, 2, 1], img: \"blockSnowLarge\", set: \"terrain\", size: \"large\" },\n    { coord: [12, 4, 1], img: \"blockSnowLarge\", set: \"terrain\", size: \"large\" },\n\n    {\n      coord: [11, 5, 2],\n      img: \"wallDetailCross\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [11, 3, 2],\n      img: \"wallDetailCross\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [11, 4, 2],\n      img: \"wallDoor\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [11, 3, 2],\n      img: \"wallDetailDiagonal\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [11, 3, 3],\n      img: \"wallDetailCross\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [11, 3, 3],\n      img: \"wallWindowGlass\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [11, 4, 3],\n      img: \"wallWindowGlass\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [11, 5, 3],\n      img: \"wallWindowGlass\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    { coord: [12, 5, 1], img: \"planks\", set: \"fantasy\" },\n    { coord: [12, 4, 1], img: \"planks\", set: \"fantasy\" },\n    {\n      coord: [11, 2, 2],\n      img: \"wallBroken\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [12, 6, 2],\n      img: \"wallHalf\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [13, 6, 2],\n      img: \"wallHalf\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [11, 3, 4],\n      img: \"roofHighWindow\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n    {\n      coord: [11, 4, 4],\n      img: \"roofHigh\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n    {\n      coord: [11, 5, 4],\n      img: \"roofHighWindow\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n\n    { coord: [17, 6, 0], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [16, 6, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [15, 6, 0], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [14, 6, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [15, 6, 1], img: \"treePineSnow\", set: \"terrain\" },\n\n    { coord: [17, 7, 0], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [16, 7, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [15, 7, 0], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [14, 7, 1], img: \"blockSnow\", set: \"terrain\" },\n\n    { coord: [17, 8, 0], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [16, 8, 0], img: \"blockDirt\", set: \"terrain\" },\n    { coord: [15, 8, 0], img: \"blockDirt\", set: \"terrain\" },\n    {\n      coord: [14, 8, 1],\n      img: \"blockSnowSlope\",\n      set: \"terrain\",\n      direction: \"east\",\n    },\n\n    { coord: [17, 8, 1], img: \"treePineSnow\", set: \"terrain\" },\n    { coord: [16, 9, 1], img: \"treePineSnow\", set: \"terrain\" },\n\n    { coord: [17, 9, 0], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [16, 9, 0], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [15, 9, 0], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [14, 9, 1], img: \"blockSnow\", set: \"terrain\" },\n\n    { coord: [13, 9, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [13, 8, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [13, 7, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [13, 6, 1], img: \"blockSnow\", set: \"terrain\" },\n\n    { coord: [12, 9, 2], img: \"blockSnow\", set: \"terrain\" },\n    {\n      coord: [12, 8, 2],\n      img: \"blockSnowSlope\",\n      set: \"terrain\",\n      direction: \"south\",\n    },\n    { coord: [12, 7, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [12, 6, 1], img: \"blockSnow\", set: \"terrain\" },\n\n    { coord: [11, 9, 2], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [11, 8, 2], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [11, 7, 2], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [11, 6, 1], img: \"blockSnow\", set: \"terrain\" },\n\n    { coord: [10, 9, 2], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [10, 8, 2], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [10, 7, 2], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [10, 6, 1], img: \"blockSnow\", set: \"terrain\" },\n\n    { coord: [9, 9, 3], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [9, 8, 3], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [9, 7, 3], img: \"blockSnow\", set: \"terrain\" },\n\n    { coord: [10, 10, 2], img: \"treePineSnow\", set: \"terrain\" },\n    { coord: [12, 10, 2], img: \"treePineSnow\", set: \"terrain\" },\n\n    { coord: [13, 10, 2], img: \"blockSnow\", set: \"terrain\" },\n    {\n      coord: [14, 10, 2],\n      img: \"blockSnowSlope\",\n      set: \"terrain\",\n      direction: \"south\",\n    },\n\n    { coord: [15, 11, 2], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [15, 10, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [16, 10, 1], img: \"blockSnow\", set: \"terrain\" },\n    { coord: [17, 10, 1], img: \"blockSnow\", set: \"terrain\" },\n\n    {\n      coord: [13, 11, 2],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n\n    {\n      coord: [15, 12, 2],\n      img: \"blockSnowSlope\",\n      set: \"terrain\",\n      direction: \"east\",\n    },\n    { coord: [16, 10, 2], img: \"treePineSnow\", set: \"terrain\" },\n    {\n      coord: [16, 11, 1],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [18, 11, 1],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    { coord: [19, 11, 2], img: \"treePineSnow\", set: \"terrain\" },\n    { coord: [17, 12, 2], img: \"treePineSnow\", set: \"terrain\" },\n    {\n      coord: [20, 11, 1],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n\n    { coord: [21, 12, 2], img: \"arrow\", set: \"terrain\", direction: \"south\" },\n  ],\n  decorations: [\n    {\n      coord: [12, 5, 2],\n      img: \"overhang\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n    {\n      coord: [12, 4, 2],\n      img: \"overhang\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n  ],\n  characters: [gina, sint],\n  exits: [\n    { coord: [18, -2, 1], level: \"Straat\", startCoord: [13, 7, 1] },\n    { coord: [21, 11, 2], level: \"Feest\", startCoord: [10, -6, 1] },\n  ],\n};\n\nexport default mountain;\n","import { LevelData } from \"../types\";\nimport { matthijs } from \"./characters/matthijs\";\n\nconst finish: LevelData = {\n  name: \"Feest\",\n  tiles: [\n    {\n      coord: [10, -6, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [8, -6, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    { coord: [8, -6, 1], img: \"treePineSnow\", set: \"terrain\" },\n    { coord: [10, -5, 1], img: \"arrow\", set: \"terrain\", direction: \"south\" },\n    {\n      coord: [12, -6, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [10, -4, 1],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [12, -4, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [10, -2, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [12, -2, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [10, 0, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [12, 0, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [8, 0, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [8, -2, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [8, 2, 0],\n      img: \"blockDirt\",\n      set: \"terrain\",\n    },\n    {\n      coord: [9, 2, 0],\n      img: \"blockDirt\",\n      set: \"terrain\",\n    },\n    {\n      coord: [8, 3, 0],\n      img: \"blockDirt\",\n      set: \"terrain\",\n    },\n    {\n      coord: [6, 2, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [10, 2, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [6, 0, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [6, -2, 0],\n      img: \"blockSnowLarge\",\n      set: \"terrain\",\n      size: \"large\",\n    },\n    {\n      coord: [10, -2, 1],\n      img: \"treePineSnow\",\n      set: \"terrain\",\n    },\n    {\n      coord: [9, -2, 1],\n      img: \"treePineSnow\",\n      set: \"terrain\",\n    },\n    {\n      coord: [8, -2, 1],\n      img: \"treePineSnow\",\n      set: \"terrain\",\n    },\n    {\n      coord: [8, -3, 0],\n      img: \"treePineSnow\",\n      set: \"terrain\",\n    },\n    {\n      coord: [9, 3, 1],\n      img: \"wallWindowGlass\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [9, 3, 2],\n      img: \"wallWindowGlass\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [8, 3, 2],\n      img: \"wallWindowRound\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [9, 3, 2],\n      img: \"wall\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [8, 3, 1],\n      img: \"wall\",\n      set: \"fantasy\",\n      direction: \"north\",\n    },\n    {\n      coord: [9, 3, 1],\n      img: \"wall\",\n      set: \"fantasy\",\n      direction: \"south\",\n    },\n    {\n      coord: [8, 3, 1],\n      img: \"wallDoorwaySquare\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [8, 3, 3],\n      img: \"roofLeft\",\n      set: \"fantasy\",\n      direction: \"east\",\n    },\n    {\n      coord: [9, 3, 3],\n      img: \"roofRight\",\n      set: \"fantasy\",\n      direction: \"east\",\n    },\n    {\n      coord: [10, 4, 1],\n      img: \"wallWoodDoor\",\n      set: \"fantasy\",\n      direction: \"west\",\n    },\n    {\n      coord: [10, 0, 1],\n      img: \"presentGreenLow\",\n      direction: \"west\",\n      set: \"holiday\",\n    },\n    {\n      coord: [7, 2, 1],\n      img: \"presentGreenRound\",\n      set: \"holiday\",\n    },\n    {\n      coord: [11, -3, 2],\n      img: \"presentLow\",\n      set: \"holiday\",\n    },\n    {\n      coord: [11, 2, 1],\n      img: \"present\",\n      set: \"holiday\",\n    },\n    { coord: [7, 3, 1], img: \"treePineSnow\", set: \"terrain\" },\n    { coord: [6, 2, 1], img: \"treePineSnow\", set: \"terrain\" },\n    { coord: [6, 1, 1], img: \"treePineSnow\", set: \"terrain\" },\n  ],\n  decorations: [],\n  characters: [matthijs],\n  exits: [{ coord: [9, -5, 1], level: \"Berg\", startCoord: [20, 12, 2] }],\n};\n\nexport default finish;\n","import { CharacterSprites, LevelCharacter } from \"../../types\";\n\nexport const matthijs: LevelCharacter = {\n  characterSprite: CharacterSprites.Matthijs,\n  position: [8, 2, 1],\n  conditions: {\n    encountersCompleted: [CharacterSprites.Sint],\n  },\n  conditionDialog: [\n    {\n      characterColor: \"green\",\n      characterName: \"Matthijs\",\n      text: [\"Hee Tristan, kom je het Sinterklaas feest bij ons vieren?\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Ja graag, maar ik moet eerst nog Sinterklaas helpen geloof ik!\"],\n    },\n    {\n      characterColor: \"green\",\n      characterName: \"Matthijs\",\n      text: [\"Okee success! Kom je snel terug als je hem geholpen hebt?\"],\n    },\n  ],\n  initialDialog: [\n    {\n      characterColor: \"green\",\n      characterName: \"Matthijs\",\n      text: [\"Hee Tristan, kom je het Sinterklaas feest bij ons vieren?\"],\n    },\n    {\n      characterColor: \"orange\",\n      characterName: \"Tristan\",\n      text: [\"Zeker, ik heb hem zelfs meegenomen!\"],\n    },\n    {\n      characterColor: \"green\",\n      characterName: \"Matthijs\",\n      text: [\"Wow goed gedaan! Laten we snel naar binnen gaan!\"],\n    },\n  ],\n  fights: [],\n  rewards: { gameCompleted: true },\n  winDialog: [],\n  loseDialog: [],\n};\n","import React, { useState, useEffect } from \"react\";\nimport CombatArena from \"./components/CombatArena\";\nimport DialogView from \"./components/Dialog\";\nimport Level from \"./components/Level\";\nimport { evolutions } from \"./data/creatures\";\nimport zones from \"./data\";\nimport {\n  addFollower,\n  getCard,\n  giveXP,\n  removeCard,\n  selectCardIds,\n  selectZone,\n} from \"./state/characterSlice\";\nimport {\n  endEncounter,\n  selectFightWon,\n  selectInCombat,\n  selectLevelingUp,\n  startFight,\n} from \"./state/combatSlice\";\nimport {\n  closeEncounter,\n  EncounterState,\n  selectActiveEncounter,\n  winEncounter,\n} from \"./state/encounterSlice\";\nimport { useAppDispatch, useAppSelector } from \"./state/hooks\";\nimport { LevelCharacter, LevelData, Dialog } from \"./types\";\nimport Icon from \"./components/Icon\";\n\nconst AFTER_FIGHT_COOLDOWN = 3000;\n\ntype DialogType =\n  | \"initial\"\n  | \"conditional\"\n  | \"win\"\n  | \"lose\"\n  | \"evolve\"\n  | \"none\";\n\ntype DialogState = {\n  type: DialogType;\n  sentence: number;\n};\n\ntype DialogProps = {\n  characterName: string;\n  characterColor: string;\n  text: string;\n};\n\nconst processText = (text: string): React.ReactNode =>\n  text\n    .replaceAll(\":rock:\", \"|rockIcon|\")\n    .replaceAll(\":paper:\", \"|paperIcon|\")\n    .replaceAll(\":scissors:\", \"|scissorsIcon|\")\n    .split(\"|\")\n    .map((element, index) => {\n      if (element === \"rockIcon\") return <Icon symbol={\"rod\"} key={index} />;\n      if (element === \"paperIcon\") return <Icon symbol={\"bag\"} key={index} />;\n      if (element === \"scissorsIcon\")\n        return <Icon symbol={\"shoe\"} key={index} />;\n      return <React.Fragment key={index}>{element}</React.Fragment>;\n    });\n\nconst hasDialogEnded = (\n  dialogType: DialogType,\n  character: LevelCharacter | undefined,\n  dialogState: DialogState,\n  evolving?: string\n): boolean => {\n  if (dialogState.type !== dialogType) return false;\n\n  const dialogData = selectDialogData(character, dialogState, evolving);\n  return dialogData === false;\n};\n\nconst selectDialogData = (\n  character: LevelCharacter | undefined,\n  dialogState: DialogState,\n  evolving?: string\n): DialogProps | false => {\n  let dialogList: Dialog[] = [];\n  if (character) {\n    if (dialogState.type === \"initial\") {\n      dialogList = character.initialDialog;\n    }\n    if (dialogState.type === \"lose\") {\n      dialogList = character.loseDialog;\n    }\n    if (dialogState.type === \"win\") {\n      dialogList = character.winDialog;\n    }\n    if (dialogState.type === \"conditional\") {\n      dialogList = character.conditionDialog;\n    }\n  }\n  if (evolving) {\n    const evolveData = evolutions[evolving];\n    dialogList = evolveData.dialog;\n  }\n  if (dialogList.length === 0) return false;\n\n  let sentencesConsumed = dialogState.sentence;\n  let dialogIndex = 0;\n  while (sentencesConsumed > -1) {\n    const activeDialog = dialogList[dialogIndex];\n    if (!activeDialog) return false;\n    if (activeDialog.text.length <= sentencesConsumed) {\n      dialogIndex++;\n      sentencesConsumed -= activeDialog.text.length;\n    } else {\n      return {\n        characterColor: activeDialog.characterColor,\n        characterName: activeDialog.characterName,\n        text: activeDialog.text[sentencesConsumed],\n      };\n    }\n  }\n\n  return {\n    characterColor: \"orange\",\n    characterName: \"Tristan\",\n    text: \"Awesome!\",\n  };\n};\n\nconst selectEncounterCharacter = (\n  data: LevelData,\n  encounter: EncounterState\n): LevelCharacter | undefined => {\n  if (encounter.encounterCharacter === -1) return undefined;\n\n  return data.characters.find(\n    (ch) => ch.characterSprite === encounter.encounterCharacter\n  );\n};\n\ntype Props = {\n  onComplete: () => void;\n};\n\nconst Game: React.FunctionComponent<Props> = ({ onComplete }) => {\n  const dispatch = useAppDispatch();\n  const encounter = useAppSelector(selectActiveEncounter);\n  const zoneId = useAppSelector(selectZone);\n  const cardIds = useAppSelector(selectCardIds);\n  const evolving = useAppSelector(selectLevelingUp);\n\n  const zone = zones[zoneId];\n\n  const inCombat = useAppSelector(selectInCombat);\n  const fightWon = useAppSelector(selectFightWon);\n  const [dialogState, setDialogState] = useState<DialogState>({\n    type: \"none\",\n    sentence: 0,\n  });\n  const character = selectEncounterCharacter(zone, encounter);\n\n  useEffect(() => {\n    if (character && dialogState.type === \"none\") {\n      let metConditions = true;\n      if (character.conditions) {\n        if (\n          character.conditions.minimalCards &&\n          character.conditions.minimalCards > cardIds.length\n        ) {\n          metConditions = false;\n        }\n        if (\n          character.conditions.encountersCompleted &&\n          !character.conditions.encountersCompleted.every((e) =>\n            encounter.encountersCompleted.includes(e)\n          )\n        ) {\n          metConditions = false;\n        }\n      }\n\n      setDialogState({\n        type: metConditions ? \"initial\" : \"conditional\",\n        sentence: 0,\n      });\n    }\n    if (\n      !inCombat &&\n      character &&\n      hasDialogEnded(\"initial\", character, dialogState)\n    ) {\n      const activeFight = character.fights[encounter.fightsFinished];\n      if (activeFight) {\n        dispatch(startFight(activeFight.enemies));\n      } else {\n        dispatch(winEncounter());\n      }\n    }\n    if (\n      character &&\n      (hasDialogEnded(\"lose\", character, dialogState) ||\n        hasDialogEnded(\"conditional\", character, dialogState))\n    ) {\n      dispatch(closeEncounter(false));\n      setDialogState({ type: \"none\", sentence: 0 });\n    }\n    if (\n      evolving &&\n      hasDialogEnded(\"evolve\", character, dialogState, evolving)\n    ) {\n      setDialogState({ type: \"none\", sentence: 0 });\n\n      const evolveData = evolutions[evolving];\n      dispatch(removeCard(evolving));\n      dispatch(getCard(evolveData.newCard));\n    }\n    if (character && hasDialogEnded(\"win\", character, dialogState)) {\n      dispatch(closeEncounter(true));\n      setDialogState({ type: \"none\", sentence: 0 });\n      if (character.rewards.card) {\n        dispatch(getCard(character.rewards.card));\n      }\n      if (character.rewards.removeCard) {\n        dispatch(removeCard(character.rewards.removeCard));\n      }\n      if (character.rewards.follower) {\n        dispatch(addFollower(character.rewards.follower));\n      }\n      if (character.rewards.xp) {\n        dispatch(giveXP(character.rewards.xp));\n      }\n      if (character.rewards.gameCompleted) {\n        onComplete();\n      }\n    }\n  }, [\n    onComplete,\n    inCombat,\n    character,\n    dialogState,\n    dispatch,\n    encounter.fightsFinished,\n    encounter.encountersCompleted,\n    cardIds.length,\n    evolving,\n  ]);\n\n  useEffect(() => {\n    if (\n      character &&\n      encounter.result === \"lost\" &&\n      dialogState.type !== \"lose\"\n    ) {\n      const timeoutId = setTimeout(() => {\n        setDialogState({ type: \"lose\", sentence: 0 });\n        dispatch(endEncounter());\n      }, AFTER_FIGHT_COOLDOWN);\n      return () => clearTimeout(timeoutId);\n    }\n    if (character && encounter.result === \"won\" && dialogState.type !== \"win\") {\n      if (inCombat) {\n        const timeoutId = setTimeout(() => {\n          setDialogState({ type: \"win\", sentence: 0 });\n          dispatch(endEncounter());\n        }, AFTER_FIGHT_COOLDOWN);\n        return () => clearTimeout(timeoutId);\n      } else {\n        setDialogState({ type: \"win\", sentence: 0 });\n        dispatch(endEncounter());\n      }\n    }\n    if (\n      inCombat &&\n      character &&\n      encounter.result === \"inProgress\" &&\n      fightWon &&\n      encounter.fightsFinished > 0 &&\n      character.fights[encounter.fightsFinished]\n    ) {\n      const timeoutId = setTimeout(() => {\n        dispatch(\n          startFight(character.fights[encounter.fightsFinished].enemies)\n        );\n      }, AFTER_FIGHT_COOLDOWN);\n      return () => clearTimeout(timeoutId);\n    }\n  }, [\n    encounter.result,\n    character,\n    dialogState.type,\n    dispatch,\n    fightWon,\n    inCombat,\n    encounter.fightsFinished,\n  ]);\n\n  const dialogData = selectDialogData(character, dialogState, evolving);\n\n  return (\n    <main>\n      <Level data={zone} />\n      {inCombat && character && <CombatArena character={character} />}\n      {dialogData && (\n        <DialogView\n          name={dialogData.characterName}\n          color={dialogData.characterColor}\n          onClick={() => {\n            setDialogState((state) => ({\n              ...state,\n              type: evolving ? \"evolve\" : state.type,\n              sentence: state.sentence + 1,\n            }));\n          }}\n        >\n          {processText(dialogData.text)}\n        </DialogView>\n      )}\n    </main>\n  );\n};\n\nexport default Game;\n","import React, { useState, useCallback } from \"react\";\nimport SplashScreen from \"./components/SplashScreen\";\nimport Game from \"./Game\";\n\ntype GameState = \"init\" | \"started\" | \"finished\";\n\nconst App: React.FunctionComponent = () => {\n  const [gameState, setGameState] = useState<GameState>(\"init\");\n\n  const onComplete = useCallback(() => {\n    setGameState(\"finished\");\n  }, []);\n\n  const onStart = useCallback(() => {\n    setGameState(\"started\");\n  }, []);\n\n  if (gameState === \"started\") {\n    return <Game onComplete={onComplete} />;\n  }\n\n  if (gameState === \"finished\") {\n    return <SplashScreen screen=\"end\" />;\n  }\n\n  return <SplashScreen onKeyPress={onStart} screen=\"start\" />;\n};\n\nexport default App;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport characterReducer from \"./characterSlice\";\nimport combatReducer from \"./combatSlice\";\nimport encounterReducer from \"./encounterSlice\";\n\nexport const store = configureStore({\n  reducer: {\n    character: characterReducer,\n    combat: combatReducer,\n    encounter: encounterReducer,\n  },\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { store } from \"./state/store\";\nimport { Provider } from \"react-redux\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}